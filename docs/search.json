[{"path":[]},{"path":"/CODE_OF_CONDUCT.html","id":"our-pledge","dir":"","previous_headings":"","what":"Our Pledge","title":"Contributor Covenant Code of Conduct","text":"members, contributors, leaders pledge make participation community harassment-free experience everyone, regardless age, body size, visible invisible disability, ethnicity, sex characteristics, gender identity expression, level experience, education, socio-economic status, nationality, personal appearance, race, caste, color, religion, sexual identity orientation. pledge act interact ways contribute open, welcoming, diverse, inclusive, healthy community.","code":""},{"path":"/CODE_OF_CONDUCT.html","id":"our-standards","dir":"","previous_headings":"","what":"Our Standards","title":"Contributor Covenant Code of Conduct","text":"Examples behavior contributes positive environment community include: Demonstrating empathy kindness toward people respectful differing opinions, viewpoints, experiences Giving gracefully accepting constructive feedback Accepting responsibility apologizing affected mistakes, learning experience Focusing best just us individuals, overall community Examples unacceptable behavior include: use sexualized language imagery, sexual attention advances kind Trolling, insulting derogatory comments, personal political attacks Public private harassment Publishing others’ private information, physical email address, without explicit permission conduct reasonably considered inappropriate professional setting","code":""},{"path":"/CODE_OF_CONDUCT.html","id":"enforcement-responsibilities","dir":"","previous_headings":"","what":"Enforcement Responsibilities","title":"Contributor Covenant Code of Conduct","text":"Community leaders responsible clarifying enforcing standards acceptable behavior take appropriate fair corrective action response behavior deem inappropriate, threatening, offensive, harmful. Community leaders right responsibility remove, edit, reject comments, commits, code, wiki edits, issues, contributions aligned Code Conduct, communicate reasons moderation decisions appropriate.","code":""},{"path":"/CODE_OF_CONDUCT.html","id":"scope","dir":"","previous_headings":"","what":"Scope","title":"Contributor Covenant Code of Conduct","text":"Code Conduct applies within community spaces, also applies individual officially representing community public spaces. Examples representing community include using official e-mail address, posting via official social media account, acting appointed representative online offline event.","code":""},{"path":"/CODE_OF_CONDUCT.html","id":"enforcement","dir":"","previous_headings":"","what":"Enforcement","title":"Contributor Covenant Code of Conduct","text":"Instances abusive, harassing, otherwise unacceptable behavior may reported community leaders responsible enforcement legoupil@unhcr.org. complaints reviewed investigated promptly fairly. community leaders obligated respect privacy security reporter incident.","code":""},{"path":"/CODE_OF_CONDUCT.html","id":"enforcement-guidelines","dir":"","previous_headings":"","what":"Enforcement Guidelines","title":"Contributor Covenant Code of Conduct","text":"Community leaders follow Community Impact Guidelines determining consequences action deem violation Code Conduct:","code":""},{"path":"/CODE_OF_CONDUCT.html","id":"id_1-correction","dir":"","previous_headings":"Enforcement Guidelines","what":"1. Correction","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Use inappropriate language behavior deemed unprofessional unwelcome community. Consequence: private, written warning community leaders, providing clarity around nature violation explanation behavior inappropriate. public apology may requested.","code":""},{"path":"/CODE_OF_CONDUCT.html","id":"id_2-warning","dir":"","previous_headings":"Enforcement Guidelines","what":"2. Warning","title":"Contributor Covenant Code of Conduct","text":"Community Impact: violation single incident series actions. Consequence: warning consequences continued behavior. interaction people involved, including unsolicited interaction enforcing Code Conduct, specified period time. includes avoiding interactions community spaces well external channels like social media. Violating terms may lead temporary permanent ban.","code":""},{"path":"/CODE_OF_CONDUCT.html","id":"id_3-temporary-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"3. Temporary Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: serious violation community standards, including sustained inappropriate behavior. Consequence: temporary ban sort interaction public communication community specified period time. public private interaction people involved, including unsolicited interaction enforcing Code Conduct, allowed period. Violating terms may lead permanent ban.","code":""},{"path":"/CODE_OF_CONDUCT.html","id":"id_4-permanent-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"4. Permanent Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Demonstrating pattern violation community standards, including sustained inappropriate behavior, harassment individual, aggression toward disparagement classes individuals. Consequence: permanent ban sort public interaction within community.","code":""},{"path":"/CODE_OF_CONDUCT.html","id":"attribution","dir":"","previous_headings":"","what":"Attribution","title":"Contributor Covenant Code of Conduct","text":"Code Conduct adapted Contributor Covenant, version 2.1, available https://www.contributor-covenant.org/version/2/1/code_of_conduct.html. Community Impact Guidelines inspired [Mozilla’s code conduct enforcement ladder][https://github.com/mozilla/inclusion]. answers common questions code conduct, see FAQ https://www.contributor-covenant.org/faq. Translations available https://www.contributor-covenant.org/translations.","code":""},{"path":"/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 UNHCR Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"/articles/1-data-tidying.html","id":"fetch_fts_data","dir":"Articles","previous_headings":"","what":"fetch_fts_data","title":"1-Data Tidying","text":"description type variables flows data -","code":""},{"path":"/articles/1-data-tidying.html","id":"identifiers","dir":"Articles","previous_headings":"fetch_fts_data","what":"Identifiers","title":"1-Data Tidying","text":"id unique identifier row, used future update funding row. versionId childFlowIds FTS database allows funding flows linked together represent funding cascading implementation chain primary donors field implementers. flows chained together way, flow downstream flow viewed referred child flow. child flows parent flow upstream. parentFlowId FTS database allows funding flows linked together represent funding cascading implementation chain primary donors field implementers. flows chained together way, flow upstream flow viewed referred parent flow. parent flows one child flows downstream. flowType factor following levels “Carryover” “Parked” “Pass ” “Standard” parked flow refers funding flow initially may allocated specific organizations sectors, additional information forthcoming. ‘Parked’ funding usually parent flow (see glossary parent flow) number linked child flows. Parking parent flow allows children reflect source information linked parent. Parked records either major funding decisions (e.g. ECHO decisions begin large funding envelope without destination organizations) information recipients determined later time (added child flows), multi-year funding records yearly contributions broken child flows ‘parked’ flow. Pass funding refers downstream funding allocations (e.g. Donor UN Agency NGO, Donor International NGO Local NGO, etc.). refCode code related grant agreement fund, ideally known donor recipient organizations. reportDetails list following variablessourceType organization reportChannel date","code":""},{"path":"/articles/1-data-tidying.html","id":"flow-description","dir":"Articles","previous_headings":"fetch_fts_data","what":"Flow Description","title":"1-Data Tidying","text":"description description briefly; ie. destination activity/project, location within country, duration. grandBargainEarmarkingType modality earmarking (Earmarked, Softly earmarked, tightly earmarked, unearmarked) https://fts.unocha.org/glossary Unearmarked Fully flexible core contribution Financial contribution aid organisation budget, fully flexible (within boundaries set mandates, governing body regulations etc.) B Fully flexible core contribution CERF Financial contribution CERF budget, fully flexible within CERF regulations. C Core contribution Financial contribution significant part aid organisation’s mandate, e.g. restricted humanitarian operations double-mandated organisation. aid organisation can instructed distribute discretion – several strategic objectives/regions/crises avoid entire contribution used one context. Softly earmarked D Core contribution limitations Financial contribution, exclusions pertaining small number specific countries. aid organisation can instructed use funding outside certain areas countries. E Directed geographical region strategic objective Financial contribution, fully flexible within boundaries strategic objective (e.g. health education) region (e.g. Africa). reflect priorities Strategic Plan approved relevant governing body. F Directed Country-Based Pooled Fund Financial contribution directed specific Country-Based Pooled Fund, otherwise fully flexible. Earmarked G Directed aid organiastion’s country operations Financial contribution, directed specific country, otherwise fully flexible. reflect priorities set relevant governing body regarding country operations. H Directed subobjective/target Financial contribution, directed subcategories strategic objectives, e.g. health/malaria education /teacher training, without geographical limitations. reflect priorities Strategic Plan approved relevant governing body. Tightly earmarked Directed specific project Financial contribution directed specific project specific country. J Directed geographically thematically, tied financial Financial contribution, tied certain conditions terms purchase restrictions, directed specific country/region specific objective. instance, financial contribution purchase ABC school feeding X-land. K Directed geographically thematically, kind. -kind contribution directed specific country/region specific objective. instance, rice school feeding X-land. L Donor-initiated projects/directed contributions Financial contribution coupled demand specific project specific country fulfilling donor priorities. reflecting Strategic Plan aid organisation. instance, becomes service provider. also put strain non-project support costs (overhead costs). contributionType - (financial, -kind) Reporting Status indicate status humanitarian fund reported per row (“New Contribution”, “Top-/Update”, “Old Contribution”) New contribution (aka New money): fund reported FTS reporter first time. Top-/update: fund reported FTS reporter now update amount /details. Old contribution: fund reported FTS reporter change. Used reporters share cumulative reports. newMoney FALSE/TRUE keywords method Cash Transfer Programming (CTP) refers programs cash (vouchers goods services) directly provided beneficiaries.CTP can three types: cash, mobile phone transfer vouchers. FTS refers humanitarian assistance modalities traditional aid. Traditional: Non-cash assistance provided form materials services (.e. food, tents, PSS, secondment staff). boundary Boundaries classify relevant flows categories incoming, internal outgoing. FTS database records flows funding, draws boundaries around (combinations ) flow properties calculate totals. Examples common boundaries response plan/appeal combination (donor affected) country year. Drawing boundary classifies flows database crossing boundary inward (incoming flows), originating terminating within boundary (internal flows), crossing outwards (outgoing flows), fourth category displayed - irrelevant boundary originate terminate outside . Incoming flows flows cross given search boundary inwards. boundary e.g. affected country year, flows originating donor countries multilateral organisations attributed country incoming flows, carry-previous year. avoid double-counting, incoming flows never added internal flows. Outgoing flows flows originate within terminate outside given search boundary. boundary e.g. affected country year, flows representing carry-overs next year outgoing flows. onBoundary status status humanitarian funding reported. (pledge, commitment, paid) “commitment” binding agreement signed parties approval grant donor member state. Creation contractual obligation regarding funding donor appealing agency; almost always takes form signed contract. crucial stage humanitarian funding: agencies spend money implement funding commitment made. “pledge” binding agreement official government approval.non-binding announcement intended contribution allocation donor. recipient organization response plan project necessarily specified. soon commitment reported FTS pledge, amount pledge column reduced accordingly. FTS tables therefore show ‘outstanding’ (‘total original’) pledge amount. information reported us directly donors agencies may may include verbal commitments made pledging conferences. “paid” money transfer realized. FTS track disbursements / installments","code":"New contribution (aka New money): The fund is being reported to FTS by the same reporter for the first time. Top-up/update: The fund was reported to FTS by the same reporter and now there is an update on the amount and/or on any other details. Old contribution: The fund was reported to FTS by the same reporter and there is no change. Used when reporters share cumulative reports."},{"path":"/articles/1-data-tidying.html","id":"quantity","dir":"Articles","previous_headings":"fetch_fts_data","what":"Quantity","title":"1-Data Tidying","text":"amountUSD Total Amount US$ fullParkedAmountUSD originalAmount originalCurrency Original Currency currency humanitarian fund reported. exchangeRate blank, FTS use UN Operational Exchange Rate (https://treasury.un.org/operationalrates/OperationalRates.php), grant decision date","code":""},{"path":"/articles/1-data-tidying.html","id":"date","dir":"Articles","previous_headings":"fetch_fts_data","what":"Date","title":"1-Data Tidying","text":"budgetYear Indicate year funding used. FTS works calendar year system (January December year) date Date submited FTS decisionDate Date grant agreement signed recipient organization donor organization. date official endorsement donor member state firstReportedDate createdAt updatedAt","code":""},{"path":"/articles/1-data-tidying.html","id":"source","dir":"Articles","previous_headings":"fetch_fts_data","what":"Source","title":"1-Data Tidying","text":"sourceObjects list variable including: * id\"                    *name” * type can take following values: * “Organization”Source Organisation * “Location” Location source organisation *“UsageYear” Indicate year donor plans allocate funding","code":""},{"path":"/articles/1-data-tidying.html","id":"destination","dir":"Articles","previous_headings":"fetch_fts_data","what":"Destination","title":"1-Data Tidying","text":"destinationObjects list variable including: * id\"                    *name” * type can take following values: * “Cluster” Global Sector refers discrete technical area humanitarian action, whereas field cluster technical area specific coordinated plan. List Global Sectors can found : https://fts.unocha.org/global-sectors/summary/2025. * “GlobalCluster” Global Sector refers discrete technical area humanitarian action, whereas field cluster technical area specific coordinated plan. List Global Sectors can found : https://fts.unocha.org/global-sectors/summary/2025. * “Location” location emergency addressed humanitarian funding reported * “Plan” Destination Plan/Appeal Name = left blank funding outside plan. Refer Coordinated Plans Page FTS website * “UsageYear” * “Organization”Recipient Organisation * “behavior” used two records type - signal breakdown “single” “shared” type==“Organization” - following additional variables available * organizationTypes * organizationSubTypes * organizationLevels","code":"# flows <- fetch_fts_data(year = 2025) #  # names(flows) # dplyr::glimpse(flows) # nrow(flows) # head(flows,1) #  # #sinew::makeOxygen(flows, add_fields = \"source\") # ## Saving it in the package to avoid constnat API Call # save(flows, file =  here::here(\"data\",\"flows.RData\")) # # Note: significantly better compression could be obtained # #by using R CMD build --resave-data # tools::resaveRdaFiles(here::here(\"data\",\"flows.RData\"),compress=\"bzip2\")"},{"path":"/articles/1-data-tidying.html","id":"filter_flows_for_indicators","dir":"Articles","previous_headings":"","what":"filter_flows_for_indicators","title":"1-Data Tidying","text":"analyzing funding flow data FTS (Financial Tracking Service), need apply pre-processing filtering rules compute donor-, recipient-, destination-level indicators . FTS data model contains several elements—funding chains, boundaries, parent/child flows, “parked” envelopes—must normalized prior aggregation. enforces official FTS logic ensure indicators computed without double-counting misclassification funding flows. 1. Boundary Filtering __incoming__flows retained. Incoming flows represent funding entering boundary (e.g., affected country + year, appeal, donor-country-year). standard FTS method calculating donor contributions, prevents contamination : Internal flows (money moving within boundary) Outgoing flows (money leaving boundary) Irrelevant flows (fully outside boundary) Boundary filtering ensures flows relevant selected analytical scope enter indicator dataset. 2. Parent/Child Flow Deduplication FTS allows funding flows “chained” represent cascading funding (donor -> agency -> partner). Parent flows typically high-level envelopes; child flows represent operational allocations. need : * Identifies parents presence one childFlowIds. * Removes parent flows dataset. prevents double-counting parent envelopes together child breakdowns ensures operational flows used indicator calculations. 3. Removal “Parked” Flows Flows flowType == \"Parked\" represent undecided envelopes awaiting breakdown child flows (e.g., large ECHO decisions multi-year envelopes). used : * donor funding totals * donor–recipient relationships * sector geographic alignment indicators need remove entirely, relying instead child flows available. 4. Budget Year Normalization budgetYear column converted safely numeric support time-series indicators : * funding trends * relationship duration * consistency indices Non-numeric malformed values converted NA warnings suppressed.","code":"nrow(flows) #> [1] 22441 cleaned <- filter_flows_for_indicators(flows) nrow(cleaned) #> [1] 11496"},{"path":"/articles/1-data-tidying.html","id":"slugify","dir":"Articles","previous_headings":"","what":"slugify","title":"1-Data Tidying","text":"","code":"strings <- c(\"Café au Lait\", \"Niño Español\", \"Data_Science_Project\", \"--test--string--\") slugify(strings) #> [1] \"cafe-au-lait\"         \"nino-espanol\"         \"data-science-project\" #> [4] \"test-string\""},{"path":[]},{"path":"/articles/2-indicators.html","id":"indicator_donor_funding_consistency","dir":"Articles","previous_headings":"Donor","what":"indicator_donor_funding_consistency","title":"2-Indicators","text":"","code":"donors <- indicator_donor_funding_consistency(flows) table(donors$Funding_Consistency_Index) #>  #>   1  #> 247 # library(ggplot2) # ggplot(donors, aes(x = Funding_Consistency_Index)) + #   geom_histogram(fill = \"steelblue\", color = \"white\") + #   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) + #   labs( #     title = \"Distribution of Donor Funding Consistency Index\", #     x = \"\", #     y = \"Number of Donors\", #     caption = paste( #     \"Indicator interpretation:\", #     \"Measures the proportion of years a donor provided funding relative to total  #     years analyzed. Scores range 0-1 where 1 = consistent annual funding.\", #     \"\\n\\n\", #      #     \"How to read the visualization:\", #     \"X-axis shows consistency index values (0-1), Y-axis shows count of donors. #     Bars represent frequency of donors at each consistency level.\", \"\\n\\n\", #      #     \"Humanitarian relevance:\", #     \"Identifies reliable long-term partners vs sporadic funders, helping  #     prioritize relationship building with consistent donors.\", \"\\n\\n\", #      #     \"Source: Financial Tracking Service (FTS) API.\" #   ) #   )"},{"path":"/articles/2-indicators.html","id":"indicator_donor_relationship_duration","dir":"Articles","previous_headings":"Donor","what":"indicator_donor_relationship_duration","title":"2-Indicators","text":"","code":"donors <- indicator_donor_relationship_duration(flows) #table(donor$Relationship_Duration_Index) library(ggplot2) ggplot(donors, aes(x = Relationship_Duration_Index)) +   geom_histogram(binwidth = 0.05, fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Relationship Duration Index\",     x = \"\",     y = \"Number of Donors\",     caption = paste(     \"Indicator interpretation:\",     \"Measures duration of donor's funding relationship relative to maximum      possible duration. 1 = active since earliest data, 0 = new entrant.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows distribution of duration scores. Left-skewed distribution      indicates many new donors, right-skewed indicates established      relationships.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Long-term donors often have deeper contextual understanding and more      predictable funding patterns for strategic planning.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   )"},{"path":"/articles/2-indicators.html","id":"indicator_donor_funding_growth","dir":"Articles","previous_headings":"Donor","what":"indicator_donor_funding_growth","title":"2-Indicators","text":"","code":"donors <- indicator_donor_funding_growth(flows) #table(donors$Funding_Growth_Trend) library(ggplot2) ggplot(donors, aes(x = Funding_Growth_Trend)) +   geom_histogram( fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Funding Growth Trend\",     x = \"\",     y = \"Number of Donors\",     caption = paste(     \"Indicator interpretation:\",     \"Linear regression slope of annual funding amounts over time. Positive      values = increasing funding, negative = decreasing funding.\", \"\\n\\n\",          \"How to read the visualization:\",     \"X-axis shows growth rate (USD per year), Y-axis shows donor count. Center      around zero indicates stable funding, right tail indicates growing donors.\",     \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies expanding vs contracting funding sources, helping target      advocacy and partnership efforts with growing donors.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 154 rows containing non-finite outside the scale range #> (`stat_bin()`)."},{"path":"/articles/2-indicators.html","id":"indicator_donor_timing_consistency","dir":"Articles","previous_headings":"Donor","what":"indicator_donor_timing_consistency","title":"2-Indicators","text":"","code":"donors <- indicator_donor_timing_consistency(flows) #table(donors$Timing_Consistency) library(ggplot2) ggplot(donors, aes(x = Timing_Consistency)) +   geom_histogram(binwidth = 0.05, fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Timing Consistency\",     x = \"\",     y = \"Number of Donors\",     caption = paste(     \"Indicator interpretation:\",     \"Measures regularity of funding distribution across month     (1 = evenly spread, 0 = highly seasonal/erratic). Based on monthly      funding share dispersion.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows consistency scores. Higher values indicate predictable     monthly funding patterns, lower values indicate lumpy or seasonal     disbursements.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Predictable timing enables better cash flow management and program     continuity, reducing operational disruptions in emergency responses.\",     \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> Warning: Removed 106 rows containing non-finite outside the scale range #> (`stat_bin()`)."},{"path":"/articles/2-indicators.html","id":"indicator_donor_systemic_concentration","dir":"Articles","previous_headings":"Donor","what":"indicator_donor_systemic_concentration","title":"2-Indicators","text":"","code":"donors <- indicator_donor_systemic_concentration(flows)  #table(donors$Donor_Concentration_Index)  library(ggplot2) ggplot(donors, aes(x = Donor_Concentration_Index)) +   geom_histogram(binwidth = 0.05, fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Concentration Index\",     x = \"\",     y = \"Number of Donors\",     caption = paste(     \"Indicator interpretation:\",     \"Herfindahl-Hirschman Index measuring portfolio concentration across      recipients (0 = highly diversified, 1 = focused on few recipients).\",     \"\\n\\n\",          \"How to read the visualization:\",     \"X-axis shows concentration level. Left side indicates donors spreading     funds widely, right side indicates focused funding on few partners.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Helps identify donors with broad partner networks vs specialized      relationships, informing partnership and resource mobilization strategies.\",     \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   )"},{"path":"/articles/2-indicators.html","id":"indicator_donor_knowledge_sharing_intensity","dir":"Articles","previous_headings":"Donor","what":"indicator_donor_knowledge_sharing_intensity","title":"2-Indicators","text":"","code":"donors <- indicator_donor_knowledge_sharing_intensity(flows) #table(donors$Knowledge_Sharing_Intensity)  library(ggplot2) # Basic histogram of Knowledge Sharing Intensity ggplot(donors, aes(x = Knowledge_Sharing_Intensity)) +   geom_histogram(binwidth = 0.05, fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Knowledge Sharing Intensity\",     x = \"\",     y = \"Number of Donors\",     caption = paste(     \"Indicator interpretation:\",     \"Proportion of flows mentioning collaboration, learning, or assessment     activities in descriptions (0 = no mention, 1 = all flows include      knowledge components).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows distribution of knowledge sharing emphasis. Higher values      indicate donors prioritizing learning and coordination in funding.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies donors supporting system-wide learning and coordination,      crucial for improving response effectiveness and accountability.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   )"},{"path":"/articles/2-indicators.html","id":"indicator_donor_sector_alignment","dir":"Articles","previous_headings":"Donor","what":"indicator_donor_sector_alignment","title":"2-Indicators","text":"","code":"flows |>       tidyr::unnest(destinationObjects, names_repair = \"unique\", names_sep = \"_\") |>       dplyr::filter(destinationObjects_type == \"GlobalCluster\") |>       dplyr::pull(destinationObjects_name) |>       unlist() |>       unique() #>  [1] \"Nutrition\"                                  #>  [2] \"Health\"                                     #>  [3] \"Other\"                                      #>  [4] \"Emergency Shelter and NFI\"                  #>  [5] \"Water Sanitation Hygiene\"                   #>  [6] \"Food Security\"                              #>  [7] \"Logistics\"                                  #>  [8] \"Coordination and support services\"          #>  [9] \"Protection - Gender-Based Violence\"         #> [10] \"Multi-sector\"                               #> [11] \"Protection\"                                 #> [12] \"Education\"                                  #> [13] \"Early Recovery\"                             #> [14] \"Protection - Child Protection\"              #> [15] \"Protection - Mine Action\"                   #> [16] \"Agriculture\"                                #> [17] \"Protection - Housing, Land and Property\"    #> [18] \"Camp Coordination / Management\"             #> [19] \"Protection - Human Trafficking & Smuggling\" #> [20] \"Multipurpose Cash\"                          #> [21] \"Emergency Telecommunications\"  # pragmatic default weights - illustrative defaults emphasizing life-saving sectors  # (Nutrition, Health, WASH, Food Security) and cash/multi-sector where relevant. library(tibble)  sectors <- c(  \"Nutrition\",   \"Health\",   \"Emergency Shelter and NFI\",   \"Water Sanitation Hygiene\",  \"Food Security\",  \"Logistics\",   \"Protection - Gender-Based Violence\",   \"Protection - Child Protection\",  \"Protection\",  \"Multipurpose Cash\",   \"Education\",  \"Multi-sector\",  \"Protection - Housing, Land and Property\",  \"Protection - Human Trafficking & Smuggling\",   \"Coordination and support services\",  \"Camp Coordination / Management\",  \"Emergency Telecommunications\",   \"Agriculture\",  \"Early Recovery\",  \"Protection - Mine Action\",   \"Other\" )  # Adjusted scores based on funding collapse and operational risk  adjusted_scores <- c(   10,  # Nutrition: Life-saving and first-line response; malnutrition spikes in   #crises. Funding collapse means ration cuts, so priority remains highest.   9,   # Health: Essential for survival; clinics reverting to 1990s models    #(minimal staff, basic meds). High priority to prevent mortality.   8,   # Emergency Shelter and NFI: Critical for displaced populations;   #exposure risk rises with underfunding. Still high but slightly below health/nutrition.   8,   # Water Sanitation Hygiene (WASH): Prevents disease outbreaks;    #cholera risk escalates when systems fail. Needs strong prioritization.   7,   # Food Security: Linked to nutrition but broader (agriculture, livelihoods).   #Funding gaps mean rationing; still vital but slightly less than direct nutrition.   6,   # Logistics: Backbone for all sectors; underfunding reduces supply chain    #resilience. Important but not life-saving on its own.   7,   # Protection - Gender-Based Violence: GBV spikes in fragile contexts;    #services often first to be cut. Needs strong prioritization for dignity and safety.   6,   # Protection - Child Protection: Critical for safeguarding vulnerable   #children; funding collapse risks exploitation. Medium-high priority.   5,   # Protection (general): Important for rights and safety but less    #immediately life-saving than GBV or child protection.   9,   # Multipurpose Cash: Severely underfunded (only ~20% coverage);   #key for dignity and flexibility. High priority to maintain household resilience.   8,   # Education: Collapsing (21% funded); long-term impact on recovery    #and protection. Elevated priority despite being non-life-saving.   6,   # Multi-sector: Coordination across sectors matters, but direct impact    # is less urgent than core life-saving interventions.   4,   # Protection - Housing, Land and Property: Important for durable   #solutions, but less urgent during acute collapse.   4,   # Protection - Human Trafficking & Smuggling: Serious risk but narrower   #scope; medium-low priority compared to GBV/child protection.   3,   # Coordination and support services: Necessary for system functioning,   # but deprioritized when survival sectors collapse.   3,   # Camp Coordination / Management: Important for organized response,   #but less critical than food, health, WASH.   3,   # Emergency Telecommunications: Enables operations but not directly   #life-saving; deprioritized under severe funding constraints.   5,   # Agriculture: Supports food security and recovery; medium priority    #as immediate needs dominate.   8,   # Early Recovery: Only 17% funded; crucial for resilience and    #preventing protracted crises. Elevated priority despite systemic collapse.   2,   # Protection - Mine Action: Important for safety but less urgent    # than health/nutrition during acute funding collapse.   1    # Other: Catch-all category; lowest priority given resource scarcity. )    sector_capacity <- tibble::tibble(   sector = sectors,   raw_score = adjusted_scores) |>   dplyr::mutate(     capacity_weight = raw_score / sum(raw_score)  # normalize to sum to 1   ) |>   dplyr::select(sector, capacity_weight)  knitr::kable(sector_capacity |> dplyr::arrange(desc(capacity_weight))) donors <- indicator_donor_sector_alignment(flows, sector_capacity)  #table(donor$Sector_Alignment )  library(ggplot2) ggplot(donors, aes(x =Sector_Alignment )) +   geom_histogram(binwidth = 0.05, fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Sector Alignment\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"Weighted alignment between donor funding distribution and internal sector     capacity priorities (0 = misaligned, 1 = perfectly aligned with      capacity weights).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows alignment scores. Higher values indicate donors funding      sectors matching organizational capacities and strategic priorities.\",     \"\\n\\n\",          \"Humanitarian relevance:\",     \"Helps identify donors whose funding priorities match operational strengths,     enabling more effective resource allocation and partnership building.\",     \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   )"},{"path":"/articles/2-indicators.html","id":"indicator_donor_geographic_alignment","dir":"Articles","previous_headings":"Donor","what":"indicator_donor_geographic_alignment","title":"2-Indicators","text":"","code":"destinations <- flows |>       tidyr::unnest(destinationObjects, names_repair = \"unique\", names_sep = \"_\") |>       dplyr::filter(destinationObjects_type == \"Location\") |>       dplyr::pull(destinationObjects_name) |>       unlist() |>       unique() #dput(destinations)  # High-visibility, acute crises get funded high_visibility <- c(   \"Ukraine\", \"Syrian Arab Republic\", \"Occupied Palestinian Territory\",   \"Sudan\", \"South Sudan\", \"Yemen\", \"Afghanistan\", \"Myanmar\",   \"Ethiopia\", \"Somalia\", \"Democratic Republic of the Congo\",   \"Central African Republic\", \"Haiti\" )  # Long-standing crises with major donor attention maintain coverage long_standing <- c(   \"Lebanon\", \"Jordan\", \"Iraq\", \"Türkiye\", \"Bangladesh\", \"Chad\",   \"Cameroon\", \"Niger\", \"Burkina Faso\", \"Mali\", \"Nigeria\",   \"Colombia\", \"Venezuela, Bolivarian Republic of\" )  # Regional refugee responses collapse regional_refugee <- c(   \"Region - Southern and Eastern Africa\", \"Region - Middle East and Northern Africa\",   \"Region - West and Central Africa\", \"Region - Latin America and the Caribbean\",   \"Region - Asia and the Pacific\", \"Uganda\", \"Kenya\", \"Tanzania, United Republic of\",   \"Djibouti\", \"Mauritania\", \"Cameroon\", \"Moldova, Republic of\" )  # Lower-profile crises get abandoned lower_profile <- c(   \"Burundi\", \"Rwanda\", \"Eritrea\", \"Nepal\", \"Georgia\", \"Cuba\",   \"Dominican Republic\", \"Madagascar\", \"Mozambique\", \"Angola\", \"Malawi\",   \"Comoros\", \"Liberia\", \"Côte d'Ivoire\", \"Senegal\", \"Ghana\", \"Guinea\",   \"Guinea-Bissau\", \"Lesotho\", \"Eswatini\", \"Zambia\", \"Cambodia\",   \"Lao People's Democratic Republic\", \"Philippines\", \"Timor-Leste\",   \"Sri Lanka\", \"Togo\", \"Benin\", \"Gambia\", \"Nicaragua\", \"Honduras\",   \"El Salvador\", \"Guatemala\", \"Costa Rica\", \"Peru\", \"Ecuador\", \"Panama\",   \"Bolivia, Plurinational State of\", \"Papua New Guinea\", \"Solomon Islands\",   \"Kiribati\", \"Vanuatu\", \"Micronesia, Federated States of\", \"Tonga\",   \"Fiji\", \"Cook Islands\", \"Tuvalu\", \"Samoa\", \"Nauru\", \"Niue\", \"Palau\",   \"Maldives\", \"Armenia\", \"Uzbekistan\", \"Kazakhstan\", \"Turkmenistan\",   \"Azerbaijan\", \"Tajikistan\", \"Kyrgyzstan\", \"Mongolia\", \"Mauritius\",   \"Cape Verde\", \"Equatorial Guinea\", \"Gabon\", \"Botswana\", \"Namibia\",   \"Seychelles\", \"Trinidad and Tobago\", \"Grenada\", \"Saint Lucia\",   \"Saint Vincent and the Grenadines\", \"Barbados\", \"Guyana\", \"Suriname\",   \"Belize\", \"Anguilla (United Kingdom)\", \"Aruba (Netherlands)\",   \"Curaçao (Netherlands)\" )   donor <- indicator_donor_geographic_alignment(flows,                         priority_destinations = high_visibility) #table(donor$Geographic_Alignment)  library(ggplot2) ggplot(donor, aes(x = Geographic_Alignment)) +   geom_histogram( fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Geographic Alignment to High Visibility Location\",     x = \"\",     y = \"Number of Destination\",    caption = paste(     \"Indicator interpretation:\",     \"Jaccard similarity between donor-funded locations and priority      locations (0 = no overlap, 1 = identical geographic focus).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows alignment with specified priority locations. Higher      values indicate donors active in organizational priority countries.\",     \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies natural partners for priority crises and reveals funding gaps      in key locations needing advocacy attention.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/articles/2-indicators.html","id":"indicator_cross_donor_systemic_destination_alignment","dir":"Articles","previous_headings":"Donor","what":"indicator_cross_donor_systemic_destination_alignment","title":"2-Indicators","text":"","code":"# Compute alignment alignment <- indicator_cross_donor_systemic_destination_alignment(flows)  # Viz library(ggplot2) library(dplyr) #>  #> Attaching package: 'dplyr' #> The following objects are masked from 'package:stats': #>  #>     filter, lag #> The following objects are masked from 'package:base': #>  #>     intersect, setdiff, setequal, union   # Compute total funding per donor top_donors <- flows |>   tidyr::unnest(sourceObjects, names_sep = \"_\") |>   dplyr::filter(sourceObjects_type == \"Organization\") |>   dplyr::rename(donor = sourceObjects_name) |>   dplyr::group_by(donor) |>   dplyr::summarise(total_funding = sum(amountUSD, na.rm = TRUE),                    .groups = \"drop\") |>   dplyr::arrange(desc(total_funding)) |>   dplyr::slice_head(n = 15) |>   dplyr::pull(donor)  # Filter alignment to top donors alignment_top <- alignment |>   dplyr::filter(donor1 %in% top_donors, donor2 %in% top_donors) |>     dplyr::mutate(       donor1 = stringr::str_wrap(donor1, width = 40),       donor2 = stringr::str_wrap(donor2, width = 40)     )  # Prepare data for ggplot plot_df <- alignment_top |>   dplyr::mutate(     donor1 = factor(donor1),     donor2 = factor(donor2)   )  # Heatmap ggplot(plot_df, aes(x = donor2, y = donor1, fill = Destination_Alignment)) +   geom_tile(color = \"white\") +   scale_fill_viridis_c(option = \"plasma\", na.value = \"grey80\", limits = c(0, 1)) +   unhcrthemes::theme_unhcr(grid = FALSE, axis =  FALSE, axis_title = FALSE, legend=TRUE) +   theme(axis.text.x = element_text(angle = 45, hjust = 1)) +   labs(     title = \"Top 15 Donors to Destination Alignment\",     x = \"Donor 2\",     y = \"Donor 1\",     fill = \"Jaccard\\nSimilarity\",     caption = paste(     \"Indicator interpretation:\",     \"Jaccard similarity measuring overlap in funded locations/clusters      between donor pairs (0 = no overlap, 1 = identical destination portfolios).\",     \"\\n\\n\",          \"How to read the visualization:\",     \"Heatmap shows pairwise alignment. Dark colors indicate high      geographic/thematic overlap, light colors indicate complementary coverage.\",     \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies donor clusters with similar focus areas, helping coordinate      advocacy and avoid duplication in under-funded crises.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   )"},{"path":[]},{"path":"/articles/2-indicators.html","id":"indicator_donor_recipient_relationship_duration","dir":"Articles","previous_headings":"Donor to Recipient","what":"indicator_donor_recipient_relationship_duration","title":"2-Indicators","text":"","code":"donor_recipient <- indicator_donor_recipient_relationship_duration(flows) #table(donor_recipient$Relationship_Duration_Index)  library(ggplot2) ggplot(donor_recipient, aes(x = Relationship_Duration_Index)) +   geom_histogram( fill = \"green\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Recipient Relationship Duration Index\",     x = \"\",     y = \"Number of Donor-Recipient Pairs\",     caption = paste(     \"Indicator interpretation:\",     \"Normalized duration of active funding relationships between donor-recipient     pairs (0=new relationship, 1=active since earliest data).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows relationship longevity across partnerships. Right-skewed      distribution indicates many new relationships, left-skewed indicates      established partnerships.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Long-term partnerships build trust, contextual understanding, and     operational efficiency, leading to more effective crisis response.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 1480 rows containing non-finite outside the scale range #> (`stat_bin()`)."},{"path":"/articles/2-indicators.html","id":"indicator_donor_recipient_funding_growth","dir":"Articles","previous_headings":"Donor to Recipient","what":"indicator_donor_recipient_funding_growth","title":"2-Indicators","text":"","code":"donor_recipient <- indicator_donor_recipient_funding_growth(flows) #table(donor_recipient$Funding_Growth_Trend)  library(ggplot2) ggplot(donor_recipient, aes(x = Funding_Growth_Trend)) +   geom_histogram( fill = \"green\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Recipient Funding Growth Trend\",     x = \"\",     y = \"Number of Donor-Recipient Pairs\",     caption = paste(     \"Indicator interpretation:\",     \"Linear regression slope of annual funding amounts between donor-recipient      pairs. Positive values=increasing funding, negative=decreasing funding.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows growth patterns across partnerships. Center around zero      indicates stable funding, right tail indicates expanding partnerships.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies growing vs contracting funding relationships, helping prioritize     partnership development and identify successful collaboration models.\",      \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 1480 rows containing non-finite outside the scale range #> (`stat_bin()`)."},{"path":"/articles/2-indicators.html","id":"indicator_donor_recipient_stability","dir":"Articles","previous_headings":"Donor to Recipient","what":"indicator_donor_recipient_stability","title":"2-Indicators","text":"","code":"donor_recipient <- indicator_donor_recipient_stability(flows) #table(donor_recipient$DonorRecipient_Stability_Index)  library(ggplot2) ggplot(donor_recipient, aes(x = DonorRecipient_Stability_Index)) +   geom_histogram( fill = \"green\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Recipient Stability Index\",     x = \"\",     y = \"Number of Donor-Recipient Pairs\",     caption = paste(     \"Indicator interpretation:\",     \"Proportion of years with active funding between donor-recipient pairs      (0=sporadic funding, 1=consistent annual funding throughout relationship).\",     \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows funding consistency patterns. Higher values indicate      reliable annual partnerships, lower values indicate intermittent engagement.\",     \"\\n\\n\",          \"Humanitarian relevance:\",     \"Consistent funding enables long-term programming, staff retention, and      institutional strengthening rather than project-based short-term engagements.\",      \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/articles/2-indicators.html","id":"indicator_donor_recipient_concentration","dir":"Articles","previous_headings":"Donor to Recipient","what":"indicator_donor_recipient_concentration","title":"2-Indicators","text":"","code":"donor_recipient <- indicator_donor_recipient_concentration(flows) #table(donor_recipient$DonorRecipient_Stability_Index)  library(ggplot2) ggplot(donor_recipient, aes(x = DonorRecipient_Concentration_Index)) +   geom_histogram( fill = \"green\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Recipient Concentration Index\",     x = \"\",     y = \"Number of Donor-Recipient Pairs\",     caption = paste(     \"Indicator interpretation:\",     \"Share of recipient's total funding coming from specific donor (0-1).      Higher values indicate recipient dependency on that donor.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows dependency levels across partnerships. Values near 1      indicate critical donor dependencies requiring diversification strategies.\",     \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies vulnerable partnerships where recipient organizations risk      severe disruption if key donors change funding priorities.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 1 row containing non-finite outside the scale range #> (`stat_bin()`)."},{"path":"/articles/2-indicators.html","id":"indicator_donor_recipient_trend","dir":"Articles","previous_headings":"Donor to Recipient","what":"indicator_donor_recipient_trend","title":"2-Indicators","text":"","code":"donor_recipient <- indicator_donor_recipient_trend(flows) #table(donor_recipient$DonorRecipient_Trend_Index)  library(ggplot2) ggplot(donor_recipient, aes(x = DonorRecipient_Trend_Index)) +   geom_histogram( fill = \"green\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Recipient Trend Index\",     x = \"\",     y = \"Number of Donor-Recipient Pairs\",     caption = paste(     \"Indicator interpretation:\",     \"Linear trend of funding amounts between donor-recipient pairs over time.      Positive=increasing investment, negative=phasing out partnership.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows partnership evolution patterns. Right of zero indicates      growing collaborations, left indicates declining engagements.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Reveals evolving partnership strategies - scaling successful collaborations     vs exiting less effective ones - informing relationship management.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 1480 rows containing non-finite outside the scale range #> (`stat_bin()`)."},{"path":"/articles/2-indicators.html","id":"indicator_donor_recipient_reciprocity","dir":"Articles","previous_headings":"Donor to Recipient","what":"indicator_donor_recipient_reciprocity","title":"2-Indicators","text":"","code":"donor_recipient <- indicator_donor_recipient_reciprocity(flows) #table(donor_recipient$DonorRecipient_Reciprocity_Ratio)  library(ggplot2) ggplot(donor_recipient, aes(x = DonorRecipient_Reciprocity_Ratio)) +   geom_histogram( fill = \"green\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Recipient Reciprocity Ratio\",     x = \"\",     y = \"Number of Donor-Recipient Pairs\",     caption = paste(     \"Indicator interpretation:\",     \"Binary indicator of mutual funding relationships where both organizations      act as donor and recipient to each other (0=one-way, 1=reciprocal).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Two bars showing proportion of one-way vs reciprocal partnerships.      Higher reciprocal values indicate collaborative funding ecosystems.\",     \"\\n\\n\",          \"Humanitarian relevance:\",     \"Reciprocal funding indicates consortia, pooled funds, or collaborative      programming arrangements that enhance coordination and local ownership.\",     \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":[]},{"path":"/articles/2-indicators.html","id":"indicator_donor_destination_coverage","dir":"Articles","previous_headings":"Donor to Destination","what":"indicator_donor_destination_coverage","title":"2-Indicators","text":"","code":"donor <- indicator_donor_destination_coverage(flows) #table(donor$DonorDestination_Concentration_Index)  library(ggplot2) ggplot(donor, aes(x = DonorDestination_Coverage_Index)) +   geom_histogram( fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Destination Coverage Index\",     x = \"\",     y = \"Number of Donors\",     caption = paste(     \"Indicator interpretation:\",     \"Proportion of total destinations supported by donor (0 = few locations,     1 = active in all locations in dataset).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows coverage breadth. Higher values indicate donors with global     reach, lower values indicate regionally focused donors.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies global players vs regional specialists, informing crisis-specific     partnership strategies and gap analysis.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/articles/2-indicators.html","id":"indicator_donor_destination_trend","dir":"Articles","previous_headings":"Donor to Destination","what":"indicator_donor_destination_trend","title":"2-Indicators","text":"","code":"donor <- indicator_donor_destination_trend(flows) #table(donor$DonorDestination_Focus_Trend)  library(ggplot2) ggplot(donor, aes(x = DonorDestination_Focus_Trend)) +   geom_histogram( fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Destination Focus Trend\",     x = \"\",     y = \"Number of Donors\",     caption = paste(     \"Indicator interpretation:\",     \"Linear trend of geographic concentration over time (negative = diversifying,     positive = focusing, zero = stable portfolio strategy).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows trend direction. Left of zero indicates donors broadening      geographic scope, right indicates narrowing focus.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Reveals evolving donor strategies - expansion into new crises vs      consolidation in core locations - for anticipating partnership      opportunities.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 146 rows containing non-finite outside the scale range #> (`stat_bin()`)."},{"path":"/articles/2-indicators.html","id":"indicator_donor_destination_concentration","dir":"Articles","previous_headings":"Donor to Destination","what":"indicator_donor_destination_concentration","title":"2-Indicators","text":"","code":"donor <- indicator_donor_destination_concentration(flows) #table(donor$DonorDestination_Concentration_Index)  library(ggplot2) ggplot(donor, aes(x = DonorDestination_Concentration_Index)) +   geom_histogram( fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Destination Concentration Index\",     x = \"\",     y = \"Number of Donors\",     caption = paste(     \"Indicator interpretation:\",     \"Herfindahl-Hirschman Index measuring geographic portfolio concentration      (0 = highly diversified, 1 = focused on few locations/plans).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows concentration levels. Left indicates global spread, right      indicates focused geographic operations in few crises.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Helps understand donor geographic strategies - specialized crisis      responders vs broad global supporters - for targeted engagement.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/articles/2-indicators.html","id":"indicator_donor_destination_earmarking_flexibility","dir":"Articles","previous_headings":"Donor to Destination","what":"indicator_donor_destination_earmarking_flexibility","title":"2-Indicators","text":"","code":"donor_destination <- indicator_donor_destination_earmarking_flexibility(flows) #table(donor_destination$Earmarking_Flexibility) donor_destination <- indicator_donor_destination_earmarking_flexibility(flows)  # ---- Select top donors & top destinations by total USD ---- top_donors <- donor_destination |>   dplyr::group_by(donor) |>   dplyr::summarise(total = sum(total_amount, na.rm = TRUE)) |>   dplyr::arrange(desc(total)) |>   dplyr::slice_head(n = 15)  top_destinations <- donor_destination |>   dplyr::group_by(destination) |>   dplyr::summarise(total = sum(total_amount, na.rm = TRUE)) |>   dplyr::arrange(desc(total)) |>   dplyr::slice_head(n = 15)  donor_destination_top15 <- donor_destination |>   dplyr::filter(     donor %in% top_donors$donor,     destination %in% top_destinations$destination   )  # (Optional) reorder factors for readability donor_destination_top15 <- donor_destination_top15 |>   dplyr::mutate(     donor = factor(donor, levels = sort(unique(donor))),     destination = factor(destination, levels = sort(unique(destination)))   )  # ---- ggplot2 heatmap ---- ggplot2::ggplot(   donor_destination_top15,   ggplot2::aes(     x = destination,     y = donor,     fill = Earmarking_Flexibility   ) ) +   ggplot2::geom_tile(color = \"white\") +    # Color-blind friendly scale   viridis::scale_fill_viridis(     name = \"Flexibility\",     option = \"viridis\",      # color-blind friendly     direction = 1,     limits = c(0.25, 1.0),     na.value = \"grey80\"   ) +   ggplot2::labs(     title = \"Donor–Destination Earmarking Flexibility     (Top 15 Donors & Destinations)\",     subtitle = \"Weighted average flexibility score      (1.0 = unearmarked → 0.25 = tightly earmarked)\",     x = \"Destination Country\",     y = \"Donor\",     caption = paste(     \"Indicator interpretation:\",     \"Weighted average earmarking flexibility for donor-destination pairs      (1=unearmarked, 0.75=softly earmarked, 0.5=earmarked, 0.25=tightly earmarked).\",     \"\\n\\n\",          \"How to read the visualization:\",     \"Heatmap shows flexibility patterns. Darker colors indicate more flexible      funding arrangements between specific donor-destination combinations.\",      \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies which donors provide flexible funding to specific crises,     enabling context-responsive programming and local decision-making.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   ggplot2::theme(     axis.text.x = ggplot2::element_text(angle = 45, hjust = 1),     legend.position = \"right\",     panel.grid = ggplot2::element_blank()   )"},{"path":"/articles/2-indicators.html","id":"indicator_donor_destination_risk_tolerance","dir":"Articles","previous_headings":"Donor to Destination","what":"indicator_donor_destination_risk_tolerance","title":"2-Indicators","text":"","code":"donor_risk <- indicator_donor_destination_risk_tolerance(   flows,   high_risk_locations = c(\"Sudan\", \"South Sudan\", \"Somalia\", \"Afghanistan\"),   new_partners        = c(\"Local NGO A\", \"Community Org B\") )  # Identify top 15 donors by total contributions top15 <- donor_risk |>   dplyr::arrange(desc(total)) |>   dplyr::slice_head(n = 15)  donor_risk_top15 <- donor_risk |>   dplyr::filter(donor %in% top15$donor) |>   dplyr::mutate(     donor = factor(donor, levels = top15$donor)   )  # ---- ggplot2 visualisation (viridis) ---- ggplot2::ggplot(   donor_risk_top15,   ggplot2::aes(     x = donor,     y = Risk_Tolerance,     fill = Risk_Tolerance   ) ) +   ggplot2::geom_col() +   viridis::scale_fill_viridis(     name = \"Risk Tolerance\",     option = \"viridis\",     direction = 1,     limits = c(0, 1),     na.value = \"grey80\"   ) +   ggplot2::coord_flip() +   ggplot2::labs(     title = \"Donor Risk Tolerance (Top 15 Donors)\",     subtitle = \"Share of funding directed to high-risk locations or new partners\",     x = \"Donor\",     y = \"Risk Tolerance (0–1)\",     caption = paste(     \"Indicator interpretation:\",     \"Share of donor funding going to high-risk locations or new/untested partners.     Higher values indicate greater risk tolerance in funding decisions.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Bar chart shows risk tolerance levels across top donors. Higher bars      indicate donors more willing to fund in complex environments or with new      partners.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies donors supporting frontline response in most challenging      contexts and investing in local capacity building through new partnerships.\",     \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   ggplot2::theme(     panel.grid.minor = ggplot2::element_blank(),     legend.position = \"right\"   )"},{"path":"/articles/2-indicators.html","id":"indicator_donor_destination_stability","dir":"Articles","previous_headings":"Donor to Destination","what":"indicator_donor_destination_stability","title":"2-Indicators","text":"","code":"# Compute indicator donor_destination<- indicator_donor_destination_stability(flows)  # Identify top 15 destinations by number of active donors or total flows top_destinations <- donor_destination |>   dplyr::group_by(destination) |>   dplyr::summarise(total_stability = sum(DonorDestination_Stability_Index,                                          na.rm = TRUE)) |>   dplyr::arrange(desc(total_stability)) |>   dplyr::slice_head(n = 15)  stability_top <- donor_destination |>   dplyr::filter(destination %in% top_destinations$destination) |>   dplyr::mutate(     destination = factor(destination, levels = top_destinations$destination),     donor = factor(donor)   )  # ---- ggplot2 visualisation ---- ggplot2::ggplot(   stability_top,   ggplot2::aes(     x = destination,     y = donor,     fill = DonorDestination_Stability_Index   ) ) +   ggplot2::geom_tile(color = \"white\") +      viridis::scale_fill_viridis(     name = \"Stability (0–1)\",     option = \"viridis\",     limits = c(0, 1),     na.value = \"grey80\"   ) +      ggplot2::labs(     title = \"Donor → Destination Geographic Stability Index\",     subtitle = \"Share of years each donor funded a destination     (0 = occasional; 1 = consistent every year)\",     x = \"Destination\",     y = \"Donor\",     caption = paste(     \"Indicator interpretation:\",     \"Proportion of years with active funding between donor-destination pairs     (0=sporadic engagement, 1=consistent annual funding throughout period).\",      \"\\n\\n\",          \"How to read the visualization:\",     \"Heatmap shows funding consistency patterns. Darker colors indicate stable      long-term donor engagement in specific crisis contexts.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies donors providing predictable funding to specific crises,      enabling long-term programming and sustainable response capacity building.\",      \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) +      unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   ggplot2::theme(     axis.text.x = ggplot2::element_text(angle = 45, hjust = 1),     panel.grid = ggplot2::element_blank(),     legend.position = \"right\"   )"},{"path":[]},{"path":"/articles/2-indicators.html","id":"indicator_recipient_funding_share","dir":"Articles","previous_headings":"Recipient","what":"indicator_recipient_funding_share","title":"2-Indicators","text":"","code":"recipients <- indicator_recipient_funding_share(flows) #table(recipients$Funding_Volume_Share)  library(ggplot2) # Basic histogram of Knowledge Sharing Intensity ggplot(recipients, aes(x = Funding_Volume_Share)) +   geom_histogram( fill = \"lightgreen\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Recipients Funding Volume Share\",     x = \"\",     y = \"Number of Recipients\",     caption = paste(     \"Indicator interpretation:\",     \"Measures the proportion of total humanitarian funding received by each      recipient organization. Higher values indicate larger market share.\",      \"\\n\\n\",          \"How to read the visualization:\",     \"X-axis shows funding share (0-1), Y-axis shows recipient count. Most      recipients will have small shares, few will dominate (right tail).\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies major implementing partners and market concentration, helping      understand dependency risks and partnership opportunities.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/articles/2-indicators.html","id":"indicator_recipient_amount_stability","dir":"Articles","previous_headings":"Recipient","what":"indicator_recipient_amount_stability","title":"2-Indicators","text":"","code":"recipients <- indicator_recipient_amount_stability(flows) #table(recipients$Amount_Stability)  library(ggplot2) ggplot(recipients, aes(x = Amount_Stability)) +   geom_histogram( fill = \"lightgreen\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Recipients Amount Stability\",     x = \"\",     y = \"Number of Recipients\",     caption = paste(     \"Indicator interpretation:\",     \"Measures year-to-year funding stability as 1 minus coefficient of variation.     1 = perfectly stable annual funding, lower values = volatile funding      patterns.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows stability scores. Higher values indicate predictable funding     streams, negative values indicate high volatility (SD > mean).\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Stable funding enables long-term programming and institutional strengthening,     while volatility disrupts operations and staff retention.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 455 rows containing non-finite outside the scale range #> (`stat_bin()`)."},{"path":"/articles/2-indicators.html","id":"indicator_recipient_cofunding_rate","dir":"Articles","previous_headings":"Recipient","what":"indicator_recipient_cofunding_rate","title":"2-Indicators","text":"","code":"recipients <- indicator_recipient_cofunding_rate(flows) #table(recipients$Co_Funding_Rate)  library(ggplot2) ggplot(recipients, aes(x = Co_Funding_Rate)) +   geom_histogram( fill = \"lightgreen\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Recipients CoFunding Rate\",     x = \"\",     y = \"Number of Recipients\",     caption = paste(     \"Indicator interpretation:\",     \"Percentage of funding flows where recipient shares funding with other      organizations (not sole recipient). 0 = always sole recipient,      1 = always co-funded.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows co-funding frequency. Higher values indicate collaborative     funding arrangements, lower values indicate standalone projects.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies organizations experienced in consortium work and coordination,     crucial for complex multi-partner responses and integrated programming.\",      \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/articles/2-indicators.html","id":"indicator_recipient_systemic_diversification","dir":"Articles","previous_headings":"Recipient","what":"indicator_recipient_systemic_diversification","title":"2-Indicators","text":"","code":"recipients <- indicator_recipient_systemic_diversification(flows) #table(recipients$Recipient_Diversification_Index)  library(ggplot2) ggplot(recipients, aes(x = Recipient_Diversification_Index)) +   geom_histogram( fill = \"lightgreen\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Recipient Diversification Index\",     x = \"\",     y = \"Number of Recipients\",     caption = paste(     \"Indicator interpretation:\",     \"Entropy-based measure of funding source diversification across donors.      0 = dependent on single donor,     1 = perfectly diversified across many donors.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows diversification levels. Higher values indicate resilient      funding bases, lower values indicate donor concentration risks.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Diversified funding reduces vulnerability to individual donor policy      changes and enhances organizational sustainability and independence.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 469 rows containing non-finite outside the scale range #> (`stat_bin()`)."},{"path":[]},{"path":"/articles/2-indicators.html","id":"indicator_destination_modality_innovation","dir":"Articles","previous_headings":"Destination","what":"indicator_destination_modality_innovation","title":"2-Indicators","text":"","code":"destination <- indicator_destination_modality_innovation(flows) #table(destination $Recipient_Diversification_Index)  library(ggplot2) ggplot(destination, aes(x = Modality_Innovation)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Modality Innovation\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"Percentage of funding using Cash Transfer Programming (CTP) per destination.     Higher values indicate greater adoption of innovative cash-based approaches.\",     \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows CTP adoption rates across destinations. Right-skewed      distribution indicates most destinations have low CTP usage, few are CTP      leaders.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Cash programming increases efficiency, dignity, and local market benefits.     Identifies destinations where cash coordination capacity may need      strengthening.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/articles/2-indicators.html","id":"indicator_destination_pipeline_visibility","dir":"Articles","previous_headings":"Destination","what":"indicator_destination_pipeline_visibility","title":"2-Indicators","text":"","code":"destination <- indicator_destination_pipeline_visibility(flows) #table(destination$Recipient_Diversification_Index)  library(ggplot2) ggplot(destination, aes(x = Pipeline_Visibility)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Pipeline Visibility\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"Proportion of funding flows extending beyond current year. Higher values     indicate better forward visibility and multi-year planning capacity.\",     \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows pipeline visibility across destinations. Most destinations     cluster near zero, indicating predominantly annual funding cycles.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Multi-year funding enables strategic programming, staff retention, and     sustainable crisis response rather than short-term emergency patches.\",     \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/articles/2-indicators.html","id":"indicator_destination_earmarking_flexibility","dir":"Articles","previous_headings":"Destination","what":"indicator_destination_earmarking_flexibility","title":"2-Indicators","text":"","code":"destination <- indicator_destination_earmarking_flexibility(flows) #table(destination$Earmarking_Flexibility)  library(ggplot2) ggplot(destination, aes(x = Earmarking_Flexibility)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Earmarking Flexibility\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"Weighted average of earmarking flexibility (1=unearmarked, 0.75=softly     earmarked, 0.5=earmarked, 0.25=tightly earmarked). Higher values indicate      more flexible funding.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows flexibility scores. Higher values indicate destinations      receiving more unearmarked funding for adaptive programming.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Flexible funding enables context-responsive programming, local leadership,      and efficient resource allocation based on evolving needs rather than      rigid donor requirements.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/articles/2-indicators.html","id":"indicator_destination_donor_diversity","dir":"Articles","previous_headings":"Destination","what":"indicator_destination_donor_diversity","title":"2-Indicators","text":"","code":"destination <- indicator_destination_donor_diversity(flows) #table(destination$Earmarking_Flexibility)  library(ggplot2) ggplot(destination, aes(x = Destination_Donor_Diversity_Index)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Donor Diversity Index\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"Inverse Herfindahl-Hirschman Index measuring donor diversification      (0=single donor dependency, 1=highly diversified funding base).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows diversification levels. Higher values indicate resilient     funding ecosystems, lower values indicate vulnerability to individual     donor decisions.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Diversified funding reduces crisis vulnerability to donor policy changes     and ensures more stable response capacity during political shifts.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/articles/2-indicators.html","id":"indicator_destination_funding_stability","dir":"Articles","previous_headings":"Destination","what":"indicator_destination_funding_stability","title":"2-Indicators","text":"","code":"destination <- indicator_destination_funding_stability(flows) #table(destination$Destination_Funding_Stability_Index)  library(ggplot2) ggplot(destination, aes(x = Destination_Funding_Stability_Index)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Funding Stability Index\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"1 minus coefficient of variation of annual funding amounts.      1=perfectly stable, lower values=volatile funding,      negative values=high volatility (SD > mean).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows stability patterns. Higher values enable predictable      programming, negative values indicate boom-bust cycles disrupting operations.\",     \"\\n\\n\",          \"Humanitarian relevance:\",     \"Funding stability enables long-term planning, staff retention, and      consistent service delivery rather than reactive emergency-only responses.\",     \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 45 rows containing non-finite outside the scale range #> (`stat_bin()`)."},{"path":"/articles/2-indicators.html","id":"indicator_destination_funding_trend","dir":"Articles","previous_headings":"Destination","what":"indicator_destination_funding_trend","title":"2-Indicators","text":"","code":"destination <- indicator_destination_funding_trend(flows) #table(destination$Destination_Funding_Growth_Trend)  library(ggplot2) ggplot(destination, aes(x = Destination_Funding_Growth_Trend)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Funding Growth Trend\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"Linear regression slope of annual funding over time.      Positive values=increasing funding, negative values=decreasing funding,     zero=stable funding.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows growth/decline patterns. Right of zero indicates expanding     crisis responses, left indicates potential donor fatigue or improving      contexts.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies crises receiving increasing attention vs. those facing funding     declines despite ongoing needs, informing advocacy priorities.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 45 rows containing non-finite outside the scale range #> (`stat_bin()`)."},{"path":"/articles/2-indicators.html","id":"indicator_destination_donor_retention","dir":"Articles","previous_headings":"Destination","what":"indicator_destination_donor_retention","title":"2-Indicators","text":"","code":"destination <- indicator_destination_donor_retention(flows) #table(destination$Destination_Donor_Retention_Index)  library(ggplot2) ggplot(destination, aes(x = Destination_Donor_Retention_Index)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Donor Retention Index\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"Proportion of donors who continue funding a destination year after year.      Higher values indicate loyal donor bases and sustained engagement.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows retention rates. Higher values indicate stable donor      relationships, lower values indicate high donor turnover and relationship     building needs.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Donor retention reduces transaction costs, builds contextual knowledge,      and enables more effective long-term partnerships in complex crises.\",     \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/articles/2-indicators.html","id":"indicator_destination_funding_diversity","dir":"Articles","previous_headings":"Destination","what":"indicator_destination_funding_diversity","title":"2-Indicators","text":"","code":"destination <- indicator_destination_funding_diversity(flows) #table(destination$Destination_Funding_Diversity)  library(ggplot2) ggplot(destination, aes(x = Destination_Funding_Diversity)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Funding Diversity\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"Shannon entropy-based measure of funding distribution across donors      (0=single donor dominance, 1=perfect diversity across many donors).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows diversity levels. Higher values indicate resilient funding     ecosystems, lower values indicate concentration risks and vulnerability.\",     \"\\n\\n\",          \"Humanitarian relevance:\",     \"Diverse funding bases protect against individual donor withdrawals and     enable more balanced response coordination across multiple priorities.\",      \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 31 rows containing non-finite outside the scale range #> (`stat_bin()`)."},{"path":"/articles/2-indicators.html","id":"indicator_destination_funding_volatility","dir":"Articles","previous_headings":"Destination","what":"indicator_destination_funding_volatility","title":"2-Indicators","text":"","code":"destination <-indicator_destination_funding_volatility(flows) #table(destination$Destination_Funding_Volatility)  library(ggplot2) ggplot(destination, aes(x = Destination_Funding_Volatility)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Funding Volatility\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"1 minus coefficient of variation of annual funding (0=highly volatile,     1=perfectly stable). Inverse measure of year-to-year funding     unpredictability.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows volatility patterns. Higher values enable predictable      programming, lower values indicate disruptive funding fluctuations.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Funding volatility disrupts staffing, procurement, and program continuity,      reducing operational efficiency and response effectiveness.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 44 rows containing non-finite outside the scale range #> (`stat_bin()`)."},{"path":"/articles/2-indicators.html","id":"indicator_destination_dependency","dir":"Articles","previous_headings":"Destination","what":"indicator_destination_dependency","title":"2-Indicators","text":"","code":"destination <-indicator_destination_dependency(flows) #table(destination$Destination_Dependency_Index)  library(ggplot2) ggplot(destination, aes(x = Destination_Dependency_Index)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Dependency Index\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"Share of total funding from largest single donor (0-1). Higher values      indicate heavy reliance on one donor, creating vulnerability.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows dependency levels. Values near 1 indicate high-risk      single-donor dependencies requiring diversification strategies.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Single-donor dependency creates systemic risk - if that donor changes      priorities, entire crisis responses can be jeopardized.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/articles/2-indicators.html","id":"indicator_destination_modality_balance","dir":"Articles","previous_headings":"Destination","what":"indicator_destination_modality_balance","title":"2-Indicators","text":"","code":"destination <- indicator_destination_modality_balance(flows) #table(destination$Destination_Modality_Balance)  library(ggplot2) ggplot(destination, aes(x = Destination_Modality_Balance)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Modality Balance\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"Share of cash-based programming (CTP) relative to all modalities (0-1).     Higher values indicate greater cash modality utilization.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows CTP adoption across destinations. Most destinations cluster     near zero, indicating traditional in-kind programming dominance.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Appropriate modality balance ensures efficient, dignified assistance while     maintaining essential in-kind support where markets are non-functional.\",     \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/articles/4-analysis.html","id":"analysis_wordcloud_from_flows","dir":"Articles","previous_headings":"","what":"analysis_wordcloud_from_flows","title":"4-Analysis","text":"","code":"analysis_wordcloud_from_flows(flows, facet_by_year = FALSE) # Returns a named list of word cloud objects yearly_clouds <- analysis_wordcloud_from_flows(flows, facet_by_year = TRUE) #> Warning in max(dataOut$freq): no non-missing arguments to max; returning -Inf #> Warning in max(dataOut$freq): no non-missing arguments to max; returning -Inf #> Warning in max(dataOut$freq): no non-missing arguments to max; returning -Inf #> Warning in max(dataOut$freq): no non-missing arguments to max; returning -Inf #> Warning in max(dataOut$freq): no non-missing arguments to max; returning -Inf  # To view the cloud for a specific year   yearly_clouds[[\"2015\"]] yearly_clouds[[\"2024\"]] yearly_clouds[[\"2025\"]]"},{"path":"/articles/4-analysis.html","id":"analysis_systemic_network_insights","dir":"Articles","previous_headings":"","what":"analysis_systemic_network_insights","title":"4-Analysis","text":"","code":"network_insights <- analysis_systemic_network_insights(flows)  density_trend_data <- network_insights$Density_Trend   ggplot2::ggplot(network_insights$Density_Trend, ggplot2::aes(x = year, y = Density_by_Year)) +   ggplot2::geom_line(color = \"#4361EE\", size = 1.2) +   ggplot2::geom_point(color = \"#4361EE\", size = 3) +   ggplot2::geom_smooth(method = \"lm\", se = FALSE, linetype = \"dashed\",                color = \"grey50\") +   ggplot2::scale_y_continuous(labels = scales::percent,                                limits = c(0,              max(network_insights$Density_Trend$Density_by_Year) * 1.1)) +   ggplot2::scale_x_continuous(breaks = unique(network_insights$Density_Trend$year)) +   ggplot2::labs(     title = \"Evolution of Funding Network Connectivity (Donor-Recipient Density)\",     subtitle = \"Tracking the percentage of possible donor-recipient links that      were actually funded each year.\",     x = \"Year\",     y = \"Network Density (%)\",     caption = paste0(     \"Indicator interpretation:\",     \"This visualization tracks the **Network Density** of the funding ecosystem     over time. Density is a measure of **connectivity**: it represents the     percentage of all theoretically possible unique donor-to-recipient     relationships that actually received funding in a given year.      The dashed line shows the long-term trend.\",     \"\\n\\n\",          \"An **increasing density trend** suggests the ecosystem is becoming more     distributed and interconnected, which may reduce risk reliance on a few key     links. A **decreasing density trend** suggests the network is retracting or     consolidating.      This helps us assess the maturity and fragmentation of the funding system.\",      \"\\n\\n\",          \"**Data Source**: OCHA Financial Tracking Service (FTS) API.\")  ) +   unhcrthemes::theme_unhcr(     grid = \"Y\",     axis = TRUE,     axis_title = TRUE,     legend = FALSE   ) #> Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0. #> ℹ Please use `linewidth` instead. #> This warning is displayed once every 8 hours. #> Call `lifecycle::last_lifecycle_warnings()` to see where this warning was #> generated. #> `geom_smooth()` using formula = 'y ~ x'"},{"path":"/articles/4-analysis.html","id":"analysis_portfolio_scores","dir":"Articles","previous_headings":"","what":"analysis_portfolio_scores","title":"4-Analysis","text":"","code":"scores <- analysis_portfolio_scores(flows,                 recipient_name=\"United Nations High Commissioner for Refugees\",                            top_n = 10)  ggplot2::ggplot(scores, ggplot2::aes(x = reorder(donor, Portfolio_Score),                                       y = Portfolio_Score)) +   ggplot2::geom_col( ggplot2::aes(fill = Portfolio_Score)) +   ggplot2::coord_flip() +   ggplot2::labs(title = \"Donor Portfolio Scores for UNHCR\",         subtitle = \"Measure of the combined quality, consistency, and strategic         alignment of a donor's funding relationship\",        x = \"Donor\", y = \"Portfolio Score\",        caption = paste(     \"Indicator interpretation:\",     \"The **Portfolio Score**  is calculated as: **Donor Engagement** $\\\\times$      **Funding Amount** $\\\\times$ (1 - **Donor Concentration Risk**) $\\\\times$      **Strategic Alignment**. A higher score indicates a more valuable and      reliable funding partner for the recipient.\",     \"\\n\\n\",          \" The total bar      length represents the Portfolio Score, which is driven by four components:      **Donor Engagement** (consistency of giving over time), **Funding Amount**      (total USD provided), **Donor Concentration Risk** (inverse of funding      diversification across all destinations), and **Strategic Alignment**      (share of donor funding aligned with the recipient's primary Global      Clusters).\",     \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies key and potentially most reliable donors whose funding      relationship is both substantial and strategically aligned with the     recipient's mandate. It helps the recipient organization prioritize      relationship management and provides donors with a metric to assess the     quality of their long-term partnerships.\",      \"\\n\\n\",     \"**Data Source**: OCHA Financial Tracking Service (FTS) API.\")) +     ggplot2::scale_y_continuous(       labels = scales::label_number(scale_cut = scales::cut_short_scale())     ) +   unhcrthemes::theme_unhcr(grid = \"X\", axis =  \"Y\", axis_title = FALSE,                            legend=FALSE)"},{"path":"/articles/4-analysis.html","id":"analysis_prepare_opportunity_dataset","dir":"Articles","previous_headings":"","what":"analysis_prepare_opportunity_dataset","title":"4-Analysis","text":"","code":"crisis_keywords = c(\"refugees\", \"refugee\",\"displacement\", \"displaced\",                          \"returnees\",\"idps\",                         \"protection\", \"conflict\", \"vulnerable\")  features <- analysis_prepare_opportunity_dataset( flows,     lookback_years = 3,     crisis_keywords = crisis_keywords) #> Warning: There was 1 warning in `dplyr::summarise()`. #> ℹ In argument: `max_cluster_share = max(cluster_share, na.rm = TRUE)`. #> ℹ In group 347: `donor = \"European Commission's Humanitarian Aid and Civil #>   Protection Department\"`, `recipient = \"Emergency Shelter and NFI\"`, `year = #>   2021`. #> Caused by warning in `max()`: #> ! no non-missing arguments to max; returning -Inf  # Filter for non-NA growth, arrange by descending growth, and take the top 5. label_data_top <- features |>   dplyr::filter(!is.na(pct_growth)) |>   dplyr::arrange(dplyr::desc(pct_growth)) |>   dplyr::slice_head(n = 3) |>   dplyr::mutate(donor_wrapped = stringr::str_wrap(paste0(donor, \" --> \",                                                   recipient),                                            width = 45))   ggplot2::ggplot(features, ggplot2::aes(x = total_amount, y = pct_growth/100)) +   ggplot2::geom_point(alpha = 0.5) +   ggrepel::geom_text_repel(  data = label_data_top,                               ggplot2::aes(label = donor_wrapped),      size = 2.5, segment.color = 'grey50',      min.segment.length = 0, box.padding = 0.5 ) +   ggplot2::scale_x_log10(       labels = scales::label_number(scale_cut = scales::cut_short_scale())) +   ggplot2::scale_y_continuous(labels = scales::label_percent()  ) +   ggplot2::labs(     title = \"Funding Opportunity Analysis: Amount vs. Growth\",     subtitle = paste0(             \"Focusing on the following keywords within project description: \",             paste(crisis_keywords, collapse = \", \")         ),     x = \"Total Amount (log scale)\",     y = \"Percentage Growth\",     caption= paste0(       \"Indicator interpretation: Points in the top-right quadrant indicate        high-value future opportunities.\", \"\\n\\n\",     \"**Data Source**: OCHA Financial Tracking Service (FTS) API.\")) +   unhcrthemes::theme_unhcr(grid = TRUE, axis = TRUE,                             axis_title = TRUE, legend = TRUE)   #> Warning in ggplot2::scale_x_log10(labels = scales::label_number(scale_cut = #> scales::cut_short_scale())): log-10 transformation introduced #> infinite values. #> Warning: Removed 6559 rows containing missing values or values outside the scale range #> (`geom_point()`)."},{"path":"/articles/4-analysis.html","id":"analysis_fit_opportunity_model","dir":"Articles","previous_headings":"","what":"analysis_fit_opportunity_model","title":"4-Analysis","text":"","code":"features <- analysis_prepare_opportunity_dataset(flows) #> Warning: There was 1 warning in `dplyr::summarise()`. #> ℹ In argument: `max_cluster_share = max(cluster_share, na.rm = TRUE)`. #> ℹ In group 347: `donor = \"European Commission's Humanitarian Aid and Civil #>   Protection Department\"`, `recipient = \"Emergency Shelter and NFI\"`, `year = #>   2021`. #> Caused by warning in `max()`: #> ! no non-missing arguments to max; returning -Inf model_results <- analysis_fit_opportunity_model(features, min_year = NULL) train_data <- model_results$train model <- model_results$model train_data$predicted_prob <- predict(model, newdata = train_data, type = \"response\")  ggplot2::ggplot(train_data,                  ggplot2::aes(x = predicted_prob, fill = factor(opportunity))) +   ggplot2::geom_density(alpha = 0.5) +   ggplot2::scale_y_continuous(       labels = scales::label_number(scale_cut = scales::cut_short_scale())     ) +   ggplot2::scale_x_continuous(       labels = scales::label_number(scale_cut = scales::cut_short_scale())     ) +   ggplot2::labs(title = \"Ability to forecast potential funding streams based on previous years\",     subtitle = \"Comparing the probability score assigned by the model against the     actual outcome \\n (Funding Occurred = 1, No Funding = 0).\",        x = \"Predicted Probability\",        fill = \"Actual Opportunity\",     caption = paste0(\"The X-axis shows the **Predicted Probability**     (a score from 0 to 1) that a donor will fund a recipient in the next year.      The two colored curves show the distribution of this score based on the      **Actual Outcome** for that relationship-year observation:  **Blue Curve     (0: No Funding):** Represents relationships where the donor *did not* fund     the recipient next year. Most of these probabilities should cluster near 0.     **Red Curve (1: Funding Occurred):** Represents relationships where      the donor *did* fund the recipient next year.      Most of these probabilities should cluster near 1.\",     \"\\n\\n\",     \"**Data Source**: OCHA Financial Tracking Service (FTS) API.\")) +   unhcrthemes::theme_unhcr(grid = TRUE, axis =  TRUE, axis_title = TRUE, legend=TRUE)"},{"path":"/articles/4-analysis.html","id":"analysis_competitive_intel_matrix","dir":"Articles","previous_headings":"","what":"analysis_competitive_intel_matrix","title":"4-Analysis","text":"","code":"recipient_name <- \"United Nations High Commissioner for Refugees\"  matrix_data <- analysis_competitive_intel_matrix(flows,                                               recipient_name,                                               peers = NULL) ggplot2::ggplot(matrix_data, ggplot2::aes(x = market_share,                                            y = growth_differential)) +   ggplot2::geom_point(     ggplot2::aes(size = our_funding, color = sector), alpha = 0.7) +   ggplot2::geom_text(     ggplot2::aes(label = sector),             vjust = 1,             hjust = 1,             size = 3) +   ggplot2::scale_y_continuous(labels = scales::label_number(     scale_cut = scales::cut_short_scale())) +   ggplot2::scale_x_continuous(labels = scales::label_number(     scale_cut = scales::cut_short_scale())) +   ggplot2::labs(     title = \"Competitive Intelligence Matrix\",     x = \"Market Share\",     y = \"Growth Differential\",     size = \"Our Funding\",     caption =\"**Data Source**: OCHA Financial Tracking Service (FTS) API.\") +   unhcrthemes::theme_unhcr(     grid = FALSE,     axis =  FALSE,     axis_title = FALSE,     legend = TRUE   )   #> Warning: Removed 21 rows containing missing values or values outside the scale range #> (`geom_point()`). #> Warning: Removed 21 rows containing missing values or values outside the scale range #> (`geom_text()`)."},{"path":"/articles/4-analysis.html","id":"analysis_donor_lifecycle_stage","dir":"Articles","previous_headings":"","what":"analysis_donor_lifecycle_stage","title":"4-Analysis","text":"","code":"recipient_name <- \"United Nations High Commissioner for Refugees\" stages <- analysis_donor_lifecycle_stage(flows, recipient_name= recipient_name )  ggplot2::ggplot(stages, ggplot2::aes(x = stage)) +   ggplot2::geom_bar( ggplot2::aes(fill = stage)) +   ggplot2::coord_flip() +   ggplot2::labs(title = paste0(\"Donor Lifecycle Stages for \", recipient_name),        subtitle = \"Based on their historical funding behavior, complexity         of partnership, and alignment\",        x = \"\",        y = \"Number of Donors\",        caption = paste(     \"Indicator interpretation:\",     \"This visualization segments donors into specific **Lifecycle Stages** .      This framework helps tailor engagement strategies to maximize potential      and retention. The stages represent a progression in the relationship      quality and maturity: \",      \"**Prospect:** High potential alignment, but hasn't provided funding yet      (highest priority for first outreach). \",      \" **New Partner:** Recently started funding (1-2 years), establishing the      relationship.\",     \" **Growing Partner:** Demonstrates increasing funding trends and engages      across multiple sectors (focus on deepening the partnership). \",     \"**Strategic Partner:** Provides multi-year or flexible funding and shows     high strategic alignment (focus on co-design and long-term goals). \",     \"**Legacy Partner:** Long-term partners (10+ years of funding),      foundational to our operations. \",     \"**Maintenance:** Donors that do not fit the criteria for active      growth stages (focus on efficient retention).\",     \"\\n\\n\",          \"**Data Source**: OCHA Financial Tracking Service (FTS) API Data.\" )) +   unhcrthemes::theme_unhcr(grid = \"X\", axis = \"Y\", axis_title = TRUE,                             legend=FALSE)"},{"path":"/articles/4-analysis.html","id":"analysis_donor_segmentation","dir":"Articles","previous_headings":"","what":"analysis_donor_segmentation","title":"4-Analysis","text":"","code":"recipient_name <-  \"United Nations High Commissioner for Refugees\" segments <- analysis_donor_segmentation(flows, recipient_name)|>   dplyr::filter(!is.na(total)) |>    dplyr::arrange(desc(total)) |>   dplyr::slice_head(n = 20)  label_data_top_donors <- segments |>   dplyr::filter(!is.na(total)) |>     dplyr::arrange(desc(total)) |>   dplyr::slice_head(n = 20)|>   dplyr::mutate(donor = stringr::str_wrap(donor,                                            width = 45))  ggplot2::ggplot(segments, ggplot2::aes(x = Strategic_Priority,                      y = Resource_Allocation_Score,                       color = segment,                      size = total)) +   ggplot2::geom_point(alpha = 0.7) +   ggrepel::geom_text_repel(     data = label_data_top_donors,     ggplot2::aes(label = donor),       size = 3.5,     segment.color = 'grey50',     min.segment.length = 0,     box.padding = 0.5,     max.overlaps = Inf  ) +   ggplot2::scale_size_continuous(labels = scales::label_number(     scale_cut = scales::cut_short_scale())) +   ggplot2::scale_y_continuous(labels = scales::label_number(     scale_cut = scales::cut_short_scale()),     n.breaks = 5) +   ggplot2::scale_x_continuous(labels = scales::label_number(     scale_cut = scales::cut_short_scale())) +   ggplot2::labs(title = paste0(\"Donor Segmentation for \",  recipient_name),        subtitle = \"Combined value of the relationship based on         **Donor Engagement**, **Alignment Index**, and **Growth Potential** in         relation with funding history\",        x = \"Strategic Priority\",        y = \"Resource Allocation Score\",        color = \"Segment\",        caption = paste0(     \"Indicator interpretation:\",     \"For **Strategic Priority (X-axis):** Higher means a more valuable or      promising relationship.\",     \"The **Resource Allocation Score (Y-axis):** is an indicator of whether the     donor is 'under-resourced'. It is calculated as Strategic Priority divided     by the total historical funding (total). Higher scores suggest the donor has     high priority but currently receives relatively low engagement effort.\",     \"The size of the bubble reflects the **Total Funding Amount** to all      destinations, showing the donor's overall financial capacity.\",     \"\\n\\n\",     \"Each bubble represents a donor, classified into a segment based on its      position on the matrix.\",     \"This **Donor Segmentation Matrix** classifies donors into five categories     based on two calculated scores:\",     \"1. **Strategic Stars (Top-Right, High Y):** High Strategic Priority, but      currently under-resourced by our organization (high potential for increased     funding/engagement).\",     \"2. **Core Partners (Right, Lower Y):** High Strategic Priority and already     well-resourced (maintain stable, high-value relationship).\",     \"3. **Emerging Opportunities (Middle):** Medium Strategic Priority and good     growth potential (focus on growth).\",     \"4. **Divestment Candidates (Bottom-Left):** Low Strategic Priority      (low returns on effort).\",     \"5. **Maintenance Accounts (Bottom-Right, High Total):** Lower Strategic      Priority, but historically large and stable contributors (focus on stable     retention and minimizing effort).\",     \"\\n\\n\",     \"**Data Source**: OCHA Financial Tracking Service (FTS) API.\")) +   unhcrthemes::theme_unhcr(grid = TRUE, axis =  FALSE, axis_title = TRUE, legend=TRUE)"},{"path":"/articles/4-analysis.html","id":"analysis_funding_forecast","dir":"Articles","previous_headings":"","what":"analysis_funding_forecast","title":"4-Analysis","text":"","code":"donor <- \"Germany\" forecast_result <- analysis_funding_forecast(flows,                                              by = \"donor\",                                               name = donor)  ggplot2::autoplot(forecast_result$forecast) +    ggplot2::scale_y_continuous(labels = scales::label_number(     scale_cut = scales::cut_short_scale())) +   ggplot2::labs(title = paste0(\"Funding Forecast of monthly funding amounts from \",   donor),        subtitle= \"Using an Autoregressive Integrated Moving Average time        series model (ARIMA).\",        x = \"Year\",        y = \"Funding Amount (USD)\",        caption = paste0(     \"Indicator interpretation:\",     \"The **dark line** represents the historical monthly funding data used for     training the model. The **lighter line** extending to the right shows     the **future forecast**.\",     \"\\n\\n\",          \"The **shaded areas** surrounding the forecast line represent      the **prediction intervals**: the **darker shade** is the 80% confidence      interval, and the **lighter shade** is the 95% confidence interval.      These areas indicate the likely range of future funding, showing the     uncertainty inherent in the forecast: the wider the shade,      the less certain the prediction.\",     \"\\n\\n\",     \"**Data Source**: OCHA Financial Tracking Service (FTS) API.\")) +   unhcrthemes::theme_unhcr(grid = TRUE,                             axis =  FALSE,                             axis_title = FALSE,                            legend=TRUE)"},{"path":"/articles/4-analysis.html","id":"analysis_donor_network_metrics","dir":"Articles","previous_headings":"","what":"analysis_donor_network_metrics","title":"4-Analysis","text":"","code":"recipient_name <-  \"United Nations High Commissioner for Refugees\" network_metrics <- analysis_donor_network_metrics(flows, recipient_name)  g <- network_metrics$graph  # Create a data frame for nodes, including the calculated degree nodes_df_all <- tibble::tibble(name = igraph::V(g)$name) |>   dplyr::mutate(     # Get the type property added in the original setup     type = ifelse(name %in% network_metrics$donor_metrics$donor,                    \"Donor\", \"Destination\"),     # Calculate degree for sizing and labeling     degree = igraph::degree(g, v = name)   )  # --- Prepare Node Data AND Compute Coordinates  # Create the layout object first to get the coordinates (x, y) layout_data <- ggraph::create_layout(g,  layout = \"fr\") # Fruchterman-Reingold  General networks # layout = \"circle\") # layout = \"kk\")    #Kamada-Kawai   Small to medium networks  # layout = \"dr\") #  Davidson-Harel  Finding a minimum-energy state;   # Filter the layout data to only include the nodes of interest,  # ensuring all necessary columns (x, y, name, type, degree) are present. nodes_df_all_coords <- layout_data |>   dplyr::as_tibble() |>   dplyr::left_join(     nodes_df_all |> dplyr::select(name, type, degree),      by = \"name\"   ) |>   dplyr::filter(!is.na(type)) # Filter out any non-donor/non-destination nodes   # --- Ggraph Plot --- ggraph::ggraph(layout_data) + # Use the layout_data object here    # EDGES: Use geom_edge_fan (works seamlessly with layout_data)   ggraph::geom_edge_fan(ggplot2::aes(alpha = weight),                          alpha = 0.3,                          width = 0.5,                          show.legend = FALSE) +    ggraph::geom_node_point(     ggplot2::aes(color = nodes_df_all_coords$type[match(name,                                                      nodes_df_all_coords$name)],                               size = nodes_df_all_coords$degree[match(name,                                                     nodes_df_all_coords$name)]),                           alpha = 0.6) +    # --- label ---   ggrepel::geom_label_repel(     data = nodes_df_all_coords,      ggplot2::aes(x = x, y = y, label = name, color = type),      inherit.aes = FALSE,     size = 2.5,     force = 2,     max.overlaps = Inf,     box.padding = 0.4,     segment.color = 'grey80',     show.legend = FALSE) +   ggplot2::scale_size_continuous(range = c(2, 15), name = \"Degree\") +   ggplot2::scale_color_manual(values = c(\"Donor\" = \"#007BFF\",                                          \"Destination\" = \"#FFC300\"),                                name = \"Node Type\") +    ggplot2::labs(     title = paste0(\"Funding Network for \", recipient_name),     subtitle = \"Node size reflects Degree (number of destination).\",     caption = \"Data Source: OCHA Financial Tracking Service (FTS) API.      Layout: Fruchterman-Reingold.\"   ) +   ggraph::theme_graph(     background = \"white\",     base_family = \"sans\"   )"},{"path":"/articles/5-visualisation.html","id":"clean_llm_response","dir":"Articles","previous_headings":"","what":"clean_llm_response","title":"5-Visualisation","text":"","code":"response <- \"<think> First, I'm a humanitarian data visualization expert. My role includes extracting insights  from visualizations, creating accessible narratives, highlighting patterns relevant to aid efforts, using clear language with emotional resonance. Aligning with constraints: Use plain language, be concise and impactful. Don't rehash  every detail; build narrative depth around 2 key insights maximum in under 30 tokens. <\/think> This visualization tracks a relationship potentially critical for humanitarian logistics:  higher fuel consumption versus increased weight. 车辆设计\" clean_llm_response(response) #> [1] \"This visualization tracks a relationship potentially critical for humanitarian logistics: higher fuel consumption versus increased weight.\""},{"path":"/articles/5-visualisation.html","id":"generate_plot_story","dir":"Articles","previous_headings":"","what":"generate_plot_story","title":"5-Visualisation","text":"","code":"library(ggplot2) p <- ggplot(mtcars, aes(x = wt, y = mpg)) +    geom_point() +     unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +    labs(title = \"Vehicle Efficiency\",         subtitle = \"Fuel consumption vs weight\",         caption = \"Source: mtcars dataset\")  generate_plot_story(p, provider = \"ollama\", model = \"deepseek-r1\") #> [1] \"This scatter plot maps efficiency against weight. We observe a strong correlation: generally, higher weight is associated with lower fuel economy. Points showing highly efficient models combined with relatively low \\\"weight\\\" are visible on one end. Conversely, we note two data points at very low mpg and high wt, highlighting particularly inefficient solutions for heavier needs scenarios requiring more resources. These outliers indicate potential gaps in our understanding of solution viability under demanding conditions. The tight clustering near higher efficiency suggests reliable performance across moderate need levels. However, the spread towards lower efficiency models signals challenges matching capability appropriately across all situations, especially heavy ones. This calls into question resource allocation strategies for major needs.\"  story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # To use as subtitle: p + ggplot2::labs(subtitle = story)"},{"path":"/articles/5-visualisation.html","id":"plot_donor_funding_over_time","dir":"Articles","previous_headings":"","what":"plot_donor_funding_over_time","title":"5-Visualisation","text":"Government Spains funding humanitarian efforts shows striking recent shift. peak investment 10 million USD 2022, contributions dramatically dropped just 1.5 million USD 2023. However, dip appears temporary pause significant ramp-, pledged funds jumping 50 million USD 2024 increasing 63 million USD 2025. trend highlights Spains evolving commitment global humanitarian needs. sharp decline 2023 may reflect internal budget adjustments shifting priorities, substantial increase subsequent years signals strong, renewed focus supporting crisis response recovery efforts worldwide. humanitarian planners partners, pattern emphasizes importance preparing surge available resources Spain next years. suggests opportunities enhance program scale reach, particularly funding levels projected multiply fivefold 2023. short, Spains funding trajectory reveals momentary contraction promising, sustained expansion support, underscoring need strategic alignment maximize impact resources vulnerable populations.","code":"p <- plot_donor_funding_over_time(flows, donor_name= \"Spain, Government of\") #> Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0. #> ℹ Please use `linewidth` instead. #> ℹ The deprecated feature was likely used in the ftsAnalysis package. #>   Please report the issue at #>   <https://github.com/edouard-legoupil/ftsAnalysis/issues>. #> This warning is displayed once every 8 hours. #> Call `lifecycle::last_lifecycle_warnings()` to see where this warning was #> generated.  # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) #cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") print(p + ggplot2::labs(subtitle = dubbed))"},{"path":"/articles/5-visualisation.html","id":"plot_donor_earmarking","dir":"Articles","previous_headings":"","what":"plot_donor_earmarking","title":"5-Visualisation","text":"funding profile Government Spain reveals clear prioritization pattern humanitarian aid allocations earmarking type. largest share, 71 million USD, dedicated least earmarked category, indicating Spains preference provide flexible funding allows humanitarian actors adapt resources needed. approach supports agile responses volatile settings, rigidly earmarked funds delay critical interventions. second largest portion, 33 million USD, moderately earmarked, suggesting Spain also values targeted funding specific needs sectors, balancing flexibility strategic focus. Smaller amountsaround 14 million 5.4 million USDgo narrowly defined earmarking types, reflecting declining emphasis restrictive funding. patterns highlight Spains intention empower humanitarian partners flexible resources still supporting priority areas. humanitarian planners responders, funding distribution signals opportunities align proposals Spains preferences versatile aid, enhancing impact collaborative efforts ground. Strengthening dialogues Spain earmarking priorities amplify funding effectiveness adaptability crisis contexts.","code":"p <- plot_donor_earmarking(flows, donor_name= \"Spain, Government of\")  # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/articles/5-visualisation.html","id":"plot_donor_flowtype","dir":"Articles","previous_headings":"","what":"plot_donor_flowtype","title":"5-Visualisation","text":"Government Spains humanitarian funding reveals clear focus allocation strategy. flow type distribution shows striking disparity: one category received modest contribution 287,000 USD, another flow type dominates 124 million USD funding. suggests Spain prioritizes specific forms aid interventions, potentially larger operational scale longer-term impact. concentration resources one flow type may reflect targeted responses urgent crises strategic investments particular regions sectors. However, relatively small amount allocated flow type highlights risk underfunding complementary emerging needs might critical comprehensive humanitarian response. decision-makers partners, insight signals two key actions: first, assess effectiveness reach dominant funding flow ensure optimal impact; second, consider whether lesser-funded flow requires increased support address overlooked gaps. Balancing funding flows enhance overall humanitarian outcomes, ensuring Spains contributions strategic inclusive rapidly evolving global humanitarian landscape.","code":"p <- plot_donor_flowtype(flows, donor_name= \"Spain, Government of\")  # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/articles/5-visualisation.html","id":"plot_donor_cluster_coverage","dir":"Articles","previous_headings":"","what":"plot_donor_cluster_coverage","title":"5-Visualisation","text":"data reveals Government Spain allocates humanitarian funding across different clusters, measured number financial flows. Notably, clusters receive significantly higher engagement. One cluster stands prominently 42 flows, indicating major focus area likely critical Spains humanitarian priorities. Two clusters also show elevated attention 26 21 flows respectively, suggesting strategic investment areas well. contrast, several clusters receive minimal flows, seeing one two financial inputs. uneven distribution highlights prioritization also potential gaps funding sparse. decision-makers, pattern implies opportunities reassess balance support ensure comprehensive effective humanitarian response tailored evolving global needs. Overall, Spains funding patterns reflect targeted interventions concentrated efforts select clusters, signaling Spains government may leveraging influence maximum humanitarian impact. Yet, relatively narrow focus also underlines importance ongoing evaluation prevent neglect less-funded sectors optimize overall aid effectiveness.","code":"p <- plot_donor_cluster_coverage(flows, donor_name= \"Spain, Government of\")  # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/articles/5-visualisation.html","id":"plot_recipient_funding_composition","dir":"Articles","previous_headings":"","what":"plot_recipient_funding_composition","title":"5-Visualisation","text":"funding composition United Nations High Commissioner Refugees (UNHCR) reveals critical insights scale diversity financial support receives various donor organizations. visualization orders donors total amount contributed, showing substantial range funding levels. Notably, small number donors provide majority funding, top contributors donating tens millions 160 million USD. concentration funding highlights strong commitment key donors vulnerability UNHCRs financial stability major donor reduce support. data underscores importance maintaining expanding partnerships diverse donors ensure balanced, reliable funding streams. diversification can enhance UNHCR’s capacity respond effectively global displacement crises, guaranteeing sustained humanitarian assistance across regions populations. executive decision-makers, calls strategic engagement existing large donors actively cultivating emerging funders secure long-term resilience humanitarian funding.","code":"p <- plot_recipient_funding_composition(flows,                recipient_name = \"United Nations High Commissioner for Refugees\")  # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/articles/5-visualisation.html","id":"plot_recipient_grandbargain","dir":"Articles","previous_headings":"","what":"plot_recipient_grandbargain","title":"5-Visualisation","text":"data reveals critical insights funding United Nations High Commissioner Refugees (UNHCR) allocated Grand Bargain agreement, distinguishing earmarked non-earmarked support. Notably, largest portion funding, 500 million USD, falls one specific type earmarkingpotentially indicating targeted restricted use. contrast, non-earmarked less strictly designated funding amounts significantly less, around 131 million USD, highlighting considerable reliance conditional contributions. imbalance suggests donors committing substantial resources, often come strings attached, limiting flexibility UNHCR responding evolving humanitarian needs ground. Earmarked funding can improve transparency accountability may reduce agencys ability allocate funds urgently needed. humanitarian leaders policymakers, underscores importance advocating flexible, non-earmarked funding streams enhance UNHCRs operational agility improve timely assistance delivery. summary, overall funding UNHCR substantial, predominance earmarked funding challenges organizations capacity respond dynamically refugee crises. Strengthening efforts increase non-earmarked contributions strategic priority maximize impact humanitarian aid.","code":"p <- plot_recipient_grandbargain(flows,           recipient_name = \"United Nations High Commissioner for Refugees\") #> Scale for y is already present. #> Adding another scale for y, which will replace the existing scale.  # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/articles/5-visualisation.html","id":"plot_recipient_cofunding","dir":"Articles","previous_headings":"","what":"plot_recipient_cofunding","title":"5-Visualisation","text":"data highlights co-funding dynamics United Nations High Commissioner Refugees (UNHCR), focusing proportion funding comes multiple donors. Specifically, shows two categories: one zero shared funding another fully shared, indicating multi-recipient contributions. critical insight presence substantial proportion funding entirely co-funded, meaning multiple donors contributing together UNHCRs initiatives. pattern reflects strong collaboration, essential pooling resources maximizing impact humanitarian programs supporting refugees globally. Conversely, category zero shared funding points funds provided single donors. important, funding may limit scope resource coordination risk spreading. decision-makers, data suggests value promoting co-funding mechanisms, can enhance scale effectiveness humanitarian response. Encouraging donors participate shared funding improve flexibility reduce duplication, ultimately strengthening UNHCRs ability respond refugee crises efficiently. summary, fostering multi-donor partnerships priority sustain expand humanitarian assistance displaced populations worldwide.","code":"p <- plot_recipient_cofunding(flows,                recipient_name = \"United Nations High Commissioner for Refugees\")   # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/articles/5-visualisation.html","id":"plot_recipient_contribution_type","dir":"Articles","previous_headings":"","what":"plot_recipient_contribution_type","title":"5-Visualisation","text":"6 data reveals significant imbalance funding received United Nations High Commissioner Refugees (UNHCR), vast majority contributions provided financial resources rather -kind donations. Specifically, 1.16 billion US dollars contributed financially, -kind contributions amount just 1.3 million dollars. stark contrast highlights reliance monetary donations, offer flexibility UNHCR allocate funds quickly effectively across diverse humanitarian needsfrom shelter food legal assistance. However, relatively minimal -kind support suggests may underutilized opportunities donors provide direct goods services enhance operational efficiency address specific, tangible needs ground. decision-makers, insight underscores importance sustaining possibly increasing financial contributions maintain UNHCRs capacity respond swiftly. time, exploring ways encourage streamline -kind contributions diversify resource flows, potentially strengthening overall humanitarian response. Promoting balanced approach might improve resilience better serve displaced populations worldwide.","code":"p <- plot_recipient_contribution_type(flows,                  recipient_name = \"United Nations High Commissioner for Refugees\")   # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/articles/5-visualisation.html","id":"plot_destination_funding_destination","dir":"Articles","previous_headings":"","what":"plot_destination_funding_destination","title":"5-Visualisation","text":"funding landscape humanitarian efforts Burundi reveals striking concentration financial support among key donors. One donor stands overwhelmingly, contributing 80 million USD, dwarfing next largest contributors provided funding range five seven million USD. Beyond top contributors, funding sharply declines, several donors contributing amounts half million USD, even less 100,000 USD. pattern indicates heavy reliance small number major donors drive Burundi’s humanitarian response. ensures significant resources available, also exposes response risks major donor reduces support. limited diversity funding sources underscores need broaden donor engagement explore new partnerships build resilient funding base. decision-makers, calls strategic outreach emerging donors efforts strengthen coordination among contributing partners. Increasing donor pool enhance financial stability, enabling sustained effective humanitarian interventions respond Burundis urgent needs.","code":"p <- plot_destination_funding_destination(flows, destination_name= \"Burundi\")  # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/articles/5-visualisation.html","id":"plot_destination_funding_donor","dir":"Articles","previous_headings":"","what":"plot_destination_funding_donor","title":"5-Visualisation","text":"data funding humanitarian efforts Burundi reveals highly uneven distribution donor contributions. donors provide modest amounts, one donor stands contributing 80 million USD, significantly surpassing others. single, dominant funding source plays critical role sustaining relief development programs Burundi. Two donors also contribute substantial amounts, around 5 6 million USD , majority donors provide less 600,000 USD . concentration funding highlights vulnerability: humanitarian response Burundi depends heavily limited number donors. reduction support severely impact ongoing operations. pattern calls urgent diversification funding. Engaging donors increasing financial commitments smaller contributors essential build resilient support system. Strengthening funding base help ensure continuous assistance Burundi’s vulnerable populations facing ongoing challenges.","code":"p <- plot_destination_funding_donor(flows, destination_name= \"Burundi\")  # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/articles/5-visualisation.html","id":"plot_destination_heatmap","dir":"Articles","previous_headings":"","what":"plot_destination_heatmap","title":"5-Visualisation","text":"analysis highlights top five donor organizations supporting humanitarian efforts Burundi, revealing critical funding patterns inform response priorities. data shows distinct funding flows, certain donors channeling significant resources specific recipient entities. visualizations use color intensity signals varying total USD amounts, underlining key donors contribute bulk financial support. concentration suggests reliance major donors, may expose vulnerabilities funding priorities shift. Moreover, chart exposes diversified recipient landscape Burundi, indicating multiple organizations receiving aid, potentially addressing different humanitarian sectors geographic areas. distribution emphasizes complexity breadth needs, emergency relief development interventions. executives, insights underscore importance sustaining broadening donor base mitigate risks funding shortfalls, encouraging coordination among recipients maximize impact. Strategic engagement lead donors enhancing transparency fund allocation can strengthen response effectiveness resilience Burundis humanitarian landscape.","code":"p <- plot_destination_heatmap(flows, destination_name= \"Burundi\", top_n = 5)  # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/articles/5-visualisation.html","id":"plot_funding_status_timeline","dir":"Articles","previous_headings":"","what":"plot_funding_status_timeline","title":"5-Visualisation","text":"funding timeline 2020 2026 reveals significant accelerating increase pledged committed resources humanitarian efforts globally. Pledged funding, representing announced resources, shows dramatic rise roughly 45 million USD 2021 2.7 billion USD projected 2025, indicating growing donor promises amid increasing global needs. Committed funding, reflecting resources formally allocated, follows similar upward trend, surging 34 million USD 2020 nearly 8.9 billion USD anticipated 2025. gap pledged committed figures recent years underscores progress turning donor intentions tangible funding, also highlights importance tracking commitments closely ensure pledges fulfilled. Paid amounts, actual disbursed funds, remain low comparison, consistently 6 million USD annually. lag commitment payment suggests critical bottleneck, potentially delaying frontline response assistance delivery. humanitarian executives, pattern signals encouraging donor engagement raises urgent questions pace fund disbursement. maximize impact, efforts must focus accelerating payment mechanisms bridge gap commitments actual aid delivery. Timely funding crucial respond effectively evolving crises save lives ground.","code":"p <- plot_funding_status_timeline(flows)  # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/articles/5-visualisation.html","id":"generate_report","dir":"Articles","previous_headings":"","what":"generate_report","title":"5-Visualisation","text":"","code":"#generate_report(type = \"donor\")"},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Edouard Legoupil. Author, maintainer. UNHCR. Copyright holder.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Legoupil E (2025). ftsAnalysis: Build Analysis OCHA Finantial Tracking Service. R package version 0.0.0.9000, https://edouard-legoupil.github.io/ftsAnalysis/.","code":"@Manual{,   title = {ftsAnalysis: Build Analysis from OCHA Finantial Tracking Service},   author = {Edouard Legoupil},   year = {2025},   note = {R package version 0.0.0.9000},   url = {https://edouard-legoupil.github.io/ftsAnalysis/}, }"},{"path":"/index.html","id":"ftsanalysis","dir":"","previous_headings":"","what":"Build Analysis from OCHA Finantial Tracking Service","title":"Build Analysis from OCHA Finantial Tracking Service","text":"goal ftsAnalysis provide set metrics, index, analysis visualization better understand data OCHA Financial Tracking Service. package enables creation detailed reports, included automated AI analysis 3 angles: Donors Recipients Destinations","code":""},{"path":"/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Build Analysis from OCHA Finantial Tracking Service","text":"can install development version ftsAnalysis GitHub : package includes function build data stories plot. use can use Ollama Set LLM inference API key environment :","code":"# install.packages(\"pak\") pak::pak(\"Edouard-Legoupil/ftsAnalysis\") Sys.setenv(OPENAI_API_KEY = \"<YOUR_OPENAI_KEY>\") Sys.setenv(GEMINI_API_KEY = \"<YOUR_GOOGLE_GEMINI_KEY>\") Sys.setenv(ANTHROPIC_API_KEY = \"<YOUR_ANTHROPIC_KEY>\")"},{"path":"/reference/analysis_competitive_intel_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Competitive Intelligence Matrix — analysis_competitive_intel_matrix","title":"Competitive Intelligence Matrix — analysis_competitive_intel_matrix","text":"Computes organization's competitive position across sectors using: Market_share = Our_funding_in_sector / Total_sector_funding Growth_differential = Our_growth - Average_peer_growth Funding_diversity = 1 - HHI(our_funding_sources) Peer_encroachment = sum(peer_growth_in_our_core_sectors)","code":""},{"path":"/reference/analysis_competitive_intel_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Competitive Intelligence Matrix — analysis_competitive_intel_matrix","text":"","code":"analysis_competitive_intel_matrix(flows, recipient_name, peers = NULL)"},{"path":"/reference/analysis_competitive_intel_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Competitive Intelligence Matrix — analysis_competitive_intel_matrix","text":"flows Dataframe flows. recipient_name Character name organization appears destinationObjects.name (type Organization). peers Optional character vector peer organization names. NULL peers organizations destinationObjects.","code":""},{"path":"/reference/analysis_competitive_intel_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Competitive Intelligence Matrix — analysis_competitive_intel_matrix","text":"Tibble sector-level aggregated competitive indicators composite Competitive_Position score.","code":""},{"path":"/reference/analysis_competitive_intel_matrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Competitive Intelligence Matrix — analysis_competitive_intel_matrix","text":"","code":"recipient_name <- \"United Nations High Commissioner for Refugees\"  matrix_data <- analysis_competitive_intel_matrix(flows,                                               recipient_name,                                               peers = NULL) ggplot2::ggplot(matrix_data, ggplot2::aes(x = market_share,                                            y = growth_differential)) +   ggplot2::geom_point(     ggplot2::aes(size = our_funding, color = sector), alpha = 0.7) +   ggplot2::geom_text(     ggplot2::aes(label = sector),             vjust = 1,             hjust = 1,             size = 3) +   ggplot2::scale_y_continuous(labels = scales::label_number(     scale_cut = scales::cut_short_scale())) +   ggplot2::scale_x_continuous(labels = scales::label_number(     scale_cut = scales::cut_short_scale())) +   ggplot2::labs(     title = \"Competitive Intelligence Matrix\",     x = \"Market Share\",     y = \"Growth Differential\",     size = \"Our Funding\",     caption =\"**Data Source**: OCHA Financial Tracking Service (FTS) API.\") +   unhcrthemes::theme_unhcr(     grid = FALSE,     axis =  FALSE,     axis_title = FALSE,     legend = TRUE   )   #> Warning: Removed 21 rows containing missing values or values outside the scale range #> (`geom_point()`). #> Warning: Removed 21 rows containing missing values or values outside the scale range #> (`geom_text()`)."},{"path":"/reference/analysis_donor_lifecycle_stage.html","id":null,"dir":"Reference","previous_headings":"","what":"Donor Lifecycle Stage Scoring — analysis_donor_lifecycle_stage","title":"Donor Lifecycle Stage Scoring — analysis_donor_lifecycle_stage","text":"Assigns donors lifecycle stages: Prospect (alignment > 0.7, funding) New Partner (1-2 years funding) Growing Partner (increasing amounts, multiple sectors) Strategic Partner (multi-year, flexible funding) Legacy Partner (10+ years, co-design initiatives)","code":""},{"path":"/reference/analysis_donor_lifecycle_stage.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Donor Lifecycle Stage Scoring — analysis_donor_lifecycle_stage","text":"","code":"analysis_donor_lifecycle_stage(   flows,   alignment_df = NULL,   recipient_name = NULL )"},{"path":"/reference/analysis_donor_lifecycle_stage.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Donor Lifecycle Stage Scoring — analysis_donor_lifecycle_stage","text":"flows Dataframe flows. alignment_df Optional tibble donor alignment scores (donor, alignment_score 0-1). recipient_name Character: name recipient organization filter flows .","code":""},{"path":"/reference/analysis_donor_lifecycle_stage.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Donor Lifecycle Stage Scoring — analysis_donor_lifecycle_stage","text":"Tibble donor, metrics stage (factor).","code":""},{"path":"/reference/analysis_donor_lifecycle_stage.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Donor Lifecycle Stage Scoring — analysis_donor_lifecycle_stage","text":"Uses flows compute engagement_frequency, funding_trend (slope), multiyear_share proxy, partnership_complexity proxy, scoped specific recipient organization.","code":""},{"path":"/reference/analysis_donor_lifecycle_stage.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Donor Lifecycle Stage Scoring — analysis_donor_lifecycle_stage","text":"","code":"recipient_name <- \"United Nations High Commissioner for Refugees\" stages <- analysis_donor_lifecycle_stage(flows, recipient_name= recipient_name )  ggplot2::ggplot(stages, ggplot2::aes(x = stage)) +   ggplot2::geom_bar( ggplot2::aes(fill = stage)) +   ggplot2::coord_flip() +   ggplot2::labs(title = paste0(\"Donor Lifecycle Stages for \", recipient_name),        subtitle = \"Based on their historical funding behavior, complexity         of partnership, and alignment\",        x = \"\",        y = \"Number of Donors\",        caption = paste(     \"Indicator interpretation:\",     \"This visualization segments donors into specific **Lifecycle Stages** .      This framework helps tailor engagement strategies to maximize potential      and retention. The stages represent a progression in the relationship      quality and maturity: \",      \"**Prospect:** High potential alignment, but hasn't provided funding yet      (highest priority for first outreach). \",      \" **New Partner:** Recently started funding (1-2 years), establishing the      relationship.\",     \" **Growing Partner:** Demonstrates increasing funding trends and engages      across multiple sectors (focus on deepening the partnership). \",     \"**Strategic Partner:** Provides multi-year or flexible funding and shows     high strategic alignment (focus on co-design and long-term goals). \",     \"**Legacy Partner:** Long-term partners (10+ years of funding),      foundational to our operations. \",     \"**Maintenance:** Donors that do not fit the criteria for active      growth stages (focus on efficient retention).\",     \"\\n\\n\",          \"**Data Source**: OCHA Financial Tracking Service (FTS) API Data.\" )) +   unhcrthemes::theme_unhcr(grid = \"X\", axis = \"Y\", axis_title = TRUE,                             legend=FALSE)"},{"path":"/reference/analysis_donor_network_metrics.html","id":null,"dir":"Reference","previous_headings":"","what":"Donor-Destination Network Metrics — analysis_donor_network_metrics","title":"Donor-Destination Network Metrics — analysis_donor_network_metrics","text":"Builds bipartite donor -> destination network flows, filtered include flows directed specified recipient_name. Computes node centrality measures (degree, betweenness, eigenvector) involved donors destinations.","code":""},{"path":"/reference/analysis_donor_network_metrics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Donor-Destination Network Metrics — analysis_donor_network_metrics","text":"","code":"analysis_donor_network_metrics(flows, recipient_name = NULL, top_n = 20)"},{"path":"/reference/analysis_donor_network_metrics.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Donor-Destination Network Metrics — analysis_donor_network_metrics","text":"flows Dataframe flows. recipient_name Character: name specific recipient/destination analyze. top_n Optional integer: restricts network top_n donors top_n destinations amount within filtered flows readability.","code":""},{"path":"/reference/analysis_donor_network_metrics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Donor-Destination Network Metrics — analysis_donor_network_metrics","text":"list components: graph (igraph object), donor_metrics (tibble), destination_metrics (tibble)","code":""},{"path":"/reference/analysis_donor_network_metrics.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Donor-Destination Network Metrics — analysis_donor_network_metrics","text":"","code":"recipient_name <-  \"United Nations High Commissioner for Refugees\" network_metrics <- analysis_donor_network_metrics(flows, recipient_name)  g <- network_metrics$graph  # Create a data frame for nodes, including the calculated degree nodes_df_all <- tibble::tibble(name = igraph::V(g)$name) |>   dplyr::mutate(     # Get the type property added in the original setup     type = ifelse(name %in% network_metrics$donor_metrics$donor,                    \"Donor\", \"Destination\"),     # Calculate degree for sizing and labeling     degree = igraph::degree(g, v = name)   )  # --- Prepare Node Data AND Compute Coordinates  # Create the layout object first to get the coordinates (x, y) layout_data <- ggraph::create_layout(g,  layout = \"fr\") # Fruchterman-Reingold  General networks # layout = \"circle\") # layout = \"kk\")  #Kamada-Kawai  Small to medium networks  # layout = \"dr\") #  Davidson-Harel  Finding a minimum-energy state;   # Filter the layout data to only include the nodes of interest,  # ensuring all necessary columns (x, y, name, type, degree) are present. nodes_df_all_coords <- layout_data |>   dplyr::as_tibble() |>   dplyr::left_join(     nodes_df_all |> dplyr::select(name, type, degree),      by = \"name\"   ) |>   dplyr::filter(!is.na(type)) # Filter out any non-donor/non-destination nodes   # --- Ggraph Plot --- ggraph::ggraph(layout_data) + # Use the layout_data object here    # EDGES: Use geom_edge_fan (works seamlessly with layout_data)   ggraph::geom_edge_fan(ggplot2::aes(alpha = weight),                          alpha = 0.3,                          width = 0.5,                          show.legend = FALSE) +    ggraph::geom_node_point(     ggplot2::aes(color = nodes_df_all_coords$type[match(name,                                                      nodes_df_all_coords$name)],                               size = nodes_df_all_coords$degree[match(name,                                                     nodes_df_all_coords$name)]),                           alpha = 0.6) +    # --- label ---   ggrepel::geom_label_repel(     data = nodes_df_all_coords,      ggplot2::aes(x = x, y = y, label = name, color = type),      inherit.aes = FALSE,     size = 2.5,     force = 2,     max.overlaps = Inf,     box.padding = 0.4,     segment.color = 'grey80',     show.legend = FALSE) +   ggplot2::scale_size_continuous(range = c(2, 15), name = \"Degree\") +   ggplot2::scale_color_manual(values = c(\"Donor\" = \"#007BFF\",                                          \"Destination\" = \"#FFC300\"),                                name = \"Node Type\") +    ggplot2::labs(     title = paste0(\"Funding Network for \", recipient_name),     subtitle = \"Node size reflects Degree (number of destination).\",     caption = \"Data Source: OCHA Financial Tracking Service (FTS) API.      Layout: Fruchterman-Reingold.\"   ) +   ggraph::theme_graph(     background = \"white\",     base_family = \"sans\"   )"},{"path":"/reference/analysis_donor_segmentation.html","id":null,"dir":"Reference","previous_headings":"","what":"Donor Segmentation (Priority Matrix) — analysis_donor_segmentation","title":"Donor Segmentation (Priority Matrix) — analysis_donor_segmentation","text":"Classify donors priority segments: Strategic Stars (High priority, -resourced) Core Partners (High priority, well-resourced) Emerging Opportunities (Medium priority, growth potential) Maintenance Accounts (Low priority, stable) Divestment Candidates (Low priority, declining)","code":""},{"path":"/reference/analysis_donor_segmentation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Donor Segmentation (Priority Matrix) — analysis_donor_segmentation","text":"","code":"analysis_donor_segmentation(flows, recipient_name)"},{"path":"/reference/analysis_donor_segmentation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Donor Segmentation (Priority Matrix) — analysis_donor_segmentation","text":"flows Dataframe flows. recipient_name Character name org (compute \"-resourced\" signals).","code":""},{"path":"/reference/analysis_donor_segmentation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Donor Segmentation (Priority Matrix) — analysis_donor_segmentation","text":"Tibble donor assigned segment plus Resource_Allocation_Score.","code":""},{"path":"/reference/analysis_donor_segmentation.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Donor Segmentation (Priority Matrix) — analysis_donor_segmentation","text":"Uses Engagement_Index, Alignment_Index, Growth_Potential computed flows.","code":""},{"path":"/reference/analysis_donor_segmentation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Donor Segmentation (Priority Matrix) — analysis_donor_segmentation","text":"","code":"recipient_name <-  \"United Nations High Commissioner for Refugees\" segments <- analysis_donor_segmentation(flows, recipient_name)|>   dplyr::filter(!is.na(total)) |>    dplyr::arrange(desc(total)) |>   dplyr::slice_head(n = 20)  label_data_top_donors <- segments |>   dplyr::filter(!is.na(total)) |>     dplyr::arrange(desc(total)) |>   dplyr::slice_head(n = 20)|>   dplyr::mutate(donor = stringr::str_wrap(donor,                                            width = 45))  ggplot2::ggplot(segments, ggplot2::aes(x = Strategic_Priority,                      y = Resource_Allocation_Score,                       color = segment,                      size = total)) +   ggplot2::geom_point(alpha = 0.7) +   ggrepel::geom_text_repel(     data = label_data_top_donors,     ggplot2::aes(label = donor),       size = 3.5,     segment.color = 'grey50',     min.segment.length = 0,     box.padding = 0.5,     max.overlaps = Inf  ) +   ggplot2::scale_size_continuous(labels = scales::label_number(     scale_cut = scales::cut_short_scale())) +   ggplot2::scale_y_continuous(labels = scales::label_number(     scale_cut = scales::cut_short_scale()),     n.breaks = 5) +   ggplot2::scale_x_continuous(labels = scales::label_number(     scale_cut = scales::cut_short_scale())) +   ggplot2::labs(title = paste0(\"Donor Segmentation for \",  recipient_name),        subtitle = \"Combined value of the relationship based on         **Donor Engagement**, **Alignment Index**, and **Growth Potential** in         relation with funding history\",        x = \"Strategic Priority\",        y = \"Resource Allocation Score\",        color = \"Segment\",        caption = paste0(     \"Indicator interpretation:\",     \"For **Strategic Priority (X-axis):** Higher means a more valuable or      promising relationship.\",     \"The **Resource Allocation Score (Y-axis):** is an indicator of whether the     donor is 'under-resourced'. It is calculated as Strategic Priority divided     by the total historical funding (total). Higher scores suggest the donor has     high priority but currently receives relatively low engagement effort.\",     \"The size of the bubble reflects the **Total Funding Amount** to all      destinations, showing the donor's overall financial capacity.\",     \"\\n\\n\",     \"Each bubble represents a donor, classified into a segment based on its      position on the matrix.\",     \"This **Donor Segmentation Matrix** classifies donors into five categories     based on two calculated scores:\",     \"1. **Strategic Stars (Top-Right, High Y):** High Strategic Priority, but      currently under-resourced by our organization (high potential for increased     funding/engagement).\",     \"2. **Core Partners (Right, Lower Y):** High Strategic Priority and already     well-resourced (maintain stable, high-value relationship).\",     \"3. **Emerging Opportunities (Middle):** Medium Strategic Priority and good     growth potential (focus on growth).\",     \"4. **Divestment Candidates (Bottom-Left):** Low Strategic Priority      (low returns on effort).\",     \"5. **Maintenance Accounts (Bottom-Right, High Total):** Lower Strategic      Priority, but historically large and stable contributors (focus on stable     retention and minimizing effort).\",     \"\\n\\n\",     \"**Data Source**: OCHA Financial Tracking Service (FTS) API.\")) +   unhcrthemes::theme_unhcr(grid = TRUE, axis =  FALSE, axis_title = TRUE, legend=TRUE)"},{"path":"/reference/analysis_fit_opportunity_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit a simple Funding Opportunity Model (logistic) — analysis_fit_opportunity_model","title":"Fit a simple Funding Opportunity Model (logistic) — analysis_fit_opportunity_model","text":"Fits logistic regression predict whether donor fund recipient year t+1 based features prepared prepare_opportunity_dataset().","code":""},{"path":"/reference/analysis_fit_opportunity_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit a simple Funding Opportunity Model (logistic) — analysis_fit_opportunity_model","text":"","code":"analysis_fit_opportunity_model(features, min_year = NULL)"},{"path":"/reference/analysis_fit_opportunity_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit a simple Funding Opportunity Model (logistic) — analysis_fit_opportunity_model","text":"features Dataframe produced analysis_prepare_opportunity_dataset(). min_year Minimum year use training (filters older data).","code":""},{"path":"/reference/analysis_fit_opportunity_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit a simple Funding Opportunity Model (logistic) — analysis_fit_opportunity_model","text":"glm object (binomial) training frame (list components model, data).","code":""},{"path":"/reference/analysis_fit_opportunity_model.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fit a simple Funding Opportunity Model (logistic) — analysis_fit_opportunity_model","text":"Label construction: response = 1 total_amount > 0 year t+1 donor-recipient.","code":""},{"path":"/reference/analysis_fit_opportunity_model.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit a simple Funding Opportunity Model (logistic) — analysis_fit_opportunity_model","text":"","code":"features <- analysis_prepare_opportunity_dataset(flows) #> Warning: There was 1 warning in `dplyr::summarise()`. #> ℹ In argument: `max_cluster_share = max(cluster_share, na.rm = TRUE)`. #> ℹ In group 347: `donor = \"European Commission's Humanitarian Aid and Civil #>   Protection Department\"`, `recipient = \"Emergency Shelter and NFI\"`, `year = #>   2021`. #> Caused by warning in `max()`: #> ! no non-missing arguments to max; returning -Inf model_results <- analysis_fit_opportunity_model(features, min_year = NULL) train_data <- model_results$train model <- model_results$model train_data$predicted_prob <- predict(model, newdata = train_data, type = \"response\")  ggplot2::ggplot(train_data,                  ggplot2::aes(x = predicted_prob, fill = factor(opportunity))) +   ggplot2::geom_density(alpha = 0.5) +   ggplot2::scale_y_continuous(       labels = scales::label_number(scale_cut = scales::cut_short_scale())     ) +   ggplot2::scale_x_continuous(       labels = scales::label_number(scale_cut = scales::cut_short_scale())     ) +   ggplot2::labs(title = \"Ability to forecast potential funding streams based on previous years\",     subtitle = \"Comparing the probability score assigned by the model against the     actual outcome \\n (Funding Occurred = 1, No Funding = 0).\",        x = \"Predicted Probability\",        fill = \"Actual Opportunity\",     caption = paste0(\"The X-axis shows the **Predicted Probability**     (a score from 0 to 1) that a donor will fund a recipient in the next year.      The two colored curves show the distribution of this score based on the      **Actual Outcome** for that relationship-year observation:  **Blue Curve     (0: No Funding):** Represents relationships where the donor *did not* fund     the recipient next year. Most of these probabilities should cluster near 0.     **Red Curve (1: Funding Occurred):** Represents relationships where      the donor *did* fund the recipient next year.      Most of these probabilities should cluster near 1.\",     \"\\n\\n\",     \"**Data Source**: OCHA Financial Tracking Service (FTS) API.\")) +   unhcrthemes::theme_unhcr(grid = TRUE, axis =  TRUE, axis_title = TRUE, legend=TRUE)"},{"path":"/reference/analysis_funding_forecast.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate historical amounts by month and forecast future funding for a donor or recipient. — analysis_funding_forecast","title":"Aggregate historical amounts by month and forecast future funding for a donor or recipient. — analysis_funding_forecast","text":"Aggregate historical amounts month forecast future funding donor recipient.","code":""},{"path":"/reference/analysis_funding_forecast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate historical amounts by month and forecast future funding for a donor or recipient. — analysis_funding_forecast","text":"","code":"analysis_funding_forecast(flows, by = c(\"donor\", \"recipient\"), name, h = 12)"},{"path":"/reference/analysis_funding_forecast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate historical amounts by month and forecast future funding for a donor or recipient. — analysis_funding_forecast","text":"flows Dataframe flows. Character: \"donor\" \"recipient\" (entity forecast ). name Character: name donor recipient forecast. h Integer: months forecast ahead (default 12).","code":""},{"path":"/reference/analysis_funding_forecast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Aggregate historical amounts by month and forecast future funding for a donor or recipient. — analysis_funding_forecast","text":"list components: ts (monthly ts), model (fitted ARIMA), forecast (forecast object)","code":""},{"path":"/reference/analysis_funding_forecast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Aggregate historical amounts by month and forecast future funding for a donor or recipient. — analysis_funding_forecast","text":"","code":"donor <- \"Germany\" forecast_result <- analysis_funding_forecast(flows,                                              by = \"donor\",                                               name = donor)  ggplot2::autoplot(forecast_result$forecast) +    ggplot2::scale_y_continuous(labels = scales::label_number(     scale_cut = scales::cut_short_scale())) +   ggplot2::labs(title = paste0(\"Funding Forecast of monthly funding amounts from \",   donor),        subtitle= \"Using an Autoregressive Integrated Moving Average time        series model (ARIMA).\",        x = \"Year\",        y = \"Funding Amount (USD)\",        caption = paste0(     \"Indicator interpretation:\",     \"The **dark line** represents the historical monthly funding data used for     training the model. The **lighter line** extending to the right shows     the **future forecast**.\",     \"\\n\\n\",          \"The **shaded areas** surrounding the forecast line represent      the **prediction intervals**: the **darker shade** is the 80% confidence      interval, and the **lighter shade** is the 95% confidence interval.      These areas indicate the likely range of future funding, showing the     uncertainty inherent in the forecast: the wider the shade,      the less certain the prediction.\",     \"\\n\\n\",     \"**Data Source**: OCHA Financial Tracking Service (FTS) API.\")) +   unhcrthemes::theme_unhcr(grid = TRUE,                             axis =  FALSE,                             axis_title = FALSE,                            legend=TRUE)"},{"path":"/reference/analysis_portfolio_scores.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Portfolio Scores for a Recipient — analysis_portfolio_scores","title":"Compute Portfolio Scores for a Recipient — analysis_portfolio_scores","text":"Computes portfolio score donor relative given recipient using formula:","code":""},{"path":"/reference/analysis_portfolio_scores.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Portfolio Scores for a Recipient — analysis_portfolio_scores","text":"","code":"analysis_portfolio_scores(flows, recipient_name, top_n = 10)"},{"path":"/reference/analysis_portfolio_scores.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Portfolio Scores for a Recipient — analysis_portfolio_scores","text":"flows Dataframe flows documented (must include sourceObjects, destinationObjects, amountUSD, budgetYear). recipient_name Character scalar - recipient destination name score donors (match exactly). top_n Optional integer - return top N donors portfolio score (default NULL = ).","code":""},{"path":"/reference/analysis_portfolio_scores.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Portfolio Scores for a Recipient — analysis_portfolio_scores","text":"Tibble columns: donor, donor_engagement, funding_amount, donor_concentration_risk, strategic_alignment, Portfolio_Score","code":""},{"path":"/reference/analysis_portfolio_scores.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute Portfolio Scores for a Recipient — analysis_portfolio_scores","text":"Portfolio_Score = SUM( Donor_engagement * Funding_amount * (1 - Donor_concentration_risk) * Strategic_alignment ) : Donor_engagement = fraction years donor funded recipient (0-1) Funding_amount = sum(amountUSD) donor -> recipient Donor_concentration_risk = HHI donor across destinations (0-1) higher = concentrated implies risk Strategic_alignment = share donor funding recipient's primary GlobalCluster (0-1) - best-effort derived Assumptions & notes: recipient matched destinationObjects.name (destination type \"Location\" \"Organization\" \"Plan\"). strategic alignment computed comparing GlobalCluster names present destinationObjects recipient vs donor. HHI calculated per donor across destination names (locations/plans).","code":""},{"path":"/reference/analysis_portfolio_scores.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute Portfolio Scores for a Recipient — analysis_portfolio_scores","text":"","code":"scores <- analysis_portfolio_scores(flows,                 recipient_name=\"United Nations High Commissioner for Refugees\",                            top_n = 10)  ggplot2::ggplot(scores, ggplot2::aes(x = reorder(donor, Portfolio_Score),                                       y = Portfolio_Score)) +   ggplot2::geom_col( ggplot2::aes(fill = Portfolio_Score)) +   ggplot2::coord_flip() +   ggplot2::labs(title = \"Donor Portfolio Scores for UNHCR\",         subtitle = \"Measure of the combined quality, consistency, and strategic         alignment of a donor's funding relationship\",        x = \"Donor\", y = \"Portfolio Score\",        caption = paste(     \"Indicator interpretation:\",     \"The **Portfolio Score**  is calculated as: **Donor Engagement** $\\\\times$      **Funding Amount** $\\\\times$ (1 - **Donor Concentration Risk**) $\\\\times$      **Strategic Alignment**. A higher score indicates a more valuable and      reliable funding partner for the recipient.\",     \"\\n\\n\",          \" The total bar      length represents the Portfolio Score, which is driven by four components:      **Donor Engagement** (consistency of giving over time), **Funding Amount**      (total USD provided), **Donor Concentration Risk** (inverse of funding      diversification across all destinations), and **Strategic Alignment**      (share of donor funding aligned with the recipient's primary Global      Clusters).\",     \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies key and potentially most reliable donors whose funding      relationship is both substantial and strategically aligned with the     recipient's mandate. It helps the recipient organization prioritize      relationship management and provides donors with a metric to assess the     quality of their long-term partnerships.\",      \"\\n\\n\",     \"**Data Source**: OCHA Financial Tracking Service (FTS) API.\")) +     ggplot2::scale_y_continuous(       labels = scales::label_number(scale_cut = scales::cut_short_scale())     ) +   unhcrthemes::theme_unhcr(grid = \"X\", axis =  \"Y\", axis_title = FALSE,                            legend=FALSE)"},{"path":"/reference/analysis_prepare_opportunity_dataset.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare Funding Opportunity Dataset — analysis_prepare_opportunity_dataset","title":"Prepare Funding Opportunity Dataset — analysis_prepare_opportunity_dataset","text":"Aggregates flows donor-recipient-year observations prepares features opportunity prediction model. Features include: donor funding cycle timing (mean decision month) historical funding patterns (growth recent years) simple NLP signals description/keywords (presence crisis keywords) sector funding trends (share global clusters)","code":""},{"path":"/reference/analysis_prepare_opportunity_dataset.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare Funding Opportunity Dataset — analysis_prepare_opportunity_dataset","text":"","code":"analysis_prepare_opportunity_dataset(   flows,   lookback_years = 3,   crisis_keywords = c(\"refugees\", \"refugee\", \"displacement\", \"displaced\", \"returnees\",     \"idps\", \"protection\", \"conflict\", \"vulnerable\") )"},{"path":"/reference/analysis_prepare_opportunity_dataset.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare Funding Opportunity Dataset — analysis_prepare_opportunity_dataset","text":"flows Dataframe flows. lookback_years Integer number past years compute trends (default 3). crisis_keywords Character vector keywords flag global events (default common terms).","code":""},{"path":"/reference/analysis_prepare_opportunity_dataset.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare Funding Opportunity Dataset — analysis_prepare_opportunity_dataset","text":"tibble donor, recipient, year, features.","code":""},{"path":"/reference/analysis_prepare_opportunity_dataset.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prepare Funding Opportunity Dataset — analysis_prepare_opportunity_dataset","text":"function returns tidy dataframe suitable model training.","code":""},{"path":"/reference/analysis_prepare_opportunity_dataset.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prepare Funding Opportunity Dataset — analysis_prepare_opportunity_dataset","text":"","code":"crisis_keywords = c(\"refugees\", \"refugee\",\"displacement\", \"displaced\",                          \"returnees\",\"idps\",                         \"protection\", \"conflict\", \"vulnerable\")  features <- analysis_prepare_opportunity_dataset( flows,     lookback_years = 3,     crisis_keywords = crisis_keywords) #> Warning: There was 1 warning in `dplyr::summarise()`. #> ℹ In argument: `max_cluster_share = max(cluster_share, na.rm = TRUE)`. #> ℹ In group 347: `donor = \"European Commission's Humanitarian Aid and Civil #>   Protection Department\"`, `recipient = \"Emergency Shelter and NFI\"`, `year = #>   2021`. #> Caused by warning in `max()`: #> ! no non-missing arguments to max; returning -Inf  # Filter for non-NA growth, arrange by descending growth, and take the top 5. label_data_top <- features |>   dplyr::filter(!is.na(pct_growth)) |>   dplyr::arrange(dplyr::desc(pct_growth)) |>   dplyr::slice_head(n = 3) |>   dplyr::mutate(donor_wrapped = stringr::str_wrap(paste0(donor, \" --> \",                                                   recipient),                                            width = 45))   ggplot2::ggplot(features, ggplot2::aes(x = total_amount, y = pct_growth/100)) +   ggplot2::geom_point(alpha = 0.5) +   ggrepel::geom_text_repel(  data = label_data_top,                               ggplot2::aes(label = donor_wrapped),      size = 2.5, segment.color = 'grey50',      min.segment.length = 0, box.padding = 0.5 ) +   ggplot2::scale_x_log10(       labels = scales::label_number(scale_cut = scales::cut_short_scale())) +   ggplot2::scale_y_continuous(labels = scales::label_percent()  ) +   ggplot2::labs(     title = \"Funding Opportunity Analysis: Amount vs. Growth\",     subtitle = paste0(             \"Focusing on the following keywords within project description: \",             paste(crisis_keywords, collapse = \", \")         ),     x = \"Total Amount (log scale)\",     y = \"Percentage Growth\",     caption= paste0(       \"Indicator interpretation: Points in the top-right quadrant indicate        high-value future opportunities.\", \"\\n\\n\",     \"**Data Source**: OCHA Financial Tracking Service (FTS) API.\")) +   unhcrthemes::theme_unhcr(grid = TRUE, axis = TRUE,                             axis_title = TRUE, legend = TRUE)   #> Warning: log-10 transformation introduced infinite values. #> Warning: Removed 6559 rows containing missing values or values outside the scale range #> (`geom_point()`)."},{"path":"/reference/analysis_systemic_network_insights.html","id":null,"dir":"Reference","previous_headings":"","what":"Systemic: Network Density and Granularity Insights — analysis_systemic_network_insights","title":"Systemic: Network Density and Granularity Insights — analysis_systemic_network_insights","text":"Calculates key metrics funding network structure, including overall density, density time (year), granularity (density core links vs. total links).","code":""},{"path":"/reference/analysis_systemic_network_insights.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Systemic: Network Density and Granularity Insights — analysis_systemic_network_insights","text":"","code":"analysis_systemic_network_insights(flows, core_threshold = 1e+05)"},{"path":"/reference/analysis_systemic_network_insights.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Systemic: Network Density and Granularity Insights — analysis_systemic_network_insights","text":"flows dataframe including sourceObjects, destinationObjects, budgetYear. core_threshold Numeric: Minimum funding amount (USD) link considered \"Core\". Default 100000 USD.","code":""},{"path":"/reference/analysis_systemic_network_insights.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Systemic: Network Density and Granularity Insights — analysis_systemic_network_insights","text":"tibble key network metrics: Overall Density, Density Year, Core Density, Granularity.","code":""},{"path":"/reference/analysis_systemic_network_insights.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Systemic: Network Density and Granularity Insights — analysis_systemic_network_insights","text":"","code":"network_insights <- analysis_systemic_network_insights(flows)  density_trend_data <- network_insights$Density_Trend   ggplot2::ggplot(network_insights$Density_Trend, ggplot2::aes(x = year, y = Density_by_Year)) +   ggplot2::geom_line(color = \"#4361EE\", size = 1.2) +   ggplot2::geom_point(color = \"#4361EE\", size = 3) +   ggplot2::geom_smooth(method = \"lm\", se = FALSE, linetype = \"dashed\",                color = \"grey50\") +   ggplot2::scale_y_continuous(labels = scales::percent,                                limits = c(0,              max(network_insights$Density_Trend$Density_by_Year) * 1.1)) +   ggplot2::scale_x_continuous(breaks = unique(network_insights$Density_Trend$year)) +   ggplot2::labs(     title = \"Evolution of Funding Network Connectivity (Donor-Recipient Density)\",     subtitle = \"Tracking the percentage of possible donor-recipient links that      were actually funded each year.\",     x = \"Year\",     y = \"Network Density (%)\",     caption = paste0(     \"Indicator interpretation:\",     \"This visualization tracks the **Network Density** of the funding ecosystem     over time. Density is a measure of **connectivity**: it represents the     percentage of all theoretically possible unique donor-to-recipient     relationships that actually received funding in a given year.      The dashed line shows the long-term trend.\",     \"\\n\\n\",          \"An **increasing density trend** suggests the ecosystem is becoming more     distributed and interconnected, which may reduce risk reliance on a few key     links. A **decreasing density trend** suggests the network is retracting or     consolidating.      This helps us assess the maturity and fragmentation of the funding system.\",      \"\\n\\n\",          \"**Data Source**: OCHA Financial Tracking Service (FTS) API.\")  ) +   unhcrthemes::theme_unhcr(     grid = \"Y\",     axis = TRUE,     axis_title = TRUE,     legend = FALSE   ) #> Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0. #> ℹ Please use `linewidth` instead. #> `geom_smooth()` using formula = 'y ~ x'"},{"path":"/reference/analysis_wordcloud_from_flows.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate a Word Cloud from Flow Descriptions — analysis_wordcloud_from_flows","title":"Generate a Word Cloud from Flow Descriptions — analysis_wordcloud_from_flows","text":"Aggregates flow descriptions, cleans text, generates word cloud. Optionally facets word cloud generation budget year.","code":""},{"path":"/reference/analysis_wordcloud_from_flows.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate a Word Cloud from Flow Descriptions — analysis_wordcloud_from_flows","text":"","code":"analysis_wordcloud_from_flows(   flows,   facet_by_year = FALSE,   min_freq = 5,   max_words = 100,   stopwords = c(\"project\", \"response\", \"support\", \"activities\", \"million\", \"allocation\",     \"reserve\", \"usd\", \"flow\", \"end\", \"start\", \"standard\", \"date\", \"code\", \"type\",     \"humanitarian\", \"region\", \"plan\", \"humanitaire\", \"r<c3><a9>ponse\") )"},{"path":"/reference/analysis_wordcloud_from_flows.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate a Word Cloud from Flow Descriptions — analysis_wordcloud_from_flows","text":"flows Dataframe flows. facet_by_year Logical scalar: TRUE, returns list word clouds, one unique budget year. FALSE, returns single word cloud descriptions combined. min_freq Integer: Minimum frequency word included cloud. max_words Integer: Maximum number words display cloud. stopwords Character vector: Additional words remove (beyond standard English stopwords).","code":""},{"path":"/reference/analysis_wordcloud_from_flows.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate a Word Cloud from Flow Descriptions — analysis_wordcloud_from_flows","text":"wordcloud2 object (facet_by_year=FALSE) named list wordcloud2 objects (facet_by_year=TRUE).","code":""},{"path":"/reference/analysis_wordcloud_from_flows.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate a Word Cloud from Flow Descriptions — analysis_wordcloud_from_flows","text":"","code":"analysis_wordcloud_from_flows(flows, facet_by_year = FALSE)  {\"x\":{\"word\":[\"emergency\",\"protection\",\"conflict\",\"assistance\",\"health\",\"vulnerable\",\"services\",\"populations\",\"displacement\",\"food\",\"communities\",\"integrated\",\"lifesaving\",\"affected\",\"needs\",\"nutrition\",\"réponse\",\"education\",\"wash\",\"refugees\",\"first\",\"access\",\"sudan\",\"multisectoral\",\"provision\",\"security\",\"action\",\"children\",\"disaster\",\"crisis\",\"areas\",\"people\",\"women\",\"rapid\",\"violence\",\"contribution\",\"conflictaffected\",\"host\",\"climate\",\"resilience\",\"south\",\"strengthening\",\"ukraine\",\"displaced\",\"natural\",\"shelter\",\"multisectorielle\",\"emergencies\",\"crises\",\"syria\",\"local\",\"besoins\",\"yemen\",\"population\",\"idps\",\"affectées\",\"refugee\",\"gbv\",\"regional\",\"republic\",\"afghanistan\",\"water\",\"cash\",\"enhancing\",\"fund\",\"child\",\"violenceclashes\",\"cerf\",\"gaza\",\"drought\",\"returnees\",\"coordination\",\"communautés\",\"providing\",\"girls\",\"state\",\"community\",\"multisector\",\"inclusive\",\"preparedness\",\"risk\",\"safe\",\"livelihoods\",\"north\",\"central\",\"santé\",\"crise\",\"ocha\",\"venezuela\",\"africa\",\"families\",\"congo\",\"nigeria\",\"province\",\"lebanon\",\"somalia\",\"hôtes\",\"improving\",\"quality\",\"west\"],\"freq\":[6807,4722,4286,3723,3003,2612,2523,2517,2456,2389,2306,2148,2086,2024,1823,1780,1593,1446,1364,1340,1329,1309,1301,1253,1232,1209,1165,1155,1154,1124,1025,1025,994,977,957,955,951,947,916,896,875,843,824,797,789,742,738,718,712,708,705,699,692,688,674,661,655,651,646,646,645,633,623,622,606,600,597,592,586,575,557,548,543,540,526,523,520,514,512,512,511,510,506,504,494,485,479,473,456,453,451,447,447,445,441,440,437,436,436,431],\"fontFamily\":\"Segoe UI\",\"fontWeight\":\"bold\",\"color\":\"random-dark\",\"minSize\":0,\"weightFactor\":0.01851035698545615,\"backgroundColor\":\"white\",\"gridSize\":0,\"minRotation\":-0.7853981633974483,\"maxRotation\":0.7853981633974483,\"shuffle\":true,\"rotateRatio\":0.5,\"shape\":\"circle\",\"ellipticity\":0.8,\"figBase64\":null,\"hover\":null},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"function(el,x){\\n                        console.log(123);\\n                        if(!iii){\\n                          window.location.reload();\\n                          iii = False;\\n\\n                        }\\n  }\",\"data\":null}]}}# Returns a named list of word cloud objects yearly_clouds <- analysis_wordcloud_from_flows(flows, facet_by_year = TRUE) #> Warning: no non-missing arguments to max; returning -Inf #> Warning: no non-missing arguments to max; returning -Inf #> Warning: no non-missing arguments to max; returning -Inf #> Warning: no non-missing arguments to max; returning -Inf #> Warning: no non-missing arguments to max; returning -Inf  # To view the cloud for a specific year   yearly_clouds[[\"2015\"]]  {\"x\":{\"word\":[],\"freq\":[],\"fontFamily\":\"Segoe UI\",\"fontWeight\":\"bold\",\"color\":\"random-dark\",\"minSize\":0,\"weightFactor\":-0,\"backgroundColor\":\"white\",\"gridSize\":0,\"minRotation\":-0.7853981633974483,\"maxRotation\":0.7853981633974483,\"shuffle\":true,\"rotateRatio\":0.5,\"shape\":\"circle\",\"ellipticity\":0.8,\"figBase64\":null,\"hover\":null},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"function(el,x){\\n                        console.log(123);\\n                        if(!iii){\\n                          window.location.reload();\\n                          iii = False;\\n\\n                        }\\n  }\",\"data\":null}]}}yearly_clouds[[\"2024\"]]  {\"x\":{\"word\":[\"protection\",\"assistance\",\"emergency\",\"health\",\"populations\",\"vulnerable\",\"services\",\"affected\",\"communities\",\"integrated\",\"réponse\",\"lifesaving\",\"conflict\",\"needs\",\"education\",\"food\",\"refugees\",\"nutrition\",\"access\",\"crisis\",\"sudan\",\"people\",\"multisectoral\",\"children\",\"strengthening\",\"violence\",\"host\",\"provision\",\"action\",\"wash\",\"displaced\",\"afghanistan\",\"security\",\"resilience\",\"disaster\",\"ukraine\",\"population\",\"crises\",\"south\",\"areas\",\"rapid\",\"affectées\",\"preparedness\",\"refugee\",\"conflictaffected\",\"central\",\"syria\",\"multisector\",\"colombia\",\"contribution\",\"local\",\"regional\",\"republic\",\"cash\",\"enhancing\",\"women\",\"coordination\",\"improving\",\"basic\",\"management\",\"crise\",\"yemen\",\"comprehensive\",\"mozambique\",\"child\",\"displacement\",\"providing\",\"community\",\"inclusive\",\"supporting\",\"emergencies\",\"vulnérables\",\"idps\",\"mali\",\"shelter\",\"province\",\"urgence\",\"appeal\",\"besoins\",\"crisisaffected\",\"programme\",\"multisectorielle\",\"nord\",\"returnees\",\"venezuela\",\"intégrée\",\"nigeria\",\"climate\",\"ethiopia\",\"north\",\"development\",\"safe\",\"girls\",\"quality\",\"somalia\",\"déplacées\",\"households\",\"sexual\",\"africa\",\"based\"],\"freq\":[973,770,655,590,561,537,521,475,440,393,328,306,293,293,284,281,280,278,265,252,247,243,240,230,221,218,215,215,214,208,188,177,175,173,170,167,165,163,161,160,159,157,156,156,149,146,146,143,140,140,140,137,135,131,131,131,127,121,119,117,116,116,112,112,110,110,109,108,106,106,105,103,101,101,100,98,98,95,95,93,93,92,92,92,91,89,88,87,87,87,86,86,85,84,83,82,80,79,78,78],\"fontFamily\":\"Segoe UI\",\"fontWeight\":\"bold\",\"color\":\"random-dark\",\"minSize\":0,\"weightFactor\":0.1294964028776978,\"backgroundColor\":\"white\",\"gridSize\":0,\"minRotation\":-0.7853981633974483,\"maxRotation\":0.7853981633974483,\"shuffle\":true,\"rotateRatio\":0.5,\"shape\":\"circle\",\"ellipticity\":0.8,\"figBase64\":null,\"hover\":null},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"function(el,x){\\n                        console.log(123);\\n                        if(!iii){\\n                          window.location.reload();\\n                          iii = False;\\n\\n                        }\\n  }\",\"data\":null}]}}yearly_clouds[[\"2025\"]]  {\"x\":{\"word\":[\"emergency\",\"conflict\",\"protection\",\"assistance\",\"displacement\",\"health\",\"vulnerable\",\"populations\",\"food\",\"services\",\"lifesaving\",\"integrated\",\"communities\",\"nutrition\",\"needs\",\"first\",\"affected\",\"réponse\",\"wash\",\"multisectoral\",\"provision\",\"disaster\",\"sudan\",\"education\",\"refugees\",\"access\",\"rapid\",\"security\",\"children\",\"climate\",\"areas\",\"conflictaffected\",\"natural\",\"crisis\",\"contribution\",\"people\",\"multisectorielle\",\"south\",\"violenceclashes\",\"besoins\",\"action\",\"emergencies\",\"host\",\"shelter\",\"resilience\",\"idps\",\"cerf\",\"strengthening\",\"drought\",\"affectées\",\"displaced\",\"syria\",\"ukraine\",\"republic\",\"yemen\",\"water\",\"communautés\",\"violence\",\"gaza\",\"returnees\",\"fund\",\"postconflict\",\"cash\",\"regional\",\"enhancing\",\"cholera\",\"population\",\"refugee\",\"afghanistan\",\"child\",\"congo\",\"santé\",\"women\",\"hôtes\",\"gbv\",\"state\",\"north\",\"crise\",\"coordination\",\"providing\",\"safe\",\"provinces\",\"underfunded\",\"risk\",\"province\",\"urgence\",\"ocha\",\"crises\",\"nigeria\",\"flood\",\"inclusive\",\"vulnérables\",\"central\",\"families\",\"west\",\"africa\",\"hygiene\",\"venezuela\",\"somalia\",\"darfur\"],\"freq\":[5826,3829,3145,2585,2249,1833,1757,1732,1698,1638,1622,1536,1462,1362,1354,1311,1222,1206,1014,952,901,884,872,869,865,818,787,781,750,734,712,701,696,670,668,664,631,604,597,593,583,570,555,542,526,515,504,483,479,476,474,472,466,464,462,457,454,448,436,430,420,420,411,407,406,404,400,399,391,391,379,379,371,369,364,358,354,348,346,346,337,333,326,324,318,312,311,308,307,306,301,300,299,298,298,297,296,295,294,289],\"fontFamily\":\"Segoe UI\",\"fontWeight\":\"bold\",\"color\":\"random-dark\",\"minSize\":0,\"weightFactor\":0.02162718846549948,\"backgroundColor\":\"white\",\"gridSize\":0,\"minRotation\":-0.7853981633974483,\"maxRotation\":0.7853981633974483,\"shuffle\":true,\"rotateRatio\":0.5,\"shape\":\"circle\",\"ellipticity\":0.8,\"figBase64\":null,\"hover\":null},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"function(el,x){\\n                        console.log(123);\\n                        if(!iii){\\n                          window.location.reload();\\n                          iii = False;\\n\\n                        }\\n  }\",\"data\":null}]}}"},{"path":"/reference/clean_llm_response.html","id":null,"dir":"Reference","previous_headings":"","what":"Clean LLM Response — clean_llm_response","title":"Clean LLM Response — clean_llm_response","text":"Remove thinking tags, markdown, artifacts LLM responses Useful Local Open Source Reasoning Small Language Model","code":""},{"path":"/reference/clean_llm_response.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clean LLM Response — clean_llm_response","text":"","code":"clean_llm_response(response, keep_punctuation = TRUE)"},{"path":"/reference/clean_llm_response.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clean LLM Response — clean_llm_response","text":"response Character string LLM response keep_punctuation boolean","code":""},{"path":"/reference/clean_llm_response.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clean LLM Response — clean_llm_response","text":"Cleaned character string","code":""},{"path":"/reference/clean_llm_response.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Clean LLM Response — clean_llm_response","text":"","code":"response <- \"<think> First, I'm a humanitarian data visualization expert. My role includes extracting insights  from visualizations, creating accessible narratives, highlighting patterns relevant to aid efforts, using clear language with emotional resonance. Aligning with constraints: Use plain language, be concise and impactful. Don't rehash  every detail; build narrative depth around 2 key insights maximum in under 30 tokens. <\/think> This visualization tracks a relationship potentially critical for humanitarian logistics:  higher fuel consumption versus increased weight. 车辆设计\" clean_llm_response(response) #> [1] \"This visualization tracks a relationship potentially critical for humanitarian logistics: higher fuel consumption versus increased weight.\""},{"path":"/reference/fetch_fts_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Fetch FTS Flow Data with Pagination — fetch_fts_data","title":"Fetch FTS Flow Data with Pagination — fetch_fts_data","text":"Retrieves FTS flow data specified year, handling API pagination pull available results, just first page.","code":""},{"path":"/reference/fetch_fts_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fetch FTS Flow Data with Pagination — fetch_fts_data","text":"","code":"fetch_fts_data(year = 2023, limit = 1000)"},{"path":"/reference/fetch_fts_data.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Fetch FTS Flow Data with Pagination — fetch_fts_data","text":"data frame funding flow records containing following variables:","code":""},{"path":"/reference/fetch_fts_data.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Fetch FTS Flow Data with Pagination — fetch_fts_data","text":"FTS (Financial Tracking Service) database","code":""},{"path":"/reference/fetch_fts_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fetch FTS Flow Data with Pagination — fetch_fts_data","text":"year Integer. Year fetch data (default: 2023). limit Integer. Maximum number flows per page (API max: 1000).","code":""},{"path":"/reference/fetch_fts_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fetch FTS Flow Data with Pagination — fetch_fts_data","text":"Data frame FTS flows specified criteria.#' dataset containing funding flow information FTS database.","code":""},{"path":"/reference/fetch_fts_data.html","id":"identifiers","dir":"Reference","previous_headings":"","what":"Identifiers","title":"Fetch FTS Flow Data with Pagination — fetch_fts_data","text":"id character Unique identifier row, used updates funding record versionId character Version identifier childFlowIds character FTS database allows funding flows linked together represent funding cascading implementation chain primary donors field implementers. flows chained together way, flow downstream flow viewed referred child flow. child flows parent flow upstream. parentFlowId character FTS database allows funding flows linked together represent funding cascading implementation chain primary donors field implementers. flows chained together way, flow upstream flow viewed referred parent flow. parent flows one child flows downstream. flowType factor Type flow levels: \"Carryover\", \"Parked\", \"Pass \", \"Standard\" refCode character code related grant agreement fund, ideally known donor recipient organizations","code":""},{"path":"/reference/fetch_fts_data.html","id":"report-details","dir":"Reference","previous_headings":"","what":"Report Details","title":"Fetch FTS Flow Data with Pagination — fetch_fts_data","text":"reportDetails list containing: sourceType organization reportChannel date","code":""},{"path":"/reference/fetch_fts_data.html","id":"flow-description","dir":"Reference","previous_headings":"","what":"Flow Description","title":"Fetch FTS Flow Data with Pagination — fetch_fts_data","text":"description character Brief description destination activity/project, location within country, duration grandBargainEarmarkingType character Modality earmarking (Earmarked, Softly earmarked, Tightly earmarked, Unearmarked) contributionType character Type contribution: \"financial\" \"-kind\" reportingStatus character Status humanitarian fund reported per row: \"New Contribution\", \"Top-/Update\", \"Old Contribution\" newMoney logical TRUE/FALSE indicating new money keywords character Keywords associated flow method character Assistance modality: \"Cash Transfer Programming (CTP)\" \"Traditional\" boundary character Boundary classification: \"incoming\", \"internal\", \"outgoing\" onBoundary logical Indicator flow boundary status character Status humanitarian funding: \"pledge\", \"commitment\", \"paid\"","code":""},{"path":"/reference/fetch_fts_data.html","id":"quantity","dir":"Reference","previous_headings":"","what":"Quantity","title":"Fetch FTS Flow Data with Pagination — fetch_fts_data","text":"amountUSD numeric Total Amount US$ fullParkedAmountUSD numeric Full parked amount US$ originalAmount numeric Original amount original currency originalCurrency character Original currency humanitarian fund reported exchangeRate numeric Exchange rate used conversion. blank, FTS uses UN Operational Exchange Rate grant decision date","code":""},{"path":"/reference/fetch_fts_data.html","id":"date","dir":"Reference","previous_headings":"","what":"Date","title":"Fetch FTS Flow Data with Pagination — fetch_fts_data","text":"budgetYear integer Year funding used. FTS works calendar year system (January December) date Date Date submitted FTS decisionDate Date Date grant agreement signing official endorsement donor member state firstReportedDate Date First reported date createdAt Date Record creation date updatedAt Date Record last update date","code":""},{"path":"/reference/fetch_fts_data.html","id":"source-1","dir":"Reference","previous_headings":"","what":"Source","title":"Fetch FTS Flow Data with Pagination — fetch_fts_data","text":"sourceObjects list containing source information : id - Source identifier name - Source name type - Source type: \"Organization\" (Source Organisation), \"Location\" (Location source organisation), \"UsageYear\"","code":""},{"path":"/reference/fetch_fts_data.html","id":"destination","dir":"Reference","previous_headings":"","what":"Destination","title":"Fetch FTS Flow Data with Pagination — fetch_fts_data","text":"destinationObjects list containing destination information : id - Destination identifier name - Destination name type - Destination type: \"Cluster\" (technical area specific coordinated plan), \"GlobalCluster\" (global technical area), \"Location\" (emergency addressed), \"Plan\" (Destination Plan/Appeal), \"UsageYear\", \"Organization\" (Recipient Organisation) behavior - Behavior multiple records type: \"single\" \"shared\" type \"Organization\", additional variables: organizationTypes organizationSubTypes organizationLevels","code":""},{"path":"/reference/fetch_fts_data.html","id":"flow-type-details","dir":"Reference","previous_headings":"","what":"Flow Type Details","title":"Fetch FTS Flow Data with Pagination — fetch_fts_data","text":"Carryover  Parked 'parked' flow refers funding flow initially may allocated specific organizations sectors, additional information forthcoming. 'Parked' funding usually parent flow number linked child flows. Parking parent flow allows children reflect source information linked parent. Parked records either major funding decisions (e.g. ECHO decisions begin large funding envelope without destination organizations) information recipients determined later time (added child flows), multi-year funding records yearly contributions broken child flows 'parked' flow. Pass Pass-funding refers downstream funding allocations (e.g. Donor UN Agency NGO, Donor International NGO Local NGO, etc.) Standard","code":""},{"path":"/reference/fetch_fts_data.html","id":"grand-bargain-earmarking-types","dir":"Reference","previous_headings":"","what":"Grand Bargain Earmarking Types","title":"Fetch FTS Flow Data with Pagination — fetch_fts_data","text":"Unearmarked : Fully flexible core contribution - Financial contribution aid organisation budget, fully flexible (within boundaries set mandates, governing body regulations etc.) B: Fully flexible core contribution CERF - Financial contribution CERF budget, fully flexible within CERF regulations. C: Core contribution - Financial contribution significant part aid organisation's mandate, e.g. restricted humanitarian operations double-mandated organisation. aid organisation can instructed distribute discretion - several strategic objectives/regions/crises avoid entire contribution used one context. Softly earmarked D: Core contribution limitations - Financial contribution, exclusions pertaining small number specific countries. aid organisation can instructed use funding outside certain areas countries. E: Directed geographical region strategic objective - Financial contribution, fully flexible within boundaries strategic objective (e.g. health education) region (e.g. Africa). reflect priorities Strategic Plan approved relevant governing body. F: Directed Country-Based Pooled Fund - Financial contribution directed specific Country-Based Pooled Fund, otherwise fully flexible. Earmarked G: Directed aid organisation's country operations - Financial contribution, directed specific country, otherwise fully flexible. reflect priorities set relevant governing body regarding country operations. H: Directed subobjective/target - Financial contribution, directed subcategories strategic objectives, e.g. health/malaria education /teacher training, without geographical limitations. reflect priorities Strategic Plan approved relevant governing body. Tightly earmarked : Directed specific project - Financial contribution directed specific project specific country. J: Directed geographically thematically, tied financial - Financial contribution, tied certain conditions terms purchase restrictions, directed specific country/region specific objective. instance, financial contribution purchase ABC school feeding X-land. K: Directed geographically thematically, kind - -kind contribution directed specific country/region specific objective. instance, rice school feeding X-land. L: Donor-initiated projects/directed contributions - Financial contribution coupled demand specific project specific country fulfilling donor priorities. reflecting Strategic Plan aid organisation. instance, becomes service provider. also put strain non-project support costs (overhead costs).","code":""},{"path":"/reference/fetch_fts_data.html","id":"reporting-status","dir":"Reference","previous_headings":"","what":"Reporting Status","title":"Fetch FTS Flow Data with Pagination — fetch_fts_data","text":"New Contribution fund reported FTS reporter first time Top-/Update fund reported FTS reporter now update amount /details Old Contribution fund reported FTS reporter change. Used reporters share cumulative reports","code":""},{"path":"/reference/fetch_fts_data.html","id":"method","dir":"Reference","previous_headings":"","what":"Method","title":"Fetch FTS Flow Data with Pagination — fetch_fts_data","text":"Cash Transfer Programming (CTP) Refers programs cash (vouchers goods services) directly provided beneficiaries. CTP can three types: cash, mobile phone transfer vouchers. Traditional Non-cash assistance provided form materials services (.e. food, tents, PSS, secondment staff). FTS refers humanitarian assistance modalities traditional aid.","code":""},{"path":"/reference/fetch_fts_data.html","id":"boundary","dir":"Reference","previous_headings":"","what":"Boundary","title":"Fetch FTS Flow Data with Pagination — fetch_fts_data","text":"Boundaries classify relevant flows categories incoming, internal outgoing. FTS database records flows funding, draws boundaries around (combinations ) flow properties calculate totals. Examples common boundaries response plan/appeal combination (donor affected) country year. Drawing boundary classifies flows database crossing boundary inward (incoming flows), originating terminating within boundary (internal flows), crossing outwards (outgoing flows), fourth category displayed - irrelevant boundary originate terminate outside . incoming Flows cross given search boundary inwards. boundary e.g. affected country year, flows originating donor countries multilateral organisations attributed country incoming flows, carry-previous year. avoid double-counting, incoming flows never added internal flows. internal Flows originating terminating within boundary outgoing Flows originate within terminate outside given search boundary. boundary e.g. affected country year, flows representing carry-overs next year outgoing flows.","code":""},{"path":"/reference/fetch_fts_data.html","id":"status","dir":"Reference","previous_headings":"","what":"Status","title":"Fetch FTS Flow Data with Pagination — fetch_fts_data","text":"pledge non-binding announcement intended contribution allocation donor. recipient organization response plan project necessarily specified. soon commitment reported FTS pledge, amount pledge column reduced accordingly. FTS tables therefore show 'outstanding' ('total original') pledge amount. information reported us directly donors agencies may may include verbal commitments made pledging conferences. commitment binding agreement signed parties approval grant donor member state. Creation contractual obligation regarding funding donor appealing agency; almost always takes form signed contract. crucial stage humanitarian funding: agencies spend money implement funding commitment made. paid money transfer realized. FTS track disbursements/installments.","code":""},{"path":"/reference/fetch_fts_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fetch FTS Flow Data with Pagination — fetch_fts_data","text":"","code":"# flows <- fetch_fts_data(year = 2025) #  # names(flows) # dplyr::glimpse(flows) # nrow(flows) # head(flows,1) #  # #sinew::makeOxygen(flows, add_fields = \"source\") # ## Saving it in the package to avoid constnat API Call # save(flows, file =  here::here(\"data\",\"flows.RData\")) # # Note: significantly better compression could be obtained # #by using R CMD build --resave-data # tools::resaveRdaFiles(here::here(\"data\",\"flows.RData\"),compress=\"bzip2\")"},{"path":"/reference/filter_flows_for_indicators.html","id":null,"dir":"Reference","previous_headings":"","what":"Filter and Normalize FTS Funding Flows for Indicator Computation — filter_flows_for_indicators","title":"Filter and Normalize FTS Funding Flows for Indicator Computation — filter_flows_for_indicators","text":"utility function applies standard set preprocessing filtering rules required computing donor-, recipient-, destination-level indicators FTS (Financial Tracking Service) funding flow data.","code":""},{"path":"/reference/filter_flows_for_indicators.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Filter and Normalize FTS Funding Flows for Indicator Computation — filter_flows_for_indicators","text":"","code":"filter_flows_for_indicators(flows, fromyear = 2020)"},{"path":"/reference/filter_flows_for_indicators.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Filter and Normalize FTS Funding Flows for Indicator Computation — filter_flows_for_indicators","text":"flows tibble dataframe containing FTS funding flows OCHA API fromyear default 2020","code":""},{"path":"/reference/filter_flows_for_indicators.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Filter and Normalize FTS Funding Flows for Indicator Computation — filter_flows_for_indicators","text":"tibble cleaned normalized flows suitable donor-, recipient-, destination-, donor->recipient indicator functions. returned dataset contains incoming, non-parent, non-parked flows numeric budget years.","code":""},{"path":"/reference/filter_flows_for_indicators.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Filter and Normalize FTS Funding Flows for Indicator Computation — filter_flows_for_indicators","text":"FTS data model contains several elements—funding chains, boundaries, parent/child flows, \"parked\" envelopes—must normalized prior aggregation. function enforces official FTS logic ensure indicators computed without double-counting misclassification funding flows. Key filtering rules applied:","code":""},{"path":"/reference/filter_flows_for_indicators.html","id":"-boundary-filtering","dir":"Reference","previous_headings":"","what":"1. Boundary Filtering","title":"Filter and Normalize FTS Funding Flows for Indicator Computation — filter_flows_for_indicators","text":"incoming flows retained. Incoming flows represent funding entering boundary (e.g., affected country + year, appeal, donor-country-year). standard FTS method calculating donor contributions, prevents contamination : Internal flows (money moving within boundary) Outgoing flows (money leaving boundary) Irrelevant flows (fully outside boundary) Boundary filtering ensures flows relevant selected analytical scope enter indicator dataset.","code":""},{"path":"/reference/filter_flows_for_indicators.html","id":"-parent-child-flow-deduplication","dir":"Reference","previous_headings":"","what":"2. Parent/Child Flow Deduplication","title":"Filter and Normalize FTS Funding Flows for Indicator Computation — filter_flows_for_indicators","text":"FTS allows funding flows \"chained\" represent cascading funding (donor -> agency -> partner). Parent flows typically high-level envelopes; child flows represent operational allocations. function: Identifies parents presence one childFlowIds. Removes parent flows dataset. prevents double-counting parent envelopes together child breakdowns ensures operational flows used indicator calculations.","code":""},{"path":"/reference/filter_flows_for_indicators.html","id":"-removal-of-parked-flows","dir":"Reference","previous_headings":"","what":"3. Removal of \"Parked\" Flows","title":"Filter and Normalize FTS Funding Flows for Indicator Computation — filter_flows_for_indicators","text":"Flows flowType == \"Parked\" represent undecided envelopes awaiting breakdown child flows (e.g., large ECHO decisions multi-year envelopes). used : donor funding totals donor–recipient relationships sector geographic alignment indicators function removes entirely, relying instead child flows available.","code":""},{"path":"/reference/filter_flows_for_indicators.html","id":"-budget-year-normalization","dir":"Reference","previous_headings":"","what":"4. Budget Year Normalization","title":"Filter and Normalize FTS Funding Flows for Indicator Computation — filter_flows_for_indicators","text":"budgetYear column converted safely numeric support time-series indicators : funding trends relationship duration consistency indices Non-numeric malformed values converted NA warnings suppressed.","code":""},{"path":"/reference/filter_flows_for_indicators.html","id":"warning","dir":"Reference","previous_headings":"","what":"Warning","title":"Filter and Normalize FTS Funding Flows for Indicator Computation — filter_flows_for_indicators","text":"function removes parent flows parked envelopes design. users require indicators specifically envelope-level commitments, apply custom filter calling function.","code":""},{"path":"/reference/filter_flows_for_indicators.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Filter and Normalize FTS Funding Flows for Indicator Computation — filter_flows_for_indicators","text":"","code":"nrow(flows) #> [1] 22441 cleaned <- filter_flows_for_indicators(flows) nrow(cleaned) #> [1] 11496"},{"path":"/reference/flows.html","id":null,"dir":"Reference","previous_headings":"","what":"FTS Humanitarian Funding Flows Dataset — flows","title":"FTS Humanitarian Funding Flows Dataset — flows","text":"comprehensive dataset humanitarian funding flows UN OCHA Financial Tracking Service (FTS). Contains detailed records funding contributions, allocations, implementation chains across global humanitarian responses. data captures entire funding lifecycle pledges disbursements, including donor behaviors, recipient patterns, strategic funding characteristics.","code":""},{"path":"/reference/flows.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"FTS Humanitarian Funding Flows Dataset — flows","text":"","code":"flows"},{"path":"/reference/flows.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"FTS Humanitarian Funding Flows Dataset — flows","text":"data frame 22441 rows 29 variables: id character Unique identifier funding flow record, used tracking updates modifications funding entry time amountUSD integer Total funding amount US dollars, representing standardized value cross-donor comparison fullParkedAmountUSD integer Complete parked amount US dollars flows temporarily held without specific allocation budgetYear character Calendar year (January-December) funding planned utilized, following FTS's calendar year system childFlowIds list List downstream funding flow identifiers representing cascaded funding implementation chains; child flows receive allocations parent flows contributionType character Type humanitarian contribution: \"financial\" monetary transfers \"-kind\" goods services createdAt character Timestamp indicating funding flow record initially created FTS database date character Date funding information submitted FTS reporting organization decisionDate character Date grant agreement signing donor recipient, official endorsement donor member state - marks commitment point description character Detailed description funded activity/project, including location context, intervention details, implementation timeframe grandBargainEarmarkingType list Classification funding flexibility according Grand Bargain categories: Unearmarked (-C), Softly earmarked (D-F), Earmarked (G-H), Tightly earmarked (-L) exchangeRate double Currency conversion rate applied transform original amount USD; uses UN Operational Exchange Rate specified firstReportedDate character Initial date funding flow first reported FTS, used tracking reporting history flowType character Classification flow structure: \"Carryover\" (previous year funds), \"Parked\" (temporarily unallocated), \"Pass \" (cascaded funding), \"Standard\" (direct allocation) keywords list Thematic tags categorical labels associated funding flow search analysis purposes newMoney logical Indicator whether funding represents new resources (TRUE) versus reallocated reprofiled existing funds (FALSE) originalAmount double Funding amount original currency conversion USD originalCurrency character Currency funding originally provided committed method character Modality assistance delivery: \"Cash Transfer Programming (CTP)\" (cash, mobile, vouchers) \"Traditional\" (-kind goods/services) parentFlowId integer Identifier upstream funding flow flow originates; used trace funding implementation chains status character Funding lifecycle stage: \"pledge\" (non-binding intent), \"commitment\" (binding agreement), \"paid\" (disbursed funds) updatedAt character Timestamp recent modification funding flow record versionId integer Version number tracking sequential updates revisions funding flow information sourceObjects list Nested data structure containing donor/origin information components: id (identifier), name (source name), type (Organization/Location/UsageYear - indicating funding source year) destinationObjects list Nested data structure containing recipient/allocation information components: id, name, type (Cluster/GlobalCluster/Location/Plan/UsageYear/Organization), behavior (single/shared breakdown), organization metadata (types, subtypes, levels) organizational recipients boundary character Classification flow direction relative analysis boundaries: \"incoming\" (crossing inward), \"internal\" (within boundary), \"outgoing\" (crossing outward) onBoundary character Additional specification boundary relationship complex flow categorization reportDetails list Reporting metadata containing: sourceType (information origin), organization (reporting entity), reportChannel (submission method), date (reporting date) refCode character Grant agreement reference code used donors recipients administrative tracking reconciliation","code":""},{"path":"/reference/flows.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"FTS Humanitarian Funding Flows Dataset — flows","text":"https://fts.unocha.org/","code":""},{"path":"/reference/generate_plot_story.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Humanitarian Data Story from ggplot — generate_plot_story","title":"Generate Humanitarian Data Story from ggplot — generate_plot_story","text":"function takes ggplot2 object generates storytelling narrative focused humanitarian insights. uses {ellmer} package call large small language model supported provider.","code":""},{"path":"/reference/generate_plot_story.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Humanitarian Data Story from ggplot — generate_plot_story","text":"","code":"generate_plot_story(   plot,   max_tokens = 30,   provider = NULL,   model = NULL,   clean_response = TRUE )"},{"path":"/reference/generate_plot_story.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Humanitarian Data Story from ggplot — generate_plot_story","text":"plot ggplot object ggplot2. max_tokens Maximum number tokens (approximate) narrative (default = 30). provider Optional character string specifying provider. Options include: \"openai\", \"gemini\", \"anthropic\", \"ollama\", \"azure\". NULL, auto-detect environment keys. model Optional character string specifying model name. Azure, typically deployment name. NULL, default model chosen provider used. clean_response Logical. Whether clean response removing thinking tags artifacts (default = TRUE).","code":""},{"path":"/reference/generate_plot_story.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Humanitarian Data Story from ggplot — generate_plot_story","text":"character string containing storytelling narrative focused humanitarian data.","code":""},{"path":"/reference/generate_plot_story.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate Humanitarian Data Story from ggplot — generate_plot_story","text":"API keys need work offline, simply get ollama look top reasoning models - https://ollama.com/search?c=thinking Setup: Install {ellmer}: install.packages(\"ellmer\") Set API key environment. Azure OpenAI, use standard OpenAI key variable: Sys.setenv(OPENAI_API_KEY = \"<YOUR_AZURE_OPENAI_KEY>\") using Azure, set provider = \"azure\" provide env variables Sys.setenv(AZURE_OPENAI_ENDPOINT = \"<YOUR_AZURE_ENDPOINT>\") Sys.setenv(AZURE_OPENAI_API_VERSION = \"<YOUR_AZURE_OPENAI_API_VERSION>\") best place set .Renviron, can easily edit calling usethis::edit_r_environ()","code":""},{"path":"/reference/generate_plot_story.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate Humanitarian Data Story from ggplot — generate_plot_story","text":"","code":"library(ggplot2) p <- ggplot(mtcars, aes(x = wt, y = mpg)) +    geom_point() +     unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +    labs(title = \"Vehicle Efficiency\",         subtitle = \"Fuel consumption vs weight\",         caption = \"Source: mtcars dataset\")  generate_plot_story(p, provider = \"ollama\", model = \"deepseek-r1\") #> [1] \"This chart shows a clear trend in fuel efficiency and vehicle weight. Lighter cars generally achieve higher fuel economy, measured here by miles per gallon (MPG). There's a strong inverse relationship between the two variables: lower vehicle weight correlates strongly with better fuel consumption performance. Heavy vehicles consume more fuel than is typical for their size.\"  story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # To use as subtitle: p + ggplot2::labs(subtitle = story)"},{"path":"/reference/generate_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Quarto HTML / PDF Country Factsheets in Batch — generate_report","title":"Generate Quarto HTML / PDF Country Factsheets in Batch — generate_report","text":"function renders 'Country_Factsheet' Quarto template list countries, generating report file .","code":""},{"path":"/reference/generate_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Quarto HTML / PDF Country Factsheets in Batch — generate_report","text":"","code":"generate_report(type = \"donor\", name = NULL)"},{"path":"/reference/generate_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Quarto HTML / PDF Country Factsheets in Batch — generate_report","text":"type either donor recipient destination. name name  donor recipient destination NULL batch process ","code":""},{"path":"/reference/generate_report.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Quarto HTML / PDF Country Factsheets in Batch — generate_report","text":"nothing, reports generated specified folder.","code":""},{"path":"/reference/generate_report.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate Quarto HTML / PDF Country Factsheets in Batch — generate_report","text":"","code":"#generate_report(type = \"donor\")"},{"path":"/reference/indicator_cross_donor_systemic_destination_alignment.html","id":null,"dir":"Reference","previous_headings":"","what":"Donors Systemic: Destination Alignment (Optimized) — indicator_cross_donor_systemic_destination_alignment","title":"Donors Systemic: Destination Alignment (Optimized) — indicator_cross_donor_systemic_destination_alignment","text":"Calculates pairwise Jaccard similarity donors based funded destinations (locations clusters). indicates overlap convergence geographic thematic focus.","code":""},{"path":"/reference/indicator_cross_donor_systemic_destination_alignment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Donors Systemic: Destination Alignment (Optimized) — indicator_cross_donor_systemic_destination_alignment","text":"","code":"indicator_cross_donor_systemic_destination_alignment(flows)"},{"path":"/reference/indicator_cross_donor_systemic_destination_alignment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Donors Systemic: Destination Alignment (Optimized) — indicator_cross_donor_systemic_destination_alignment","text":"flows dataframe including least sourceObjects destinationObjects nested data frames.","code":""},{"path":"/reference/indicator_cross_donor_systemic_destination_alignment.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Donors Systemic: Destination Alignment (Optimized) — indicator_cross_donor_systemic_destination_alignment","text":"tibble columns: donor1 First donor pair. donor2 Second donor pair. Destination_Alignment Jaccard similarity (0–1) destinations.","code":""},{"path":"/reference/indicator_cross_donor_systemic_destination_alignment.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Donors Systemic: Destination Alignment (Optimized) — indicator_cross_donor_systemic_destination_alignment","text":"Goal: Measures many destinations common donors relative total unique destinations, producing 0–1 index. function works follows: Filters flows using filter_flows_for_indicators() remove flows included (e.g., parked parents, pass-throughs, --boundary flows). Unnests sourceObjects destinationObjects, keeping donors valid destination types (Cluster, GlobalCluster, Location). Creates list destinations donor. Computes Jaccard similarity unique donor pairs using precomputed lists, avoiding repeated filtering. Returns tibble donor1, donor2, Destination_Alignment.","code":""},{"path":"/reference/indicator_cross_donor_systemic_destination_alignment.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Donors Systemic: Destination Alignment (Optimized) — indicator_cross_donor_systemic_destination_alignment","text":"","code":"# Compute alignment alignment <- indicator_cross_donor_systemic_destination_alignment(flows)  # Viz library(ggplot2) library(dplyr) #>  #> Attaching package: ‘dplyr’ #> The following objects are masked from ‘package:stats’: #>  #>     filter, lag #> The following objects are masked from ‘package:base’: #>  #>     intersect, setdiff, setequal, union   # Compute total funding per donor top_donors <- flows |>   tidyr::unnest(sourceObjects, names_sep = \"_\") |>   dplyr::filter(sourceObjects_type == \"Organization\") |>   dplyr::rename(donor = sourceObjects_name) |>   dplyr::group_by(donor) |>   dplyr::summarise(total_funding = sum(amountUSD, na.rm = TRUE),                    .groups = \"drop\") |>   dplyr::arrange(desc(total_funding)) |>   dplyr::slice_head(n = 15) |>   dplyr::pull(donor)  # Filter alignment to top donors alignment_top <- alignment |>   dplyr::filter(donor1 %in% top_donors, donor2 %in% top_donors) |>     dplyr::mutate(       donor1 = stringr::str_wrap(donor1, width = 40),       donor2 = stringr::str_wrap(donor2, width = 40)     )  # Prepare data for ggplot plot_df <- alignment_top |>   dplyr::mutate(     donor1 = factor(donor1),     donor2 = factor(donor2)   )  # Heatmap ggplot(plot_df, aes(x = donor2, y = donor1, fill = Destination_Alignment)) +   geom_tile(color = \"white\") +   scale_fill_viridis_c(option = \"plasma\", na.value = \"grey80\", limits = c(0, 1)) +   unhcrthemes::theme_unhcr(grid = FALSE, axis =  FALSE, axis_title = FALSE, legend=TRUE) +   theme(axis.text.x = element_text(angle = 45, hjust = 1)) +   labs(     title = \"Top 15 Donors to Destination Alignment\",     x = \"Donor 2\",     y = \"Donor 1\",     fill = \"Jaccard\\nSimilarity\",     caption = paste(     \"Indicator interpretation:\",     \"Jaccard similarity measuring overlap in funded locations/clusters      between donor pairs (0 = no overlap, 1 = identical destination portfolios).\",     \"\\n\\n\",          \"How to read the visualization:\",     \"Heatmap shows pairwise alignment. Dark colors indicate high      geographic/thematic overlap, light colors indicate complementary coverage.\",     \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies donor clusters with similar focus areas, helping coordinate      advocacy and avoid duplication in under-funded crises.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   )"},{"path":"/reference/indicator_destination_dependency.html","id":null,"dir":"Reference","previous_headings":"","what":"Destination-Focused: Dependency Index — indicator_destination_dependency","title":"Destination-Focused: Dependency Index — indicator_destination_dependency","text":"Calculates share destination's total funding comes single largest donor.","code":""},{"path":"/reference/indicator_destination_dependency.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Destination-Focused: Dependency Index — indicator_destination_dependency","text":"","code":"indicator_destination_dependency(flows, destinations_df = NULL)"},{"path":"/reference/indicator_destination_dependency.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Destination-Focused: Dependency Index — indicator_destination_dependency","text":"flows dataframe including sourceObjects, destinationObjects, amountUSD. destinations_df (optional) dataframe destination names merge results .","code":""},{"path":"/reference/indicator_destination_dependency.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Destination-Focused: Dependency Index — indicator_destination_dependency","text":"tibble destination Destination_Dependency_Index (0–1, higher = dependent).","code":""},{"path":"/reference/indicator_destination_dependency.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Destination-Focused: Dependency Index — indicator_destination_dependency","text":"Goal: Measures reliance top donor — .e., share total funding coming largest donor.","code":""},{"path":"/reference/indicator_destination_dependency.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Destination-Focused: Dependency Index — indicator_destination_dependency","text":"","code":"destination <-indicator_destination_dependency(flows) #table(destination$Destination_Dependency_Index)  library(ggplot2) ggplot(destination, aes(x = Destination_Dependency_Index)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Dependency Index\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"Share of total funding from largest single donor (0-1). Higher values      indicate heavy reliance on one donor, creating vulnerability.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows dependency levels. Values near 1 indicate high-risk      single-donor dependencies requiring diversification strategies.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Single-donor dependency creates systemic risk - if that donor changes      priorities, entire crisis responses can be jeopardized.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/reference/indicator_destination_donor_diversity.html","id":null,"dir":"Reference","previous_headings":"","what":"Destination-Focused: Donor Diversity Index — indicator_destination_donor_diversity","title":"Destination-Focused: Donor Diversity Index — indicator_destination_donor_diversity","text":"Calculates diversified destination's funding sources using inverse Herfindahl–Hirschman Index across donors.","code":""},{"path":"/reference/indicator_destination_donor_diversity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Destination-Focused: Donor Diversity Index — indicator_destination_donor_diversity","text":"","code":"indicator_destination_donor_diversity(flows, destinations_df = NULL)"},{"path":"/reference/indicator_destination_donor_diversity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Destination-Focused: Donor Diversity Index — indicator_destination_donor_diversity","text":"flows dataframe destinationObjects, sourceObjects, amountUSD. destinations_df (optional) dataframe destinations merge results .","code":""},{"path":"/reference/indicator_destination_donor_diversity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Destination-Focused: Donor Diversity Index — indicator_destination_donor_diversity","text":"tibble destination Destination_Donor_Diversity_Index.","code":""},{"path":"/reference/indicator_destination_donor_diversity.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Destination-Focused: Donor Diversity Index — indicator_destination_donor_diversity","text":"Goal: Measures diversified funding sources (inverse dependency). Computed using inverse Herfindahl–Hirschman Index (1–HHI) across donors.","code":""},{"path":"/reference/indicator_destination_donor_diversity.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Destination-Focused: Donor Diversity Index — indicator_destination_donor_diversity","text":"","code":"destination <- indicator_destination_donor_diversity(flows) #table(destination$Earmarking_Flexibility)  library(ggplot2) ggplot(destination, aes(x = Destination_Donor_Diversity_Index)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Donor Diversity Index\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"Inverse Herfindahl-Hirschman Index measuring donor diversification      (0=single donor dependency, 1=highly diversified funding base).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows diversification levels. Higher values indicate resilient     funding ecosystems, lower values indicate vulnerability to individual     donor decisions.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Diversified funding reduces crisis vulnerability to donor policy changes     and ensures more stable response capacity during political shifts.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/reference/indicator_destination_donor_retention.html","id":null,"dir":"Reference","previous_headings":"","what":"Destination-Focused: Donor Retention Index — indicator_destination_donor_retention","title":"Destination-Focused: Donor Retention Index — indicator_destination_donor_retention","text":"Calculates proportion donors provided funding destination consecutive years (repeat donors). Goal: Measures proportion donors continue funding destination year year.","code":""},{"path":"/reference/indicator_destination_donor_retention.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Destination-Focused: Donor Retention Index — indicator_destination_donor_retention","text":"","code":"indicator_destination_donor_retention(flows, destinations_df = NULL)"},{"path":"/reference/indicator_destination_donor_retention.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Destination-Focused: Donor Retention Index — indicator_destination_donor_retention","text":"flows dataframe destinationObjects, sourceObjects, budgetYear, amountUSD. destinations_df (optional) dataframe destinations merge results .","code":""},{"path":"/reference/indicator_destination_donor_retention.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Destination-Focused: Donor Retention Index — indicator_destination_donor_retention","text":"tibble destination Destination_Donor_Retention_Index.","code":""},{"path":"/reference/indicator_destination_donor_retention.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Destination-Focused: Donor Retention Index — indicator_destination_donor_retention","text":"","code":"destination <- indicator_destination_donor_retention(flows) #table(destination$Destination_Donor_Retention_Index)  library(ggplot2) ggplot(destination, aes(x = Destination_Donor_Retention_Index)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Donor Retention Index\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"Proportion of donors who continue funding a destination year after year.      Higher values indicate loyal donor bases and sustained engagement.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows retention rates. Higher values indicate stable donor      relationships, lower values indicate high donor turnover and relationship     building needs.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Donor retention reduces transaction costs, builds contextual knowledge,      and enables more effective long-term partnerships in complex crises.\",     \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/reference/indicator_destination_earmarking_flexibility.html","id":null,"dir":"Reference","previous_headings":"","what":"Earmarking Flexibility — indicator_destination_earmarking_flexibility","title":"Earmarking Flexibility — indicator_destination_earmarking_flexibility","text":"Computes weighted average earmarking flexibility index per destination (Unearmarked = 1.0, Softly earmarked = 0.75, Earmarked = 0.5, Tightly earmarked = 0.25).","code":""},{"path":"/reference/indicator_destination_earmarking_flexibility.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Earmarking Flexibility — indicator_destination_earmarking_flexibility","text":"","code":"indicator_destination_earmarking_flexibility(flows, destinations = NULL)"},{"path":"/reference/indicator_destination_earmarking_flexibility.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Earmarking Flexibility — indicator_destination_earmarking_flexibility","text":"flows dataframe destinationObjects, amountUSD, grandBargainEarmarkingType. destinations Optional dataframe merge.","code":""},{"path":"/reference/indicator_destination_earmarking_flexibility.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Earmarking Flexibility — indicator_destination_earmarking_flexibility","text":"tibble destination Earmarking_Flexibility.","code":""},{"path":"/reference/indicator_destination_earmarking_flexibility.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Earmarking Flexibility — indicator_destination_earmarking_flexibility","text":"","code":"destination <- indicator_destination_earmarking_flexibility(flows) #table(destination$Earmarking_Flexibility)  library(ggplot2) ggplot(destination, aes(x = Earmarking_Flexibility)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Earmarking Flexibility\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"Weighted average of earmarking flexibility (1=unearmarked, 0.75=softly     earmarked, 0.5=earmarked, 0.25=tightly earmarked). Higher values indicate      more flexible funding.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows flexibility scores. Higher values indicate destinations      receiving more unearmarked funding for adaptive programming.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Flexible funding enables context-responsive programming, local leadership,      and efficient resource allocation based on evolving needs rather than      rigid donor requirements.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/reference/indicator_destination_funding_diversity.html","id":null,"dir":"Reference","previous_headings":"","what":"Destination-Focused: Funding Diversity Index — indicator_destination_funding_diversity","title":"Destination-Focused: Funding Diversity Index — indicator_destination_funding_diversity","text":"Measures diversified destination's funding base across donors using Shannon entropy amountUSD distribution.","code":""},{"path":"/reference/indicator_destination_funding_diversity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Destination-Focused: Funding Diversity Index — indicator_destination_funding_diversity","text":"","code":"indicator_destination_funding_diversity(flows, destinations_df = NULL)"},{"path":"/reference/indicator_destination_funding_diversity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Destination-Focused: Funding Diversity Index — indicator_destination_funding_diversity","text":"flows dataframe including sourceObjects, destinationObjects, amountUSD. destinations_df (optional) dataframe destination names merge results .","code":""},{"path":"/reference/indicator_destination_funding_diversity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Destination-Focused: Funding Diversity Index — indicator_destination_funding_diversity","text":"tibble destination Destination_Funding_Diversity  (0–1 scale).","code":""},{"path":"/reference/indicator_destination_funding_diversity.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Destination-Focused: Funding Diversity Index — indicator_destination_funding_diversity","text":"Goal: Measures many donors contribute destination — higher = diverse resilient funding base.","code":""},{"path":"/reference/indicator_destination_funding_diversity.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Destination-Focused: Funding Diversity Index — indicator_destination_funding_diversity","text":"","code":"destination <- indicator_destination_funding_diversity(flows) #table(destination$Destination_Funding_Diversity)  library(ggplot2) ggplot(destination, aes(x = Destination_Funding_Diversity)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Funding Diversity\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"Shannon entropy-based measure of funding distribution across donors      (0=single donor dominance, 1=perfect diversity across many donors).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows diversity levels. Higher values indicate resilient funding     ecosystems, lower values indicate concentration risks and vulnerability.\",     \"\\n\\n\",          \"Humanitarian relevance:\",     \"Diverse funding bases protect against individual donor withdrawals and     enable more balanced response coordination across multiple priorities.\",      \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 31 rows containing non-finite outside the scale range (`stat_bin()`)."},{"path":"/reference/indicator_destination_funding_stability.html","id":null,"dir":"Reference","previous_headings":"","what":"Destination-Focused: Funding Stability Index — indicator_destination_funding_stability","title":"Destination-Focused: Funding Stability Index — indicator_destination_funding_stability","text":"Measures stable funding amounts destination time. Computed 1 - coefficient variation annual funding. Goal: Captures predictability funding amounts years (inverse coefficient variation).","code":""},{"path":"/reference/indicator_destination_funding_stability.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Destination-Focused: Funding Stability Index — indicator_destination_funding_stability","text":"","code":"indicator_destination_funding_stability(flows, destinations_df = NULL)"},{"path":"/reference/indicator_destination_funding_stability.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Destination-Focused: Funding Stability Index — indicator_destination_funding_stability","text":"flows dataframe destinationObjects, budgetYear, amountUSD. destinations_df (optional) dataframe destinations merge results .","code":""},{"path":"/reference/indicator_destination_funding_stability.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Destination-Focused: Funding Stability Index — indicator_destination_funding_stability","text":"tibble destination Destination_Funding_Stability_Index.","code":""},{"path":"/reference/indicator_destination_funding_stability.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Destination-Focused: Funding Stability Index — indicator_destination_funding_stability","text":"","code":"destination <- indicator_destination_funding_stability(flows) #table(destination$Destination_Funding_Stability_Index)  library(ggplot2) ggplot(destination, aes(x = Destination_Funding_Stability_Index)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Funding Stability Index\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"1 minus coefficient of variation of annual funding amounts.      1=perfectly stable, lower values=volatile funding,      negative values=high volatility (SD > mean).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows stability patterns. Higher values enable predictable      programming, negative values indicate boom-bust cycles disrupting operations.\",     \"\\n\\n\",          \"Humanitarian relevance:\",     \"Funding stability enables long-term planning, staff retention, and      consistent service delivery rather than reactive emergency-only responses.\",     \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 45 rows containing non-finite outside the scale range (`stat_bin()`)."},{"path":"/reference/indicator_destination_funding_trend.html","id":null,"dir":"Reference","previous_headings":"","what":"Destination-Focused: Funding Growth Trend — indicator_destination_funding_trend","title":"Destination-Focused: Funding Growth Trend — indicator_destination_funding_trend","text":"Computes slope linear regression funding time destination. Goal: Detects whether funding destination increasing decreasing time.","code":""},{"path":"/reference/indicator_destination_funding_trend.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Destination-Focused: Funding Growth Trend — indicator_destination_funding_trend","text":"","code":"indicator_destination_funding_trend(flows, destinations_df = NULL)"},{"path":"/reference/indicator_destination_funding_trend.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Destination-Focused: Funding Growth Trend — indicator_destination_funding_trend","text":"flows dataframe destinationObjects, budgetYear, amountUSD. destinations_df (optional) dataframe destinations merge results .","code":""},{"path":"/reference/indicator_destination_funding_trend.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Destination-Focused: Funding Growth Trend — indicator_destination_funding_trend","text":"tibble destination Destination_Funding_Growth_Trend.","code":""},{"path":"/reference/indicator_destination_funding_trend.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Destination-Focused: Funding Growth Trend — indicator_destination_funding_trend","text":"","code":"destination <- indicator_destination_funding_trend(flows) #table(destination$Destination_Funding_Growth_Trend)  library(ggplot2) ggplot(destination, aes(x = Destination_Funding_Growth_Trend)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Funding Growth Trend\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"Linear regression slope of annual funding over time.      Positive values=increasing funding, negative values=decreasing funding,     zero=stable funding.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows growth/decline patterns. Right of zero indicates expanding     crisis responses, left indicates potential donor fatigue or improving      contexts.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies crises receiving increasing attention vs. those facing funding     declines despite ongoing needs, informing advocacy priorities.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 45 rows containing non-finite outside the scale range (`stat_bin()`)."},{"path":"/reference/indicator_destination_funding_volatility.html","id":null,"dir":"Reference","previous_headings":"","what":"Destination-Focused: Funding Volatility Index — indicator_destination_funding_volatility","title":"Destination-Focused: Funding Volatility Index — indicator_destination_funding_volatility","text":"Calculates volatility funding destination across budgetYear, using coefficient variation (CV) annual totals.","code":""},{"path":"/reference/indicator_destination_funding_volatility.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Destination-Focused: Funding Volatility Index — indicator_destination_funding_volatility","text":"","code":"indicator_destination_funding_volatility(flows, destinations_df = NULL)"},{"path":"/reference/indicator_destination_funding_volatility.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Destination-Focused: Funding Volatility Index — indicator_destination_funding_volatility","text":"flows dataframe including destinationObjects, budgetYear, amountUSD. destinations_df (optional) dataframe destination names merge results .","code":""},{"path":"/reference/indicator_destination_funding_volatility.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Destination-Focused: Funding Volatility Index — indicator_destination_funding_volatility","text":"tibble destination Destination_Funding_Volatility (0–1, 1 = stable).","code":""},{"path":"/reference/indicator_destination_funding_volatility.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Destination-Focused: Funding Volatility Index — indicator_destination_funding_volatility","text":"Goal: Quantifies year--year variability funding amounts destination.","code":""},{"path":"/reference/indicator_destination_funding_volatility.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Destination-Focused: Funding Volatility Index — indicator_destination_funding_volatility","text":"","code":"destination <-indicator_destination_funding_volatility(flows) #table(destination$Destination_Funding_Volatility)  library(ggplot2) ggplot(destination, aes(x = Destination_Funding_Volatility)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Funding Volatility\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"1 minus coefficient of variation of annual funding (0=highly volatile,     1=perfectly stable). Inverse measure of year-to-year funding     unpredictability.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows volatility patterns. Higher values enable predictable      programming, lower values indicate disruptive funding fluctuations.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Funding volatility disrupts staffing, procurement, and program continuity,      reducing operational efficiency and response effectiveness.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 44 rows containing non-finite outside the scale range (`stat_bin()`)."},{"path":"/reference/indicator_destination_modality_balance.html","id":null,"dir":"Reference","previous_headings":"","what":"Destination-Focused: Modality Balance — indicator_destination_modality_balance","title":"Destination-Focused: Modality Balance — indicator_destination_modality_balance","text":"Calculates share cash voucher-based programming (CTP) relative modalities within destination.","code":""},{"path":"/reference/indicator_destination_modality_balance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Destination-Focused: Modality Balance — indicator_destination_modality_balance","text":"","code":"indicator_destination_modality_balance(flows, destinations_df = NULL)"},{"path":"/reference/indicator_destination_modality_balance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Destination-Focused: Modality Balance — indicator_destination_modality_balance","text":"flows dataframe including destinationObjects, method, amountUSD. destinations_df (optional) dataframe destination names merge results .","code":""},{"path":"/reference/indicator_destination_modality_balance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Destination-Focused: Modality Balance — indicator_destination_modality_balance","text":"tibble destination Destination_Modality_Balance (0–1 share CTP).","code":""},{"path":"/reference/indicator_destination_modality_balance.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Destination-Focused: Modality Balance — indicator_destination_modality_balance","text":"Goal: Measures balance cash-based programming traditional modalities, based method variable.","code":""},{"path":"/reference/indicator_destination_modality_balance.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Destination-Focused: Modality Balance — indicator_destination_modality_balance","text":"","code":"destination <- indicator_destination_modality_balance(flows) #table(destination$Destination_Modality_Balance)  library(ggplot2) ggplot(destination, aes(x = Destination_Modality_Balance)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Modality Balance\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"Share of cash-based programming (CTP) relative to all modalities (0-1).     Higher values indicate greater cash modality utilization.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows CTP adoption across destinations. Most destinations cluster     near zero, indicating traditional in-kind programming dominance.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Appropriate modality balance ensures efficient, dignified assistance while     maintaining essential in-kind support where markets are non-functional.\",     \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/reference/indicator_destination_modality_innovation.html","id":null,"dir":"Reference","previous_headings":"","what":"Modality Innovation — indicator_destination_modality_innovation","title":"Modality Innovation — indicator_destination_modality_innovation","text":"Calculates percentage funding destination Cash Transfer Programming (CTP).","code":""},{"path":"/reference/indicator_destination_modality_innovation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Modality Innovation — indicator_destination_modality_innovation","text":"","code":"indicator_destination_modality_innovation(flows, destinations = NULL)"},{"path":"/reference/indicator_destination_modality_innovation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Modality Innovation — indicator_destination_modality_innovation","text":"flows dataframe destinationObjects, amountUSD, method. destinations Optional dataframe merge results .","code":""},{"path":"/reference/indicator_destination_modality_innovation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Modality Innovation — indicator_destination_modality_innovation","text":"tibble destination Modality_Innovation.","code":""},{"path":"/reference/indicator_destination_modality_innovation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Modality Innovation — indicator_destination_modality_innovation","text":"","code":"destination <- indicator_destination_modality_innovation(flows) #table(destination $Recipient_Diversification_Index)  library(ggplot2) ggplot(destination, aes(x = Modality_Innovation)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Modality Innovation\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"Percentage of funding using Cash Transfer Programming (CTP) per destination.     Higher values indicate greater adoption of innovative cash-based approaches.\",     \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows CTP adoption rates across destinations. Right-skewed      distribution indicates most destinations have low CTP usage, few are CTP      leaders.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Cash programming increases efficiency, dignity, and local market benefits.     Identifies destinations where cash coordination capacity may need      strengthening.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/reference/indicator_destination_pipeline_visibility.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipeline Visibility — indicator_destination_pipeline_visibility","title":"Pipeline Visibility — indicator_destination_pipeline_visibility","text":"Measures proportion funding flows per destination extend beyond current year.","code":""},{"path":"/reference/indicator_destination_pipeline_visibility.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipeline Visibility — indicator_destination_pipeline_visibility","text":"","code":"indicator_destination_pipeline_visibility(   flows,   current_year = as.numeric(format(Sys.Date(), \"%Y\")),   destinations = NULL )"},{"path":"/reference/indicator_destination_pipeline_visibility.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipeline Visibility — indicator_destination_pipeline_visibility","text":"flows dataframe destinationObjects, budgetYear, amountUSD. current_year Numeric, current calendar year. destinations Optional dataframe merge.","code":""},{"path":"/reference/indicator_destination_pipeline_visibility.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipeline Visibility — indicator_destination_pipeline_visibility","text":"tibble destination Pipeline_Visibility.","code":""},{"path":"/reference/indicator_destination_pipeline_visibility.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Pipeline Visibility — indicator_destination_pipeline_visibility","text":"","code":"destination <- indicator_destination_pipeline_visibility(flows) #table(destination$Recipient_Diversification_Index)  library(ggplot2) ggplot(destination, aes(x = Pipeline_Visibility)) +   geom_histogram( fill = \"red\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Destination Pipeline Visibility\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"Proportion of funding flows extending beyond current year. Higher values     indicate better forward visibility and multi-year planning capacity.\",     \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows pipeline visibility across destinations. Most destinations     cluster near zero, indicating predominantly annual funding cycles.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Multi-year funding enables strategic programming, staff retention, and     sustainable crisis response rather than short-term emergency patches.\",     \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/reference/indicator_donor_destination_concentration.html","id":null,"dir":"Reference","previous_headings":"","what":"Donor→Destination: Portfolio Concentration Index — indicator_donor_destination_concentration","title":"Donor→Destination: Portfolio Concentration Index — indicator_donor_destination_concentration","text":"Computes concentrated donor's funding portfolio across destinations, using Herfindahl–Hirschman Index (sum squared funding shares).","code":""},{"path":"/reference/indicator_donor_destination_concentration.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Donor→Destination: Portfolio Concentration Index — indicator_donor_destination_concentration","text":"","code":"indicator_donor_destination_concentration(flows, donor_dest_df = NULL)"},{"path":"/reference/indicator_donor_destination_concentration.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Donor→Destination: Portfolio Concentration Index — indicator_donor_destination_concentration","text":"flows dataframe sourceObjects, destinationObjects, amountUSD. donor_dest_df (optional) dataframe donor–destination pairs merge results .","code":""},{"path":"/reference/indicator_donor_destination_concentration.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Donor→Destination: Portfolio Concentration Index — indicator_donor_destination_concentration","text":"tibble donor, DonorDestination_Concentration_Index (0=diverse, 1=concentrated).","code":""},{"path":"/reference/indicator_donor_destination_concentration.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Donor→Destination: Portfolio Concentration Index — indicator_donor_destination_concentration","text":"Goal: Quantifies concentrated (vs diversified) donor’s funding portfolio across destinations using Herfindahl–Hirschman Index (HHI).","code":""},{"path":"/reference/indicator_donor_destination_concentration.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Donor→Destination: Portfolio Concentration Index — indicator_donor_destination_concentration","text":"","code":"donor <- indicator_donor_destination_concentration(flows) #table(donor$DonorDestination_Concentration_Index)  library(ggplot2) ggplot(donor, aes(x = DonorDestination_Concentration_Index)) +   geom_histogram( fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Destination Concentration Index\",     x = \"\",     y = \"Number of Donors\",     caption = paste(     \"Indicator interpretation:\",     \"Herfindahl-Hirschman Index measuring geographic portfolio concentration      (0 = highly diversified, 1 = focused on few locations/plans).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows concentration levels. Left indicates global spread, right      indicates focused geographic operations in few crises.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Helps understand donor geographic strategies - specialized crisis      responders vs broad global supporters - for targeted engagement.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/reference/indicator_donor_destination_coverage.html","id":null,"dir":"Reference","previous_headings":"","what":"Donor→Destination: Coverage Index — indicator_donor_destination_coverage","title":"Donor→Destination: Coverage Index — indicator_donor_destination_coverage","text":"Calculates proportion destinations donor supports total destinations dataset.","code":""},{"path":"/reference/indicator_donor_destination_coverage.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Donor→Destination: Coverage Index — indicator_donor_destination_coverage","text":"","code":"indicator_donor_destination_coverage(flows, donor_dest_df = NULL)"},{"path":"/reference/indicator_donor_destination_coverage.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Donor→Destination: Coverage Index — indicator_donor_destination_coverage","text":"flows dataframe sourceObjects, destinationObjects, amountUSD. donor_dest_df (optional) dataframe donor–destination pairs merge results .","code":""},{"path":"/reference/indicator_donor_destination_coverage.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Donor→Destination: Coverage Index — indicator_donor_destination_coverage","text":"tibble donor, DonorDestination_Coverage_Index.","code":""},{"path":"/reference/indicator_donor_destination_coverage.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Donor→Destination: Coverage Index — indicator_donor_destination_coverage","text":"Goal: Measures many distinct destinations (countries/plans/sectors) donor supports compared total destinations dataset.","code":""},{"path":"/reference/indicator_donor_destination_coverage.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Donor→Destination: Coverage Index — indicator_donor_destination_coverage","text":"","code":"donor <- indicator_donor_destination_coverage(flows) #table(donor$DonorDestination_Concentration_Index)  library(ggplot2) ggplot(donor, aes(x = DonorDestination_Coverage_Index)) +   geom_histogram( fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Destination Coverage Index\",     x = \"\",     y = \"Number of Donors\",     caption = paste(     \"Indicator interpretation:\",     \"Proportion of total destinations supported by donor (0 = few locations,     1 = active in all locations in dataset).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows coverage breadth. Higher values indicate donors with global     reach, lower values indicate regionally focused donors.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies global players vs regional specialists, informing crisis-specific     partnership strategies and gap analysis.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/reference/indicator_donor_destination_earmarking_flexibility.html","id":null,"dir":"Reference","previous_headings":"","what":"Donor-Destination Earmarking Flexibility — indicator_donor_destination_earmarking_flexibility","title":"Donor-Destination Earmarking Flexibility — indicator_donor_destination_earmarking_flexibility","text":"Computes weighted average earmarking flexibility score donor–destination pair. Higher values indicate flexible (less earmarked) funding.","code":""},{"path":"/reference/indicator_donor_destination_earmarking_flexibility.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Donor-Destination Earmarking Flexibility — indicator_donor_destination_earmarking_flexibility","text":"","code":"indicator_donor_destination_earmarking_flexibility(flows)"},{"path":"/reference/indicator_donor_destination_earmarking_flexibility.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Donor-Destination Earmarking Flexibility — indicator_donor_destination_earmarking_flexibility","text":"flows dataframe containing sourceObjects, destinationObjects, amountUSD, grandBargainEarmarkingType.","code":""},{"path":"/reference/indicator_donor_destination_earmarking_flexibility.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Donor-Destination Earmarking Flexibility — indicator_donor_destination_earmarking_flexibility","text":"tibble donor, destination, Earmarking_Flexibility, total_amount.","code":""},{"path":"/reference/indicator_donor_destination_earmarking_flexibility.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Donor-Destination Earmarking Flexibility — indicator_donor_destination_earmarking_flexibility","text":"Scoring: unearmarked       = 1.00 softly earmarked  = 0.75 earmarked         = 0.50 tightly earmarked = 0.25 indicator helps understand donor behaviour: flexible funding across crisis-affected destinations.","code":""},{"path":"/reference/indicator_donor_destination_earmarking_flexibility.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Donor-Destination Earmarking Flexibility — indicator_donor_destination_earmarking_flexibility","text":"","code":"donor_destination <- indicator_donor_destination_earmarking_flexibility(flows) #table(donor_destination$Earmarking_Flexibility) donor_destination <- indicator_donor_destination_earmarking_flexibility(flows)  # ---- Select top donors & top destinations by total USD ---- top_donors <- donor_destination |>   dplyr::group_by(donor) |>   dplyr::summarise(total = sum(total_amount, na.rm = TRUE)) |>   dplyr::arrange(desc(total)) |>   dplyr::slice_head(n = 15)  top_destinations <- donor_destination |>   dplyr::group_by(destination) |>   dplyr::summarise(total = sum(total_amount, na.rm = TRUE)) |>   dplyr::arrange(desc(total)) |>   dplyr::slice_head(n = 15)  donor_destination_top15 <- donor_destination |>   dplyr::filter(     donor %in% top_donors$donor,     destination %in% top_destinations$destination   )  # (Optional) reorder factors for readability donor_destination_top15 <- donor_destination_top15 |>   dplyr::mutate(     donor = factor(donor, levels = sort(unique(donor))),     destination = factor(destination, levels = sort(unique(destination)))   )  # ---- ggplot2 heatmap ---- ggplot2::ggplot(   donor_destination_top15,   ggplot2::aes(     x = destination,     y = donor,     fill = Earmarking_Flexibility   ) ) +   ggplot2::geom_tile(color = \"white\") +    # Color-blind friendly scale   viridis::scale_fill_viridis(     name = \"Flexibility\",     option = \"viridis\",      # color-blind friendly     direction = 1,     limits = c(0.25, 1.0),     na.value = \"grey80\"   ) +   ggplot2::labs(     title = \"Donor–Destination Earmarking Flexibility     (Top 15 Donors & Destinations)\",     subtitle = \"Weighted average flexibility score      (1.0 = unearmarked → 0.25 = tightly earmarked)\",     x = \"Destination Country\",     y = \"Donor\",     caption = paste(     \"Indicator interpretation:\",     \"Weighted average earmarking flexibility for donor-destination pairs      (1=unearmarked, 0.75=softly earmarked, 0.5=earmarked, 0.25=tightly earmarked).\",     \"\\n\\n\",          \"How to read the visualization:\",     \"Heatmap shows flexibility patterns. Darker colors indicate more flexible      funding arrangements between specific donor-destination combinations.\",      \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies which donors provide flexible funding to specific crises,     enabling context-responsive programming and local decision-making.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   ggplot2::theme(     axis.text.x = ggplot2::element_text(angle = 45, hjust = 1),     legend.position = \"right\",     panel.grid = ggplot2::element_blank()   )"},{"path":"/reference/indicator_donor_destination_geographic_alignment.html","id":null,"dir":"Reference","previous_headings":"","what":"Geographic Alignment — indicator_donor_destination_geographic_alignment","title":"Geographic Alignment — indicator_donor_destination_geographic_alignment","text":"Calculates Jaccard similarity donor-funded locations reference locations.","code":""},{"path":"/reference/indicator_donor_destination_geographic_alignment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Geographic Alignment — indicator_donor_destination_geographic_alignment","text":"","code":"indicator_donor_destination_geographic_alignment(flows, our_locations)"},{"path":"/reference/indicator_donor_destination_geographic_alignment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Geographic Alignment — indicator_donor_destination_geographic_alignment","text":"flows dataframe containing sourceObjects, destinationObjects. our_locations Character vector priority locations.","code":""},{"path":"/reference/indicator_donor_destination_geographic_alignment.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Geographic Alignment — indicator_donor_destination_geographic_alignment","text":"tibble columns donor Geographic_Alignment.","code":""},{"path":"/reference/indicator_donor_destination_geographic_alignment.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Geographic Alignment — indicator_donor_destination_geographic_alignment","text":"","code":"donor <- indicator_donor_destination_geographic_alignment(flows, our_locations = c(\"Yemen\",\"Haiti\")) #table(donor$Geographic_Alignment)  library(ggplot2) ggplot(donor, aes(x = Geographic_Alignment)) +   geom_histogram( fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Destination Geographic_Alignment\",     x = \"\",     y = \"Number of Destination\",    caption = paste(     \"Indicator interpretation:\",     \"Jaccard similarity between donor-funded locations and priority locations (0 = no overlap, 1 = identical geographic focus).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows alignment with specified priority locations. Higher values indicate donors active in organizational priority countries.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies natural partners for priority crises and reveals funding gaps in key locations needing advocacy attention.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/reference/indicator_donor_destination_risk_tolerance.html","id":null,"dir":"Reference","previous_headings":"","what":"Donor Risk Tolerance — indicator_donor_destination_risk_tolerance","title":"Donor Risk Tolerance — indicator_donor_destination_risk_tolerance","text":"Estimates donor risk tolerance share funding going : high-risk locations, /new untested recipient organisations.","code":""},{"path":"/reference/indicator_donor_destination_risk_tolerance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Donor Risk Tolerance — indicator_donor_destination_risk_tolerance","text":"","code":"indicator_donor_destination_risk_tolerance(   flows,   high_risk_locations,   new_partners )"},{"path":"/reference/indicator_donor_destination_risk_tolerance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Donor Risk Tolerance — indicator_donor_destination_risk_tolerance","text":"flows dataframe sourceObjects, destinationObjects, amountUSD. high_risk_locations Character vector high-risk location names. new_partners Character vector new emerging recipient organisations.","code":""},{"path":"/reference/indicator_donor_destination_risk_tolerance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Donor Risk Tolerance — indicator_donor_destination_risk_tolerance","text":"tibble donor Risk_Tolerance.","code":""},{"path":"/reference/indicator_donor_destination_risk_tolerance.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Donor Risk Tolerance — indicator_donor_destination_risk_tolerance","text":"higher score indicates donor willing take risk.","code":""},{"path":"/reference/indicator_donor_destination_risk_tolerance.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Donor Risk Tolerance — indicator_donor_destination_risk_tolerance","text":"","code":"donor_risk <- indicator_donor_destination_risk_tolerance(   flows,   high_risk_locations = c(\"Sudan\", \"South Sudan\", \"Somalia\", \"Afghanistan\"),   new_partners        = c(\"Local NGO A\", \"Community Org B\") )  # Identify top 15 donors by total contributions top15 <- donor_risk |>   dplyr::arrange(desc(total)) |>   dplyr::slice_head(n = 15)  donor_risk_top15 <- donor_risk |>   dplyr::filter(donor %in% top15$donor) |>   dplyr::mutate(     donor = factor(donor, levels = top15$donor)   )  # ---- ggplot2 visualisation (viridis) ---- ggplot2::ggplot(   donor_risk_top15,   ggplot2::aes(     x = donor,     y = Risk_Tolerance,     fill = Risk_Tolerance   ) ) +   ggplot2::geom_col() +   viridis::scale_fill_viridis(     name = \"Risk Tolerance\",     option = \"viridis\",     direction = 1,     limits = c(0, 1),     na.value = \"grey80\"   ) +   ggplot2::coord_flip() +   ggplot2::labs(     title = \"Donor Risk Tolerance (Top 15 Donors)\",     subtitle = \"Share of funding directed to high-risk locations or new partners\",     x = \"Donor\",     y = \"Risk Tolerance (0–1)\",     caption = paste(     \"Indicator interpretation:\",     \"Share of donor funding going to high-risk locations or new/untested partners.     Higher values indicate greater risk tolerance in funding decisions.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Bar chart shows risk tolerance levels across top donors. Higher bars      indicate donors more willing to fund in complex environments or with new      partners.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies donors supporting frontline response in most challenging      contexts and investing in local capacity building through new partnerships.\",     \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   ggplot2::theme(     panel.grid.minor = ggplot2::element_blank(),     legend.position = \"right\"   )"},{"path":"/reference/indicator_donor_destination_stability.html","id":null,"dir":"Reference","previous_headings":"","what":"Donor→Destination: Geographic Stability Index — indicator_donor_destination_stability","title":"Donor→Destination: Geographic Stability Index — indicator_donor_destination_stability","text":"Calculates fraction years donor funds destination years funding relationship. Higher values indicate sustained, long-term donor engagement.","code":""},{"path":"/reference/indicator_donor_destination_stability.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Donor→Destination: Geographic Stability Index — indicator_donor_destination_stability","text":"","code":"indicator_donor_destination_stability(flows, donor_dest_df = NULL)"},{"path":"/reference/indicator_donor_destination_stability.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Donor→Destination: Geographic Stability Index — indicator_donor_destination_stability","text":"flows dataframe sourceObjects, destinationObjects, budgetYear, amountUSD. donor_dest_df Optional tibble donor–destination pairs merge .","code":""},{"path":"/reference/indicator_donor_destination_stability.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Donor→Destination: Geographic Stability Index — indicator_donor_destination_stability","text":"tibble donor, destination, DonorDestination_Stability_Index.","code":""},{"path":"/reference/indicator_donor_destination_stability.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Donor→Destination: Geographic Stability Index — indicator_donor_destination_stability","text":"","code":"# Compute indicator donor_destination<- indicator_donor_destination_stability(flows)  # Identify top 15 destinations by number of active donors or total flows top_destinations <- donor_destination |>   dplyr::group_by(destination) |>   dplyr::summarise(total_stability = sum(DonorDestination_Stability_Index,                                          na.rm = TRUE)) |>   dplyr::arrange(desc(total_stability)) |>   dplyr::slice_head(n = 15)  stability_top <- donor_destination |>   dplyr::filter(destination %in% top_destinations$destination) |>   dplyr::mutate(     destination = factor(destination, levels = top_destinations$destination),     donor = factor(donor)   )  # ---- ggplot2 visualisation ---- ggplot2::ggplot(   stability_top,   ggplot2::aes(     x = destination,     y = donor,     fill = DonorDestination_Stability_Index   ) ) +   ggplot2::geom_tile(color = \"white\") +      viridis::scale_fill_viridis(     name = \"Stability (0–1)\",     option = \"viridis\",     limits = c(0, 1),     na.value = \"grey80\"   ) +      ggplot2::labs(     title = \"Donor → Destination Geographic Stability Index\",     subtitle = \"Share of years each donor funded a destination     (0 = occasional; 1 = consistent every year)\",     x = \"Destination\",     y = \"Donor\",     caption = paste(     \"Indicator interpretation:\",     \"Proportion of years with active funding between donor-destination pairs     (0=sporadic engagement, 1=consistent annual funding throughout period).\",      \"\\n\\n\",          \"How to read the visualization:\",     \"Heatmap shows funding consistency patterns. Darker colors indicate stable      long-term donor engagement in specific crisis contexts.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies donors providing predictable funding to specific crises,      enabling long-term programming and sustainable response capacity building.\",      \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) +      unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   ggplot2::theme(     axis.text.x = ggplot2::element_text(angle = 45, hjust = 1),     panel.grid = ggplot2::element_blank(),     legend.position = \"right\"   )"},{"path":"/reference/indicator_donor_destination_trend.html","id":null,"dir":"Reference","previous_headings":"","what":"Donor→Destination: Geographic Focus Trend — indicator_donor_destination_trend","title":"Donor→Destination: Geographic Focus Trend — indicator_donor_destination_trend","text":"Evaluates whether donor's destination concentration (HHI) increasing decreasing time. Goal: Captures whether donor’s portfolio becoming less geographically diversified time (trend HHI per year).","code":""},{"path":"/reference/indicator_donor_destination_trend.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Donor→Destination: Geographic Focus Trend — indicator_donor_destination_trend","text":"","code":"indicator_donor_destination_trend(flows, donor_dest_df = NULL)"},{"path":"/reference/indicator_donor_destination_trend.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Donor→Destination: Geographic Focus Trend — indicator_donor_destination_trend","text":"flows dataframe sourceObjects, destinationObjects, budgetYear, amountUSD. donor_dest_df (optional) dataframe donor–destination pairs merge results .","code":""},{"path":"/reference/indicator_donor_destination_trend.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Donor→Destination: Geographic Focus Trend — indicator_donor_destination_trend","text":"tibble donor, DonorDestination_Focus_Trend (slope).","code":""},{"path":"/reference/indicator_donor_destination_trend.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Donor→Destination: Geographic Focus Trend — indicator_donor_destination_trend","text":"","code":"donor <- indicator_donor_destination_trend(flows) #table(donor$DonorDestination_Focus_Trend)  library(ggplot2) ggplot(donor, aes(x = DonorDestination_Focus_Trend)) +   geom_histogram( fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Destination Focus Trend\",     x = \"\",     y = \"Number of Donors\",     caption = paste(     \"Indicator interpretation:\",     \"Linear trend of geographic concentration over time (negative = diversifying,     positive = focusing, zero = stable portfolio strategy).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows trend direction. Left of zero indicates donors broadening      geographic scope, right indicates narrowing focus.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Reveals evolving donor strategies - expansion into new crises vs      consolidation in core locations - for anticipating partnership      opportunities.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 146 rows containing non-finite outside the scale range (`stat_bin()`)."},{"path":"/reference/indicator_donor_funding_consistency.html","id":null,"dir":"Reference","previous_headings":"","what":"Funding Consistency Index — indicator_donor_funding_consistency","title":"Funding Consistency Index — indicator_donor_funding_consistency","text":"Calculates proportion years donor provided funding relative total number years analyzed.","code":""},{"path":"/reference/indicator_donor_funding_consistency.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Funding Consistency Index — indicator_donor_funding_consistency","text":"","code":"indicator_donor_funding_consistency(flows, donors = NULL)"},{"path":"/reference/indicator_donor_funding_consistency.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Funding Consistency Index — indicator_donor_funding_consistency","text":"flows dataframe containing FTS-style flow data sourceObjects, budgetYear, amountUSD. donors Optional dataframe donor names merge results.","code":""},{"path":"/reference/indicator_donor_funding_consistency.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Funding Consistency Index — indicator_donor_funding_consistency","text":"tibble columns donor Funding_Consistency_Index.","code":""},{"path":"/reference/indicator_donor_funding_consistency.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Funding Consistency Index — indicator_donor_funding_consistency","text":"","code":"donors <- indicator_donor_funding_consistency(flows) table(donors$Funding_Consistency_Index) #>  #>   1  #> 247  # library(ggplot2) # ggplot(donors, aes(x = Funding_Consistency_Index)) + #   geom_histogram(fill = \"steelblue\", color = \"white\") + #   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) + #   labs( #     title = \"Distribution of Donor Funding Consistency Index\", #     x = \"\", #     y = \"Number of Donors\", #     caption = paste( #     \"Indicator interpretation:\", #     \"Measures the proportion of years a donor provided funding relative to total  #     years analyzed. Scores range 0-1 where 1 = consistent annual funding.\", #     \"\\n\\n\", #      #     \"How to read the visualization:\", #     \"X-axis shows consistency index values (0-1), Y-axis shows count of donors. #     Bars represent frequency of donors at each consistency level.\", \"\\n\\n\", #      #     \"Humanitarian relevance:\", #     \"Identifies reliable long-term partners vs sporadic funders, helping  #     prioritize relationship building with consistent donors.\", \"\\n\\n\", #      #     \"Source: Financial Tracking Service (FTS) API.\" #   ) #   )"},{"path":"/reference/indicator_donor_funding_growth.html","id":null,"dir":"Reference","previous_headings":"","what":"Funding Growth Trend — indicator_donor_funding_growth","title":"Funding Growth Trend — indicator_donor_funding_growth","text":"Calculates linear trend (slope) annual funding amounts years donor.","code":""},{"path":"/reference/indicator_donor_funding_growth.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Funding Growth Trend — indicator_donor_funding_growth","text":"","code":"indicator_donor_funding_growth(flows, donors = NULL)"},{"path":"/reference/indicator_donor_funding_growth.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Funding Growth Trend — indicator_donor_funding_growth","text":"flows dataframe sourceObjects, budgetYear, amountUSD. donors Optional dataframe donor names.","code":""},{"path":"/reference/indicator_donor_funding_growth.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Funding Growth Trend — indicator_donor_funding_growth","text":"tibble donor Funding_Growth_Trend (slope funding years).","code":""},{"path":"/reference/indicator_donor_funding_growth.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Funding Growth Trend — indicator_donor_funding_growth","text":"","code":"donors <- indicator_donor_funding_growth(flows) #table(donors$Funding_Growth_Trend) library(ggplot2) ggplot(donors, aes(x = Funding_Growth_Trend)) +   geom_histogram( fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Funding Growth Trend\",     x = \"\",     y = \"Number of Donors\",     caption = paste(     \"Indicator interpretation:\",     \"Linear regression slope of annual funding amounts over time. Positive      values = increasing funding, negative = decreasing funding.\", \"\\n\\n\",          \"How to read the visualization:\",     \"X-axis shows growth rate (USD per year), Y-axis shows donor count. Center      around zero indicates stable funding, right tail indicates growing donors.\",     \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies expanding vs contracting funding sources, helping target      advocacy and partnership efforts with growing donors.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 154 rows containing non-finite outside the scale range (`stat_bin()`)."},{"path":"/reference/indicator_donor_geographic_alignment.html","id":null,"dir":"Reference","previous_headings":"","what":"Geographic Alignment — indicator_donor_geographic_alignment","title":"Geographic Alignment — indicator_donor_geographic_alignment","text":"Calculates Jaccard similarity donor-funded locations reference locations.","code":""},{"path":"/reference/indicator_donor_geographic_alignment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Geographic Alignment — indicator_donor_geographic_alignment","text":"","code":"indicator_donor_geographic_alignment(   flows,   priority_destinations,   donors = NULL )"},{"path":"/reference/indicator_donor_geographic_alignment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Geographic Alignment — indicator_donor_geographic_alignment","text":"flows dataframe containing sourceObjects, destinationObjects. priority_destinations Character vector priority locations. donors (optional) dataframe donor names merge results.","code":""},{"path":"/reference/indicator_donor_geographic_alignment.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Geographic Alignment — indicator_donor_geographic_alignment","text":"tibble columns donor Geographic_Alignment.","code":""},{"path":"/reference/indicator_donor_geographic_alignment.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Geographic Alignment — indicator_donor_geographic_alignment","text":"","code":"destinations <- flows |>       tidyr::unnest(destinationObjects, names_repair = \"unique\", names_sep = \"_\") |>       dplyr::filter(destinationObjects_type == \"Location\") |>       dplyr::pull(destinationObjects_name) |>       unlist() |>       unique() #dput(destinations)  # High-visibility, acute crises get funded high_visibility <- c(   \"Ukraine\", \"Syrian Arab Republic\", \"Occupied Palestinian Territory\",   \"Sudan\", \"South Sudan\", \"Yemen\", \"Afghanistan\", \"Myanmar\",   \"Ethiopia\", \"Somalia\", \"Democratic Republic of the Congo\",   \"Central African Republic\", \"Haiti\" )  # Long-standing crises with major donor attention maintain coverage long_standing <- c(   \"Lebanon\", \"Jordan\", \"Iraq\", \"Türkiye\", \"Bangladesh\", \"Chad\",   \"Cameroon\", \"Niger\", \"Burkina Faso\", \"Mali\", \"Nigeria\",   \"Colombia\", \"Venezuela, Bolivarian Republic of\" )  # Regional refugee responses collapse regional_refugee <- c(   \"Region - Southern and Eastern Africa\", \"Region - Middle East and Northern Africa\",   \"Region - West and Central Africa\", \"Region - Latin America and the Caribbean\",   \"Region - Asia and the Pacific\", \"Uganda\", \"Kenya\", \"Tanzania, United Republic of\",   \"Djibouti\", \"Mauritania\", \"Cameroon\", \"Moldova, Republic of\" )  # Lower-profile crises get abandoned lower_profile <- c(   \"Burundi\", \"Rwanda\", \"Eritrea\", \"Nepal\", \"Georgia\", \"Cuba\",   \"Dominican Republic\", \"Madagascar\", \"Mozambique\", \"Angola\", \"Malawi\",   \"Comoros\", \"Liberia\", \"Côte d'Ivoire\", \"Senegal\", \"Ghana\", \"Guinea\",   \"Guinea-Bissau\", \"Lesotho\", \"Eswatini\", \"Zambia\", \"Cambodia\",   \"Lao People's Democratic Republic\", \"Philippines\", \"Timor-Leste\",   \"Sri Lanka\", \"Togo\", \"Benin\", \"Gambia\", \"Nicaragua\", \"Honduras\",   \"El Salvador\", \"Guatemala\", \"Costa Rica\", \"Peru\", \"Ecuador\", \"Panama\",   \"Bolivia, Plurinational State of\", \"Papua New Guinea\", \"Solomon Islands\",   \"Kiribati\", \"Vanuatu\", \"Micronesia, Federated States of\", \"Tonga\",   \"Fiji\", \"Cook Islands\", \"Tuvalu\", \"Samoa\", \"Nauru\", \"Niue\", \"Palau\",   \"Maldives\", \"Armenia\", \"Uzbekistan\", \"Kazakhstan\", \"Turkmenistan\",   \"Azerbaijan\", \"Tajikistan\", \"Kyrgyzstan\", \"Mongolia\", \"Mauritius\",   \"Cape Verde\", \"Equatorial Guinea\", \"Gabon\", \"Botswana\", \"Namibia\",   \"Seychelles\", \"Trinidad and Tobago\", \"Grenada\", \"Saint Lucia\",   \"Saint Vincent and the Grenadines\", \"Barbados\", \"Guyana\", \"Suriname\",   \"Belize\", \"Anguilla (United Kingdom)\", \"Aruba (Netherlands)\",   \"Curaçao (Netherlands)\" )   donor <- indicator_donor_geographic_alignment(flows,                         priority_destinations = high_visibility) #table(donor$Geographic_Alignment)  library(ggplot2) ggplot(donor, aes(x = Geographic_Alignment)) +   geom_histogram( fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Geographic Alignment to High Visibility Location\",     x = \"\",     y = \"Number of Destination\",    caption = paste(     \"Indicator interpretation:\",     \"Jaccard similarity between donor-funded locations and priority      locations (0 = no overlap, 1 = identical geographic focus).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows alignment with specified priority locations. Higher      values indicate donors active in organizational priority countries.\",     \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies natural partners for priority crises and reveals funding gaps      in key locations needing advocacy attention.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/reference/indicator_donor_knowledge_sharing_intensity.html","id":null,"dir":"Reference","previous_headings":"","what":"Knowledge Sharing Intensity — indicator_donor_knowledge_sharing_intensity","title":"Knowledge Sharing Intensity — indicator_donor_knowledge_sharing_intensity","text":"Measures proportion flows mentioning collaboration, learning, assessment activities description.","code":""},{"path":"/reference/indicator_donor_knowledge_sharing_intensity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Knowledge Sharing Intensity — indicator_donor_knowledge_sharing_intensity","text":"","code":"indicator_donor_knowledge_sharing_intensity(flows, donors = NULL)"},{"path":"/reference/indicator_donor_knowledge_sharing_intensity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Knowledge Sharing Intensity — indicator_donor_knowledge_sharing_intensity","text":"flows dataframe containing least description nested sourceObjects. donors (optional) dataframe donor names merge results.","code":""},{"path":"/reference/indicator_donor_knowledge_sharing_intensity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Knowledge Sharing Intensity — indicator_donor_knowledge_sharing_intensity","text":"tibble columns: donor Donor organization name. Knowledge_Sharing_Intensity Proportion flows mentioning collaboration/learning/assessment (0–1).","code":""},{"path":"/reference/indicator_donor_knowledge_sharing_intensity.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Knowledge Sharing Intensity — indicator_donor_knowledge_sharing_intensity","text":"Goal: Quantifies degree donor’s funding supports knowledge sharing, joint assessments, learning events, coordination activities.","code":""},{"path":"/reference/indicator_donor_knowledge_sharing_intensity.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Knowledge Sharing Intensity — indicator_donor_knowledge_sharing_intensity","text":"","code":"donors <- indicator_donor_knowledge_sharing_intensity(flows) #table(donors$Knowledge_Sharing_Intensity)  library(ggplot2) # Basic histogram of Knowledge Sharing Intensity ggplot(donors, aes(x = Knowledge_Sharing_Intensity)) +   geom_histogram(binwidth = 0.05, fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Knowledge Sharing Intensity\",     x = \"\",     y = \"Number of Donors\",     caption = paste(     \"Indicator interpretation:\",     \"Proportion of flows mentioning collaboration, learning, or assessment     activities in descriptions (0 = no mention, 1 = all flows include      knowledge components).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows distribution of knowledge sharing emphasis. Higher values      indicate donors prioritizing learning and coordination in funding.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies donors supporting system-wide learning and coordination,      crucial for improving response effectiveness and accountability.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   )"},{"path":"/reference/indicator_donor_recipient_concentration.html","id":null,"dir":"Reference","previous_headings":"","what":"Donor→Recipient: Funding Concentration Index — indicator_donor_recipient_concentration","title":"Donor→Recipient: Funding Concentration Index — indicator_donor_recipient_concentration","text":"Measures share recipient’s total funding comes specific donor.","code":""},{"path":"/reference/indicator_donor_recipient_concentration.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Donor→Recipient: Funding Concentration Index — indicator_donor_recipient_concentration","text":"","code":"indicator_donor_recipient_concentration(   flows,   donor_recipient_pairs = NULL,   donors = NULL,   recipient_name = NULL )"},{"path":"/reference/indicator_donor_recipient_concentration.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Donor→Recipient: Funding Concentration Index — indicator_donor_recipient_concentration","text":"flows dataframe sourceObjects, destinationObjects, amountUSD. donor_recipient_pairs (optional) dataframe donor–recipient pairs merge results . donors (optional used recipient_name provided ) dataframe donor names merge  results. recipient_name (optional) name specific recipient filter results function","code":""},{"path":"/reference/indicator_donor_recipient_concentration.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Donor→Recipient: Funding Concentration Index — indicator_donor_recipient_concentration","text":"tibble donor, recipient, DonorRecipient_Concentration_Index.","code":""},{"path":"/reference/indicator_donor_recipient_concentration.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Donor→Recipient: Funding Concentration Index — indicator_donor_recipient_concentration","text":"Goal: Quantifies dependent recipient donor (share donor’s contribution among total received).","code":""},{"path":"/reference/indicator_donor_recipient_concentration.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Donor→Recipient: Funding Concentration Index — indicator_donor_recipient_concentration","text":"","code":"donor_recipient <- indicator_donor_recipient_concentration(flows) #table(donor_recipient$DonorRecipient_Stability_Index)  library(ggplot2) ggplot(donor_recipient, aes(x = DonorRecipient_Concentration_Index)) +   geom_histogram( fill = \"green\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Recipient Concentration Index\",     x = \"\",     y = \"Number of Donor-Recipient Pairs\",     caption = paste(     \"Indicator interpretation:\",     \"Share of recipient's total funding coming from specific donor (0-1).      Higher values indicate recipient dependency on that donor.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows dependency levels across partnerships. Values near 1      indicate critical donor dependencies requiring diversification strategies.\",     \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies vulnerable partnerships where recipient organizations risk      severe disruption if key donors change funding priorities.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 1 row containing non-finite outside the scale range (`stat_bin()`)."},{"path":"/reference/indicator_donor_recipient_funding_growth.html","id":null,"dir":"Reference","previous_headings":"","what":"Donor-Recipient Funding Growth Trend — indicator_donor_recipient_funding_growth","title":"Donor-Recipient Funding Growth Trend — indicator_donor_recipient_funding_growth","text":"Estimates linear growth (slope) annual funding amounts donor recipient.","code":""},{"path":"/reference/indicator_donor_recipient_funding_growth.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Donor-Recipient Funding Growth Trend — indicator_donor_recipient_funding_growth","text":"","code":"indicator_donor_recipient_funding_growth(   flows,   donor_recipient_pairs = NULL,   donors = NULL,   recipient_name = NULL )"},{"path":"/reference/indicator_donor_recipient_funding_growth.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Donor-Recipient Funding Growth Trend — indicator_donor_recipient_funding_growth","text":"flows dataframe containing sourceObjects, destinationObjects, budgetYear, amountUSD. donor_recipient_pairs (optional) dataframe donor–recipient pairs merge results . donors (optional used recipient_name provided ) dataframe donor names merge  results. recipient_name (optional) name specific recipient filter results function","code":""},{"path":"/reference/indicator_donor_recipient_funding_growth.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Donor-Recipient Funding Growth Trend — indicator_donor_recipient_funding_growth","text":"tibble donor, recipient, Funding_Growth_Trend.","code":""},{"path":"/reference/indicator_donor_recipient_funding_growth.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Donor-Recipient Funding Growth Trend — indicator_donor_recipient_funding_growth","text":"","code":"donor_recipient <- indicator_donor_recipient_funding_growth(flows) #table(donor_recipient$Funding_Growth_Trend)  library(ggplot2) ggplot(donor_recipient, aes(x = Funding_Growth_Trend)) +   geom_histogram( fill = \"green\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Recipient Funding Growth Trend\",     x = \"\",     y = \"Number of Donor-Recipient Pairs\",     caption = paste(     \"Indicator interpretation:\",     \"Linear regression slope of annual funding amounts between donor-recipient      pairs. Positive values=increasing funding, negative=decreasing funding.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows growth patterns across partnerships. Center around zero      indicates stable funding, right tail indicates expanding partnerships.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies growing vs contracting funding relationships, helping prioritize     partnership development and identify successful collaboration models.\",      \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 1480 rows containing non-finite outside the scale range (`stat_bin()`)."},{"path":"/reference/indicator_donor_recipient_reciprocity.html","id":null,"dir":"Reference","previous_headings":"","what":"Donor→Recipient: Reciprocity Ratio — indicator_donor_recipient_reciprocity","title":"Donor→Recipient: Reciprocity Ratio — indicator_donor_recipient_reciprocity","text":"Identifies donor–recipient pairs exchanged funding (organization acts donor recipient least ).","code":""},{"path":"/reference/indicator_donor_recipient_reciprocity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Donor→Recipient: Reciprocity Ratio — indicator_donor_recipient_reciprocity","text":"","code":"indicator_donor_recipient_reciprocity(   flows,   donor_recipient_pairs = NULL,   donors = NULL,   recipient_name = NULL )"},{"path":"/reference/indicator_donor_recipient_reciprocity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Donor→Recipient: Reciprocity Ratio — indicator_donor_recipient_reciprocity","text":"flows dataframe sourceObjects, destinationObjects, amountUSD. donor_recipient_pairs (optional) dataframe donor–recipient pairs merge results . donors (optional used recipient_name provided ) dataframe donor names merge  results. recipient_name (optional) name specific recipient filter results function","code":""},{"path":"/reference/indicator_donor_recipient_reciprocity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Donor→Recipient: Reciprocity Ratio — indicator_donor_recipient_reciprocity","text":"tibble donor, recipient, DonorRecipient_Reciprocity_Ratio (0 1).","code":""},{"path":"/reference/indicator_donor_recipient_reciprocity.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Donor→Recipient: Reciprocity Ratio — indicator_donor_recipient_reciprocity","text":"Goal: Checks whether donor recipient mutual funding roles (send receive) — useful consortia pooled mechanisms.","code":""},{"path":"/reference/indicator_donor_recipient_reciprocity.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Donor→Recipient: Reciprocity Ratio — indicator_donor_recipient_reciprocity","text":"","code":"donor_recipient <- indicator_donor_recipient_reciprocity(flows) #table(donor_recipient$DonorRecipient_Reciprocity_Ratio)  library(ggplot2) ggplot(donor_recipient, aes(x = DonorRecipient_Reciprocity_Ratio)) +   geom_histogram( fill = \"green\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Recipient Reciprocity Ratio\",     x = \"\",     y = \"Number of Donor-Recipient Pairs\",     caption = paste(     \"Indicator interpretation:\",     \"Binary indicator of mutual funding relationships where both organizations      act as donor and recipient to each other (0=one-way, 1=reciprocal).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Two bars showing proportion of one-way vs reciprocal partnerships.      Higher reciprocal values indicate collaborative funding ecosystems.\",     \"\\n\\n\",          \"Humanitarian relevance:\",     \"Reciprocal funding indicates consortia, pooled funds, or collaborative      programming arrangements that enhance coordination and local ownership.\",     \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/reference/indicator_donor_recipient_relationship_duration.html","id":null,"dir":"Reference","previous_headings":"","what":"Donor-Recipient Relationship Duration Index — indicator_donor_recipient_relationship_duration","title":"Donor-Recipient Relationship Duration Index — indicator_donor_recipient_relationship_duration","text":"Calculates normalized duration active funding donor recipient.","code":""},{"path":"/reference/indicator_donor_recipient_relationship_duration.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Donor-Recipient Relationship Duration Index — indicator_donor_recipient_relationship_duration","text":"","code":"indicator_donor_recipient_relationship_duration(   flows,   donor_recipient_pairs = NULL,   donors = NULL,   recipient_name = NULL )"},{"path":"/reference/indicator_donor_recipient_relationship_duration.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Donor-Recipient Relationship Duration Index — indicator_donor_recipient_relationship_duration","text":"flows dataframe containing sourceObjects, destinationObjects, budgetYear. donor_recipient_pairs (optional) dataframe donor–recipient pairs merge results . donors (optional used recipient_name provided ) dataframe donor names merge  results. recipient_name (optional) name specific recipient filter results function","code":""},{"path":"/reference/indicator_donor_recipient_relationship_duration.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Donor-Recipient Relationship Duration Index — indicator_donor_recipient_relationship_duration","text":"tibble columns donor, recipient, Relationship_Duration_Index.","code":""},{"path":"/reference/indicator_donor_recipient_relationship_duration.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Donor-Recipient Relationship Duration Index — indicator_donor_recipient_relationship_duration","text":"","code":"donor_recipient <- indicator_donor_recipient_relationship_duration(flows) #table(donor_recipient$Relationship_Duration_Index)  library(ggplot2) ggplot(donor_recipient, aes(x = Relationship_Duration_Index)) +   geom_histogram( fill = \"green\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Recipient Relationship Duration Index\",     x = \"\",     y = \"Number of Donor-Recipient Pairs\",     caption = paste(     \"Indicator interpretation:\",     \"Normalized duration of active funding relationships between donor-recipient     pairs (0=new relationship, 1=active since earliest data).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows relationship longevity across partnerships. Right-skewed      distribution indicates many new relationships, left-skewed indicates      established partnerships.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Long-term partnerships build trust, contextual understanding, and     operational efficiency, leading to more effective crisis response.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 1480 rows containing non-finite outside the scale range (`stat_bin()`)."},{"path":"/reference/indicator_donor_recipient_stability.html","id":null,"dir":"Reference","previous_headings":"","what":"Donor→Recipient: Relationship Stability Index — indicator_donor_recipient_stability","title":"Donor→Recipient: Relationship Stability Index — indicator_donor_recipient_stability","text":"Calculates consistently donor funds recipient time series, proportion years nonzero funding pair.","code":""},{"path":"/reference/indicator_donor_recipient_stability.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Donor→Recipient: Relationship Stability Index — indicator_donor_recipient_stability","text":"","code":"indicator_donor_recipient_stability(   flows,   donor_recipient_pairs = NULL,   donors = NULL,   recipient_name = NULL )"},{"path":"/reference/indicator_donor_recipient_stability.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Donor→Recipient: Relationship Stability Index — indicator_donor_recipient_stability","text":"flows dataframe sourceObjects, destinationObjects, budgetYear, amountUSD. donor_recipient_pairs (optional) dataframe donor–recipient pairs merge results . donors (optional used recipient_name provided ) dataframe donor names merge  results. recipient_name (optional) name specific recipient filter results function","code":""},{"path":"/reference/indicator_donor_recipient_stability.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Donor→Recipient: Relationship Stability Index — indicator_donor_recipient_stability","text":"tibble donor, recipient, DonorRecipient_Stability_Index.","code":""},{"path":"/reference/indicator_donor_recipient_stability.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Donor→Recipient: Relationship Stability Index — indicator_donor_recipient_stability","text":"Goal: Measures consistently donor funds recipient time (share active years).","code":""},{"path":"/reference/indicator_donor_recipient_stability.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Donor→Recipient: Relationship Stability Index — indicator_donor_recipient_stability","text":"","code":"donor_recipient <- indicator_donor_recipient_stability(flows) #table(donor_recipient$DonorRecipient_Stability_Index)  library(ggplot2) ggplot(donor_recipient, aes(x = DonorRecipient_Stability_Index)) +   geom_histogram( fill = \"green\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Recipient Stability Index\",     x = \"\",     y = \"Number of Donor-Recipient Pairs\",     caption = paste(     \"Indicator interpretation:\",     \"Proportion of years with active funding between donor-recipient pairs      (0=sporadic funding, 1=consistent annual funding throughout relationship).\",     \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows funding consistency patterns. Higher values indicate      reliable annual partnerships, lower values indicate intermittent engagement.\",     \"\\n\\n\",          \"Humanitarian relevance:\",     \"Consistent funding enables long-term programming, staff retention, and      institutional strengthening rather than project-based short-term engagements.\",      \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/reference/indicator_donor_recipient_trend.html","id":null,"dir":"Reference","previous_headings":"","what":"Donor→Recipient: Funding Trend Index — indicator_donor_recipient_trend","title":"Donor→Recipient: Funding Trend Index — indicator_donor_recipient_trend","text":"Computes slope funding trend time donor–recipient pair.","code":""},{"path":"/reference/indicator_donor_recipient_trend.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Donor→Recipient: Funding Trend Index — indicator_donor_recipient_trend","text":"","code":"indicator_donor_recipient_trend(   flows,   donor_recipient_pairs = NULL,   donors = NULL,   recipient_name = NULL )"},{"path":"/reference/indicator_donor_recipient_trend.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Donor→Recipient: Funding Trend Index — indicator_donor_recipient_trend","text":"flows dataframe sourceObjects, destinationObjects, budgetYear, amountUSD. donor_recipient_pairs (optional) dataframe donor–recipient pairs merge results . donors (optional used recipient_name provided ) dataframe donor names merge  results. recipient_name (optional) name specific recipient filter results function","code":""},{"path":"/reference/indicator_donor_recipient_trend.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Donor→Recipient: Funding Trend Index — indicator_donor_recipient_trend","text":"tibble donor, recipient, DonorRecipient_Trend_Index (slope).","code":""},{"path":"/reference/indicator_donor_recipient_trend.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Donor→Recipient: Funding Trend Index — indicator_donor_recipient_trend","text":"Goal: Detects whether funding donor recipient increasing decreasing time (slope linear regression).","code":""},{"path":"/reference/indicator_donor_recipient_trend.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Donor→Recipient: Funding Trend Index — indicator_donor_recipient_trend","text":"","code":"donor_recipient <- indicator_donor_recipient_trend(flows) #table(donor_recipient$DonorRecipient_Trend_Index)  library(ggplot2) ggplot(donor_recipient, aes(x = DonorRecipient_Trend_Index)) +   geom_histogram( fill = \"green\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Recipient Trend Index\",     x = \"\",     y = \"Number of Donor-Recipient Pairs\",     caption = paste(     \"Indicator interpretation:\",     \"Linear trend of funding amounts between donor-recipient pairs over time.      Positive=increasing investment, negative=phasing out partnership.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows partnership evolution patterns. Right of zero indicates      growing collaborations, left indicates declining engagements.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Reveals evolving partnership strategies - scaling successful collaborations     vs exiting less effective ones - informing relationship management.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 1480 rows containing non-finite outside the scale range (`stat_bin()`)."},{"path":"/reference/indicator_donor_relationship_duration.html","id":null,"dir":"Reference","previous_headings":"","what":"Relationship Duration Index — indicator_donor_relationship_duration","title":"Relationship Duration Index — indicator_donor_relationship_duration","text":"Measures duration donor’s funding relationship relative maximum possible duration.","code":""},{"path":"/reference/indicator_donor_relationship_duration.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Relationship Duration Index — indicator_donor_relationship_duration","text":"","code":"indicator_donor_relationship_duration(flows, donors = NULL)"},{"path":"/reference/indicator_donor_relationship_duration.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Relationship Duration Index — indicator_donor_relationship_duration","text":"flows dataframe containing sourceObjects budgetYear. donors Optional dataframe donor names.","code":""},{"path":"/reference/indicator_donor_relationship_duration.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Relationship Duration Index — indicator_donor_relationship_duration","text":"tibble donor Relationship_Duration_Index.","code":""},{"path":"/reference/indicator_donor_relationship_duration.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Relationship Duration Index — indicator_donor_relationship_duration","text":"","code":"donors <- indicator_donor_relationship_duration(flows) #table(donor$Relationship_Duration_Index) library(ggplot2) ggplot(donors, aes(x = Relationship_Duration_Index)) +   geom_histogram(binwidth = 0.05, fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Relationship Duration Index\",     x = \"\",     y = \"Number of Donors\",     caption = paste(     \"Indicator interpretation:\",     \"Measures duration of donor's funding relationship relative to maximum      possible duration. 1 = active since earliest data, 0 = new entrant.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows distribution of duration scores. Left-skewed distribution      indicates many new donors, right-skewed indicates established      relationships.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Long-term donors often have deeper contextual understanding and more      predictable funding patterns for strategic planning.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   )"},{"path":"/reference/indicator_donor_sector_alignment.html","id":null,"dir":"Reference","previous_headings":"","what":"Sector Alignment — indicator_donor_sector_alignment","title":"Sector Alignment — indicator_donor_sector_alignment","text":"Calculates weighted sector alignment index donors recipients, comparing donor funding per sector internal capacity weights.","code":""},{"path":"/reference/indicator_donor_sector_alignment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sector Alignment — indicator_donor_sector_alignment","text":"","code":"indicator_donor_sector_alignment(flows, sector_capacity, donors = NULL)"},{"path":"/reference/indicator_donor_sector_alignment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sector Alignment — indicator_donor_sector_alignment","text":"flows dataframe sourceObjects, destinationObjects, amountUSD. sector_capacity tibble columns sector capacity_weight (values 0–1). donors (optional) dataframe donor names merge results.","code":""},{"path":"/reference/indicator_donor_sector_alignment.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sector Alignment — indicator_donor_sector_alignment","text":"tibble columns donor, recipient, Sector_Alignment.","code":""},{"path":"/reference/indicator_donor_sector_alignment.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Sector Alignment — indicator_donor_sector_alignment","text":"Goal: evaluates closely donor’s funding distribution across humanitarian sectors matches internal capacity priority weighting sectors","code":""},{"path":"/reference/indicator_donor_sector_alignment.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Sector Alignment — indicator_donor_sector_alignment","text":"","code":"flows |>       tidyr::unnest(destinationObjects, names_repair = \"unique\", names_sep = \"_\") |>       dplyr::filter(destinationObjects_type == \"GlobalCluster\") |>       dplyr::pull(destinationObjects_name) |>       unlist() |>       unique() #>  [1] \"Nutrition\"                                  #>  [2] \"Health\"                                     #>  [3] \"Other\"                                      #>  [4] \"Emergency Shelter and NFI\"                  #>  [5] \"Water Sanitation Hygiene\"                   #>  [6] \"Food Security\"                              #>  [7] \"Logistics\"                                  #>  [8] \"Coordination and support services\"          #>  [9] \"Protection - Gender-Based Violence\"         #> [10] \"Multi-sector\"                               #> [11] \"Protection\"                                 #> [12] \"Education\"                                  #> [13] \"Early Recovery\"                             #> [14] \"Protection - Child Protection\"              #> [15] \"Protection - Mine Action\"                   #> [16] \"Agriculture\"                                #> [17] \"Protection - Housing, Land and Property\"    #> [18] \"Camp Coordination / Management\"             #> [19] \"Protection - Human Trafficking & Smuggling\" #> [20] \"Multipurpose Cash\"                          #> [21] \"Emergency Telecommunications\"                # pragmatic default weights - illustrative defaults emphasizing life-saving sectors  # (Nutrition, Health, WASH, Food Security) and cash/multi-sector where relevant. library(tibble)  sectors <- c(  \"Nutrition\",   \"Health\",   \"Emergency Shelter and NFI\",   \"Water Sanitation Hygiene\",  \"Food Security\",  \"Logistics\",   \"Protection - Gender-Based Violence\",   \"Protection - Child Protection\",  \"Protection\",  \"Multipurpose Cash\",   \"Education\",  \"Multi-sector\",  \"Protection - Housing, Land and Property\",  \"Protection - Human Trafficking & Smuggling\",   \"Coordination and support services\",  \"Camp Coordination / Management\",  \"Emergency Telecommunications\",   \"Agriculture\",  \"Early Recovery\",  \"Protection - Mine Action\",   \"Other\" )  # Adjusted scores based on funding collapse and operational risk  adjusted_scores <- c(   10,  # Nutrition: Life-saving and first-line response; malnutrition spikes in   #crises. Funding collapse means ration cuts, so priority remains highest.   9,   # Health: Essential for survival; clinics reverting to 1990s models    #(minimal staff, basic meds). High priority to prevent mortality.   8,   # Emergency Shelter and NFI: Critical for displaced populations;   #exposure risk rises with underfunding. Still high but slightly below health/nutrition.   8,   # Water Sanitation Hygiene (WASH): Prevents disease outbreaks;    #cholera risk escalates when systems fail. Needs strong prioritization.   7,   # Food Security: Linked to nutrition but broader (agriculture, livelihoods).   #Funding gaps mean rationing; still vital but slightly less than direct nutrition.   6,   # Logistics: Backbone for all sectors; underfunding reduces supply chain    #resilience. Important but not life-saving on its own.   7,   # Protection - Gender-Based Violence: GBV spikes in fragile contexts;    #services often first to be cut. Needs strong prioritization for dignity and safety.   6,   # Protection - Child Protection: Critical for safeguarding vulnerable   #children; funding collapse risks exploitation. Medium-high priority.   5,   # Protection (general): Important for rights and safety but less    #immediately life-saving than GBV or child protection.   9,   # Multipurpose Cash: Severely underfunded (only ~20% coverage);   #key for dignity and flexibility. High priority to maintain household resilience.   8,   # Education: Collapsing (21% funded); long-term impact on recovery    #and protection. Elevated priority despite being non-life-saving.   6,   # Multi-sector: Coordination across sectors matters, but direct impact    # is less urgent than core life-saving interventions.   4,   # Protection - Housing, Land and Property: Important for durable   #solutions, but less urgent during acute collapse.   4,   # Protection - Human Trafficking & Smuggling: Serious risk but narrower   #scope; medium-low priority compared to GBV/child protection.   3,   # Coordination and support services: Necessary for system functioning,   # but deprioritized when survival sectors collapse.   3,   # Camp Coordination / Management: Important for organized response,   #but less critical than food, health, WASH.   3,   # Emergency Telecommunications: Enables operations but not directly   #life-saving; deprioritized under severe funding constraints.   5,   # Agriculture: Supports food security and recovery; medium priority    #as immediate needs dominate.   8,   # Early Recovery: Only 17% funded; crucial for resilience and    #preventing protracted crises. Elevated priority despite systemic collapse.   2,   # Protection - Mine Action: Important for safety but less urgent    # than health/nutrition during acute funding collapse.   1    # Other: Catch-all category; lowest priority given resource scarcity. )    sector_capacity <- tibble::tibble(   sector = sectors,   raw_score = adjusted_scores) |>   dplyr::mutate(     capacity_weight = raw_score / sum(raw_score)  # normalize to sum to 1   ) |>   dplyr::select(sector, capacity_weight)  knitr::kable(sector_capacity |> dplyr::arrange(desc(capacity_weight))) #>  #>  #> |sector                                     | capacity_weight| #> |:------------------------------------------|---------------:| #> |Nutrition                                  |       0.0819672| #> |Health                                     |       0.0737705| #> |Multipurpose Cash                          |       0.0737705| #> |Emergency Shelter and NFI                  |       0.0655738| #> |Water Sanitation Hygiene                   |       0.0655738| #> |Education                                  |       0.0655738| #> |Early Recovery                             |       0.0655738| #> |Food Security                              |       0.0573770| #> |Protection - Gender-Based Violence         |       0.0573770| #> |Logistics                                  |       0.0491803| #> |Protection - Child Protection              |       0.0491803| #> |Multi-sector                               |       0.0491803| #> |Protection                                 |       0.0409836| #> |Agriculture                                |       0.0409836| #> |Protection - Housing, Land and Property    |       0.0327869| #> |Protection - Human Trafficking & Smuggling |       0.0327869| #> |Coordination and support services          |       0.0245902| #> |Camp Coordination / Management             |       0.0245902| #> |Emergency Telecommunications               |       0.0245902| #> |Protection - Mine Action                   |       0.0163934| #> |Other                                      |       0.0081967|  donors <- indicator_donor_sector_alignment(flows, sector_capacity)  #table(donor$Sector_Alignment )  library(ggplot2) ggplot(donors, aes(x =Sector_Alignment )) +   geom_histogram(binwidth = 0.05, fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Sector Alignment\",     x = \"\",     y = \"Number of Destination\",     caption = paste(     \"Indicator interpretation:\",     \"Weighted alignment between donor funding distribution and internal sector     capacity priorities (0 = misaligned, 1 = perfectly aligned with      capacity weights).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows alignment scores. Higher values indicate donors funding      sectors matching organizational capacities and strategic priorities.\",     \"\\n\\n\",          \"Humanitarian relevance:\",     \"Helps identify donors whose funding priorities match operational strengths,     enabling more effective resource allocation and partnership building.\",     \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   )"},{"path":"/reference/indicator_donor_systemic_concentration.html","id":null,"dir":"Reference","previous_headings":"","what":"Donor Systemic: Concentration Index — indicator_donor_systemic_concentration","title":"Donor Systemic: Concentration Index — indicator_donor_systemic_concentration","text":"Calculates Herfindahl–Hirschman concentration index (HHI) donor, based distribution funding amounts across recipient organizations. higher value means donor funds fewer recipients heavily.","code":""},{"path":"/reference/indicator_donor_systemic_concentration.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Donor Systemic: Concentration Index — indicator_donor_systemic_concentration","text":"","code":"indicator_donor_systemic_concentration(flows, donors = NULL)"},{"path":"/reference/indicator_donor_systemic_concentration.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Donor Systemic: Concentration Index — indicator_donor_systemic_concentration","text":"flows dataframe including sourceObjects, destinationObjects, amountUSD. donors (optional) dataframe donor names merge results.","code":""},{"path":"/reference/indicator_donor_systemic_concentration.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Donor Systemic: Concentration Index — indicator_donor_systemic_concentration","text":"tibble donor Donor_Concentration_Index (0–1 scale).","code":""},{"path":"/reference/indicator_donor_systemic_concentration.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Donor Systemic: Concentration Index — indicator_donor_systemic_concentration","text":"Goal: Measures concentrated donor’s portfolio across recipients.","code":""},{"path":"/reference/indicator_donor_systemic_concentration.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Donor Systemic: Concentration Index — indicator_donor_systemic_concentration","text":"","code":"donors <- indicator_donor_systemic_concentration(flows)  #table(donors$Donor_Concentration_Index)  library(ggplot2) ggplot(donors, aes(x = Donor_Concentration_Index)) +   geom_histogram(binwidth = 0.05, fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Concentration Index\",     x = \"\",     y = \"Number of Donors\",     caption = paste(     \"Indicator interpretation:\",     \"Herfindahl-Hirschman Index measuring portfolio concentration across      recipients (0 = highly diversified, 1 = focused on few recipients).\",     \"\\n\\n\",          \"How to read the visualization:\",     \"X-axis shows concentration level. Left side indicates donors spreading     funds widely, right side indicates focused funding on few partners.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Helps identify donors with broad partner networks vs specialized      relationships, informing partnership and resource mobilization strategies.\",     \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   )"},{"path":"/reference/indicator_donor_systemic_destination_alignment.html","id":null,"dir":"Reference","previous_headings":"","what":"Donors Systemic: Destination Alignment (Optimized) — indicator_donor_systemic_destination_alignment","title":"Donors Systemic: Destination Alignment (Optimized) — indicator_donor_systemic_destination_alignment","text":"Calculates pairwise Jaccard similarity donors based funded destinations (locations clusters). indicates overlap convergence geographic thematic focus.","code":""},{"path":"/reference/indicator_donor_systemic_destination_alignment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Donors Systemic: Destination Alignment (Optimized) — indicator_donor_systemic_destination_alignment","text":"","code":"indicator_donor_systemic_destination_alignment(flows)"},{"path":"/reference/indicator_donor_systemic_destination_alignment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Donors Systemic: Destination Alignment (Optimized) — indicator_donor_systemic_destination_alignment","text":"flows dataframe including least sourceObjects destinationObjects nested data frames.","code":""},{"path":"/reference/indicator_donor_systemic_destination_alignment.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Donors Systemic: Destination Alignment (Optimized) — indicator_donor_systemic_destination_alignment","text":"tibble columns: donor1 First donor pair. donor2 Second donor pair. Destination_Alignment Jaccard similarity (0–1) destinations.","code":""},{"path":"/reference/indicator_donor_systemic_destination_alignment.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Donors Systemic: Destination Alignment (Optimized) — indicator_donor_systemic_destination_alignment","text":"Goal: Measures many destinations common donors relative total unique destinations, producing 0–1 index. function works follows: Filters flows using filter_flows_for_indicators() remove flows included (e.g., parked parents, pass-throughs, --boundary flows). Unnests sourceObjects destinationObjects, keeping donors valid destination types (Cluster, GlobalCluster, Location). Creates list destinations donor. Computes Jaccard similarity unique donor pairs using precomputed lists, avoiding repeated filtering. Returns tibble donor1, donor2, Destination_Alignment.","code":""},{"path":"/reference/indicator_donor_systemic_destination_alignment.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Donors Systemic: Destination Alignment (Optimized) — indicator_donor_systemic_destination_alignment","text":"","code":"# Compute alignment alignment <- indicator_donor_systemic_destination_alignment(flows)  # Viz library(ggplot2) library(dplyr) #>  #> Attaching package: ‘dplyr’ #> The following objects are masked from ‘package:stats’: #>  #>     filter, lag #> The following objects are masked from ‘package:base’: #>  #>     intersect, setdiff, setequal, union   # Compute total funding per donor top_donors <- flows |>   tidyr::unnest(sourceObjects, names_sep = \"_\") |>   dplyr::filter(sourceObjects_type == \"Organization\") |>   dplyr::rename(donor = sourceObjects_name) |>   dplyr::group_by(donor) |>   dplyr::summarise(total_funding = sum(amountUSD, na.rm = TRUE), .groups = \"drop\") |>   dplyr::arrange(desc(total_funding)) |>   dplyr::slice_head(n = 15) |>   dplyr::pull(donor)  # Filter alignment to top donors alignment_top <- alignment |>   dplyr::filter(donor1 %in% top_donors, donor2 %in% top_donors)  # Prepare data for ggplot plot_df <- alignment_top |>   dplyr::mutate(     donor1 = factor(donor1, levels = top_donors),     donor2 = factor(donor2, levels = top_donors)   )  # Heatmap ggplot(plot_df, aes(x = donor2, y = donor1, fill = Destination_Alignment)) +   geom_tile(color = \"white\") +   scale_fill_viridis_c(option = \"plasma\", na.value = \"grey80\", limits = c(0, 1)) +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   theme(axis.text.x = element_text(angle = 45, hjust = 1)) +   labs(     title = \"Top 15 Donors: Destination Alignment\",     x = \"Donor 2\",     y = \"Donor 1\",     fill = \"Jaccard\\nSimilarity\",     caption = paste(     \"Indicator interpretation:\",     \"Jaccard similarity measuring overlap in funded locations/clusters between donor pairs (0 = no overlap, 1 = identical destination portfolios).\", \"\\n\\n\",          \"How to read the visualization:\",     \"Heatmap shows pairwise alignment. Dark colors indicate high geographic/thematic overlap, light colors indicate complementary coverage.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies donor clusters with similar focus areas, helping coordinate advocacy and avoid duplication in under-funded crises.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   )"},{"path":"/reference/indicator_donor_timing_consistency.html","id":null,"dir":"Reference","previous_headings":"","what":"Donor Timing Consistency Index — indicator_donor_timing_consistency","title":"Donor Timing Consistency Index — indicator_donor_timing_consistency","text":"indicator measures consistently donor provides funding across months year, based transaction-level date field FTS flows. evaluates dispersion monthly funding shares scales result 0–1 index higher values represent regular predictable timing contributions.","code":""},{"path":"/reference/indicator_donor_timing_consistency.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Donor Timing Consistency Index — indicator_donor_timing_consistency","text":"","code":"indicator_donor_timing_consistency(flows, donors = NULL)"},{"path":"/reference/indicator_donor_timing_consistency.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Donor Timing Consistency Index — indicator_donor_timing_consistency","text":"flows dataframe containing sourceObjects, budgetMonth (1–12), amountUSD. donors Optional dataframe donor names.","code":""},{"path":"/reference/indicator_donor_timing_consistency.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Donor Timing Consistency Index — indicator_donor_timing_consistency","text":"tibble donor Timing_Consistency (1 = consistent, 0 = erratic).","code":""},{"path":"/reference/indicator_donor_timing_consistency.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Donor Timing Consistency Index — indicator_donor_timing_consistency","text":"","code":"donors <- indicator_donor_timing_consistency(flows) #table(donors$Timing_Consistency) library(ggplot2) ggplot(donors, aes(x = Timing_Consistency)) +   geom_histogram(binwidth = 0.05, fill = \"steelblue\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Donor Timing Consistency\",     x = \"\",     y = \"Number of Donors\",     caption = paste(     \"Indicator interpretation:\",     \"Measures regularity of funding distribution across month     (1 = evenly spread, 0 = highly seasonal/erratic). Based on monthly      funding share dispersion.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows consistency scores. Higher values indicate predictable     monthly funding patterns, lower values indicate lumpy or seasonal     disbursements.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Predictable timing enables better cash flow management and program     continuity, reducing operational disruptions in emergency responses.\",     \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> Warning: Removed 106 rows containing non-finite outside the scale range (`stat_bin()`)."},{"path":"/reference/indicator_recipient_amount_stability.html","id":null,"dir":"Reference","previous_headings":"","what":"Amount Stability — indicator_recipient_amount_stability","title":"Amount Stability — indicator_recipient_amount_stability","text":"Measures stability annual funding amounts recipient 1 minus coefficient variation annual totals.","code":""},{"path":"/reference/indicator_recipient_amount_stability.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Amount Stability — indicator_recipient_amount_stability","text":"","code":"indicator_recipient_amount_stability(flows, recipients = NULL)"},{"path":"/reference/indicator_recipient_amount_stability.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Amount Stability — indicator_recipient_amount_stability","text":"flows dataframe containing destinationObjects, budgetYear, amountUSD. recipients Optional dataframe recipient organizations merge.","code":""},{"path":"/reference/indicator_recipient_amount_stability.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Amount Stability — indicator_recipient_amount_stability","text":"tibble columns recipient Amount_Stability.","code":""},{"path":"/reference/indicator_recipient_amount_stability.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Amount Stability — indicator_recipient_amount_stability","text":"","code":"recipients <- indicator_recipient_amount_stability(flows) #table(recipients$Amount_Stability)  library(ggplot2) ggplot(recipients, aes(x = Amount_Stability)) +   geom_histogram( fill = \"lightgreen\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Recipients Amount Stability\",     x = \"\",     y = \"Number of Recipients\",     caption = paste(     \"Indicator interpretation:\",     \"Measures year-to-year funding stability as 1 minus coefficient of variation.     1 = perfectly stable annual funding, lower values = volatile funding      patterns.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows stability scores. Higher values indicate predictable funding     streams, negative values indicate high volatility (SD > mean).\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Stable funding enables long-term programming and institutional strengthening,     while volatility disrupts operations and staff retention.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 455 rows containing non-finite outside the scale range (`stat_bin()`)."},{"path":"/reference/indicator_recipient_cofunding_rate.html","id":null,"dir":"Reference","previous_headings":"","what":"Co-Funding Rate — indicator_recipient_cofunding_rate","title":"Co-Funding Rate — indicator_recipient_cofunding_rate","text":"Calculates percentage flows recipient shares funding recipient organizations (sole recipient).","code":""},{"path":"/reference/indicator_recipient_cofunding_rate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Co-Funding Rate — indicator_recipient_cofunding_rate","text":"","code":"indicator_recipient_cofunding_rate(flows, recipients = NULL)"},{"path":"/reference/indicator_recipient_cofunding_rate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Co-Funding Rate — indicator_recipient_cofunding_rate","text":"flows dataframe containing destinationObjects amountUSD. recipients Optional dataframe recipient organizations merge.","code":""},{"path":"/reference/indicator_recipient_cofunding_rate.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Co-Funding Rate — indicator_recipient_cofunding_rate","text":"tibble recipient Co_Funding_Rate.","code":""},{"path":"/reference/indicator_recipient_cofunding_rate.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Co-Funding Rate — indicator_recipient_cofunding_rate","text":"","code":"recipients <- indicator_recipient_cofunding_rate(flows) #table(recipients$Co_Funding_Rate)  library(ggplot2) ggplot(recipients, aes(x = Co_Funding_Rate)) +   geom_histogram( fill = \"lightgreen\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Recipients CoFunding Rate\",     x = \"\",     y = \"Number of Recipients\",     caption = paste(     \"Indicator interpretation:\",     \"Percentage of funding flows where recipient shares funding with other      organizations (not sole recipient). 0 = always sole recipient,      1 = always co-funded.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows co-funding frequency. Higher values indicate collaborative     funding arrangements, lower values indicate standalone projects.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies organizations experienced in consortium work and coordination,     crucial for complex multi-partner responses and integrated programming.\",      \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/reference/indicator_recipient_funding_share.html","id":null,"dir":"Reference","previous_headings":"","what":"Funding Volume Share — indicator_recipient_funding_share","title":"Funding Volume Share — indicator_recipient_funding_share","text":"Calculates share total funding received recipient organization.","code":""},{"path":"/reference/indicator_recipient_funding_share.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Funding Volume Share — indicator_recipient_funding_share","text":"","code":"indicator_recipient_funding_share(flows, recipients = NULL)"},{"path":"/reference/indicator_recipient_funding_share.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Funding Volume Share — indicator_recipient_funding_share","text":"flows dataframe containing destinationObjects amountUSD. recipients Optional dataframe recipient organizations merge results.","code":""},{"path":"/reference/indicator_recipient_funding_share.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Funding Volume Share — indicator_recipient_funding_share","text":"tibble columns recipient Funding_Volume_Share.","code":""},{"path":"/reference/indicator_recipient_funding_share.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Funding Volume Share — indicator_recipient_funding_share","text":"","code":"recipients <- indicator_recipient_funding_share(flows) #table(recipients$Funding_Volume_Share)  library(ggplot2) # Basic histogram of Knowledge Sharing Intensity ggplot(recipients, aes(x = Funding_Volume_Share)) +   geom_histogram( fill = \"lightgreen\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Recipients Funding Volume Share\",     x = \"\",     y = \"Number of Recipients\",     caption = paste(     \"Indicator interpretation:\",     \"Measures the proportion of total humanitarian funding received by each      recipient organization. Higher values indicate larger market share.\",      \"\\n\\n\",          \"How to read the visualization:\",     \"X-axis shows funding share (0-1), Y-axis shows recipient count. Most      recipients will have small shares, few will dominate (right tail).\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Identifies major implementing partners and market concentration, helping      understand dependency risks and partnership opportunities.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`."},{"path":"/reference/indicator_recipient_systemic_diversification.html","id":null,"dir":"Reference","previous_headings":"","what":"Recipient Systemic: Diversification Index — indicator_recipient_systemic_diversification","title":"Recipient Systemic: Diversification Index — indicator_recipient_systemic_diversification","text":"Calculates entropy funding sources per recipient, indicating diversified recipient’s funding base across donors.","code":""},{"path":"/reference/indicator_recipient_systemic_diversification.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recipient Systemic: Diversification Index — indicator_recipient_systemic_diversification","text":"","code":"indicator_recipient_systemic_diversification(flows, recipients_df = NULL)"},{"path":"/reference/indicator_recipient_systemic_diversification.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recipient Systemic: Diversification Index — indicator_recipient_systemic_diversification","text":"flows dataframe including sourceObjects, destinationObjects, amountUSD. recipients_df (optional) dataframe recipient names merge results.","code":""},{"path":"/reference/indicator_recipient_systemic_diversification.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recipient Systemic: Diversification Index — indicator_recipient_systemic_diversification","text":"tibble recipient Recipient_Diversification_Index (0–1 scale).","code":""},{"path":"/reference/indicator_recipient_systemic_diversification.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Recipient Systemic: Diversification Index — indicator_recipient_systemic_diversification","text":"Goal: Measures many donors contribute recipient, using entropy. High entropy = diversified funding base.","code":""},{"path":"/reference/indicator_recipient_systemic_diversification.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recipient Systemic: Diversification Index — indicator_recipient_systemic_diversification","text":"","code":"recipients <- indicator_recipient_systemic_diversification(flows) #table(recipients$Recipient_Diversification_Index)  library(ggplot2) ggplot(recipients, aes(x = Recipient_Diversification_Index)) +   geom_histogram( fill = \"lightgreen\", color = \"white\") +   unhcrthemes::theme_unhcr(grid = \"Y\", axis = \"X\", axis_title = FALSE) +   labs(     title = \"Distribution of Recipient Diversification Index\",     x = \"\",     y = \"Number of Recipients\",     caption = paste(     \"Indicator interpretation:\",     \"Entropy-based measure of funding source diversification across donors.      0 = dependent on single donor,     1 = perfectly diversified across many donors.\", \"\\n\\n\",          \"How to read the visualization:\",     \"Histogram shows diversification levels. Higher values indicate resilient      funding bases, lower values indicate donor concentration risks.\", \"\\n\\n\",          \"Humanitarian relevance:\",     \"Diversified funding reduces vulnerability to individual donor policy      changes and enhances organizational sustainability and independence.\", \"\\n\\n\",          \"Source: Financial Tracking Service (FTS) API.\"   )   ) #> `stat_bin()` using `bins = 30`. Pick better value `binwidth`. #> Warning: Removed 469 rows containing non-finite outside the scale range (`stat_bin()`)."},{"path":"/reference/plot_destination_funding_destination.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Funding by Destination Location — plot_destination_funding_destination","title":"Plot Funding by Destination Location — plot_destination_funding_destination","text":"Visualizes total humanitarian funding directed given destination destination. Useful identify funding hotspots compare regions.","code":""},{"path":"/reference/plot_destination_funding_destination.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Funding by Destination Location — plot_destination_funding_destination","text":"","code":"plot_destination_funding_destination(flows, destination_name)"},{"path":"/reference/plot_destination_funding_destination.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Funding by Destination Location — plot_destination_funding_destination","text":"flows dataframe humanitarian funding flows (FTS format). destination_name name destination location filter.","code":""},{"path":"/reference/plot_destination_funding_destination.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Funding by Destination Location — plot_destination_funding_destination","text":"ggplot object showing total funding per donor destination.","code":""},{"path":"/reference/plot_destination_funding_destination.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Funding by Destination Location — plot_destination_funding_destination","text":"","code":"p <- plot_destination_funding_destination(flows, destination_name= \"Burundi\")  # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/reference/plot_destination_funding_donor.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Destination Funding by Donor — plot_destination_funding_donor","title":"Plot Destination Funding by Donor — plot_destination_funding_donor","text":"Shows funding received destination multiple donors. Useful identify funding hotspots dependency.","code":""},{"path":"/reference/plot_destination_funding_donor.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Destination Funding by Donor — plot_destination_funding_donor","text":"","code":"plot_destination_funding_donor(flows, destination_name)"},{"path":"/reference/plot_destination_funding_donor.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Destination Funding by Donor — plot_destination_funding_donor","text":"flows FTS flows dataframe. destination_name Destination location name.","code":""},{"path":"/reference/plot_destination_funding_donor.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Destination Funding by Donor — plot_destination_funding_donor","text":"ggplot object showing total funding per donor destination.","code":""},{"path":"/reference/plot_destination_funding_donor.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Destination Funding by Donor — plot_destination_funding_donor","text":"","code":"p <- plot_destination_funding_donor(flows, destination_name= \"Burundi\")  # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/reference/plot_destination_heatmap.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Top Donors Heatmap — plot_destination_heatmap","title":"Plot Top Donors Heatmap — plot_destination_heatmap","text":"Visualizes total funding top donors recipient organizations given destination.","code":""},{"path":"/reference/plot_destination_heatmap.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Top Donors Heatmap — plot_destination_heatmap","text":"","code":"plot_destination_heatmap(flows, destination_name, top_n = 5)"},{"path":"/reference/plot_destination_heatmap.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Top Donors Heatmap — plot_destination_heatmap","text":"flows FTS flows dataframe destination_name Name destination location filter top_n Number top donors display (default = 5)","code":""},{"path":"/reference/plot_destination_heatmap.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Top Donors Heatmap — plot_destination_heatmap","text":"ggplot heatmap","code":""},{"path":"/reference/plot_destination_heatmap.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Top Donors Heatmap — plot_destination_heatmap","text":"","code":"p <- plot_destination_heatmap(flows, destination_name= \"Burundi\", top_n = 5)  # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/reference/plot_donor_cluster_coverage.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Donor Cluster Coverage — plot_donor_cluster_coverage","title":"Plot Donor Cluster Coverage — plot_donor_cluster_coverage","text":"Visualizes humanitarian clusters donor supports, using number flows per cluster. Useful understand donor focus alignment sector priorities.","code":""},{"path":"/reference/plot_donor_cluster_coverage.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Donor Cluster Coverage — plot_donor_cluster_coverage","text":"","code":"plot_donor_cluster_coverage(flows, donor_name)"},{"path":"/reference/plot_donor_cluster_coverage.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Donor Cluster Coverage — plot_donor_cluster_coverage","text":"flows FTS flows dataframe. donor_name Donor organization name.","code":""},{"path":"/reference/plot_donor_cluster_coverage.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Donor Cluster Coverage — plot_donor_cluster_coverage","text":"ggplot object showing donor funding coverage across clusters.","code":""},{"path":"/reference/plot_donor_cluster_coverage.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Donor Cluster Coverage — plot_donor_cluster_coverage","text":"","code":"p <- plot_donor_cluster_coverage(flows, donor_name= \"Spain, Government of\")  # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/reference/plot_donor_earmarking.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Donor Funding by Earmarking Type — plot_donor_earmarking","title":"Plot Donor Funding by Earmarking Type — plot_donor_earmarking","text":"Visualizes proportion funding per earmarking type (Unearmarked, Softly earmarked, etc.) selected donor. Helps understand donor flexibility restrictions.","code":""},{"path":"/reference/plot_donor_earmarking.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Donor Funding by Earmarking Type — plot_donor_earmarking","text":"","code":"plot_donor_earmarking(flows, donor_name)"},{"path":"/reference/plot_donor_earmarking.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Donor Funding by Earmarking Type — plot_donor_earmarking","text":"flows dataframe humanitarian funding flows (FTS format). donor_name Donor organization name filter.","code":""},{"path":"/reference/plot_donor_earmarking.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Donor Funding by Earmarking Type — plot_donor_earmarking","text":"ggplot object showing donor funding earmarking type.","code":""},{"path":"/reference/plot_donor_earmarking.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Donor Funding by Earmarking Type — plot_donor_earmarking","text":"","code":"p <- plot_donor_earmarking(flows, donor_name= \"Spain, Government of\")  # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/reference/plot_donor_flowtype.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Donor Flow Type Distribution — plot_donor_flowtype","title":"Plot Donor Flow Type Distribution — plot_donor_flowtype","text":"Shows distribution flow types (Standard, Parked, Pass-, Carryover) selected donor. Useful understanding donor engagement complexity.","code":""},{"path":"/reference/plot_donor_flowtype.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Donor Flow Type Distribution — plot_donor_flowtype","text":"","code":"plot_donor_flowtype(flows, donor_name)"},{"path":"/reference/plot_donor_flowtype.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Donor Flow Type Distribution — plot_donor_flowtype","text":"flows FTS flows dataframe. donor_name Donor organization name.","code":""},{"path":"/reference/plot_donor_flowtype.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Donor Flow Type Distribution — plot_donor_flowtype","text":"ggplot object showing flow type proportions.","code":""},{"path":"/reference/plot_donor_flowtype.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Donor Flow Type Distribution — plot_donor_flowtype","text":"","code":"p <- plot_donor_flowtype(flows, donor_name= \"Spain, Government of\")  # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/reference/plot_donor_funding_over_time.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Donor Funding Over Time — plot_donor_funding_over_time","title":"Plot Donor Funding Over Time — plot_donor_funding_over_time","text":"Visualizes total funding provided given donor across budget years. Useful track trends, identify peaks, assess consistency.","code":""},{"path":"/reference/plot_donor_funding_over_time.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Donor Funding Over Time — plot_donor_funding_over_time","text":"","code":"plot_donor_funding_over_time(flows, donor_name)"},{"path":"/reference/plot_donor_funding_over_time.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Donor Funding Over Time — plot_donor_funding_over_time","text":"flows dataframe humanitarian funding flows (FTS format). donor_name name donor organization filter.","code":""},{"path":"/reference/plot_donor_funding_over_time.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Donor Funding Over Time — plot_donor_funding_over_time","text":"ggplot object showing donor funding trends budget years.","code":""},{"path":"/reference/plot_donor_funding_over_time.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Donor Funding Over Time — plot_donor_funding_over_time","text":"","code":"p <- plot_donor_funding_over_time(flows, donor_name= \"Spain, Government of\")  # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) #cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") print(p + ggplot2::labs(subtitle = dubbed))"},{"path":"/reference/plot_funding_status_timeline.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Funding Timeline by Status — plot_funding_status_timeline","title":"Plot Funding Timeline by Status — plot_funding_status_timeline","text":"Shows evolution funding amounts status (pledge, commitment, paid) across budget years. Useful tracking donor disbursement progress.","code":""},{"path":"/reference/plot_funding_status_timeline.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Funding Timeline by Status — plot_funding_status_timeline","text":"","code":"plot_funding_status_timeline(flows)"},{"path":"/reference/plot_funding_status_timeline.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Funding Timeline by Status — plot_funding_status_timeline","text":"flows FTS flows dataframe.","code":""},{"path":"/reference/plot_funding_status_timeline.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Funding Timeline by Status — plot_funding_status_timeline","text":"ggplot object showing funding time status.","code":""},{"path":"/reference/plot_funding_status_timeline.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Funding Timeline by Status — plot_funding_status_timeline","text":"","code":"p <- plot_funding_status_timeline(flows)  # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/reference/plot_location_funding_destination.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Funding by Destination Location — plot_location_funding_destination","title":"Plot Funding by Destination Location — plot_location_funding_destination","text":"Visualizes total humanitarian funding directed given destination location. Useful identify funding hotspots compare regions.","code":""},{"path":"/reference/plot_location_funding_destination.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Funding by Destination Location — plot_location_funding_destination","text":"","code":"plot_location_funding_destination(flows, location_name)"},{"path":"/reference/plot_location_funding_destination.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Funding by Destination Location — plot_location_funding_destination","text":"flows dataframe humanitarian funding flows (FTS format). location_name name destination location filter.","code":""},{"path":"/reference/plot_location_funding_destination.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Funding by Destination Location — plot_location_funding_destination","text":"ggplot object showing total funding per donor location.","code":""},{"path":"/reference/plot_location_funding_destination.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Funding by Destination Location — plot_location_funding_destination","text":"","code":"p <- plot_location_funding_destination(flows, location_name= \"Burundi\")  # getting LLm story story <- generate_plot_story(p, provider = \"ollama\", model = \"deepseek-r1\") # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"ollama\", model = \"deepseek-r1\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/reference/plot_location_funding_donor.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Destination Funding by Donor — plot_location_funding_donor","title":"Plot Destination Funding by Donor — plot_location_funding_donor","text":"Shows funding received location multiple donors. Useful identify funding hotspots dependency.","code":""},{"path":"/reference/plot_location_funding_donor.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Destination Funding by Donor — plot_location_funding_donor","text":"","code":"plot_location_funding_donor(flows, location_name)"},{"path":"/reference/plot_location_funding_donor.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Destination Funding by Donor — plot_location_funding_donor","text":"flows FTS flows dataframe. location_name Destination location name.","code":""},{"path":"/reference/plot_location_funding_donor.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Destination Funding by Donor — plot_location_funding_donor","text":"ggplot object showing total funding per donor location.","code":""},{"path":"/reference/plot_location_funding_donor.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Destination Funding by Donor — plot_location_funding_donor","text":"","code":"p <- plot_location_funding_donor(flows, location_name= \"Burundi\")  # getting LLm story story <- generate_plot_story(p, provider = \"ollama\", model = \"deepseek-r1\") # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"ollama\", model = \"deepseek-r1\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/reference/plot_location_heatmap.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Top Donors Heatmap — plot_location_heatmap","title":"Plot Top Donors Heatmap — plot_location_heatmap","text":"Visualizes total funding top donors recipient organizations given location.","code":""},{"path":"/reference/plot_location_heatmap.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Top Donors Heatmap — plot_location_heatmap","text":"","code":"plot_location_heatmap(flows, location_name, top_n = 5)"},{"path":"/reference/plot_location_heatmap.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Top Donors Heatmap — plot_location_heatmap","text":"flows FTS flows dataframe location_name Name destination location filter top_n Number top donors display (default = 5)","code":""},{"path":"/reference/plot_location_heatmap.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Top Donors Heatmap — plot_location_heatmap","text":"ggplot heatmap","code":""},{"path":"/reference/plot_location_heatmap.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Top Donors Heatmap — plot_location_heatmap","text":"","code":"p <- plot_location_heatmap(flows, location_name= \"Burundi\", top_n = 5)  # getting LLm story story <- generate_plot_story(p, provider = \"ollama\", model = \"deepseek-r1\") # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"ollama\", model = \"deepseek-r1\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/reference/plot_recipient_cofunding.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Recipient Co-Funding Rate — plot_recipient_cofunding","title":"Plot Recipient Co-Funding Rate — plot_recipient_cofunding","text":"Shows often recipient shares funding recipients given donor. Useful see multi-recipient funding trends.","code":""},{"path":"/reference/plot_recipient_cofunding.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Recipient Co-Funding Rate — plot_recipient_cofunding","text":"","code":"plot_recipient_cofunding(flows, recipient_name)"},{"path":"/reference/plot_recipient_cofunding.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Recipient Co-Funding Rate — plot_recipient_cofunding","text":"flows dataframe FTS funding flows. recipient_name Recipient organization name filter.","code":""},{"path":"/reference/plot_recipient_cofunding.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Recipient Co-Funding Rate — plot_recipient_cofunding","text":"ggplot object co-funding rates.","code":""},{"path":"/reference/plot_recipient_cofunding.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Recipient Co-Funding Rate — plot_recipient_cofunding","text":"","code":"p <- plot_recipient_cofunding(flows,                recipient_name = \"United Nations High Commissioner for Refugees\")   # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/reference/plot_recipient_contribution_type.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Recipient Funding by Contribution Type — plot_recipient_contribution_type","title":"Plot Recipient Funding by Contribution Type — plot_recipient_contribution_type","text":"Visualizes split funding received recipient based contribution type (e.g., financial -kind). Useful assess funding modality diversity.","code":""},{"path":"/reference/plot_recipient_contribution_type.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Recipient Funding by Contribution Type — plot_recipient_contribution_type","text":"","code":"plot_recipient_contribution_type(flows, recipient_name)"},{"path":"/reference/plot_recipient_contribution_type.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Recipient Funding by Contribution Type — plot_recipient_contribution_type","text":"flows FTS flows dataframe. recipient_name Recipient organization name.","code":""},{"path":"/reference/plot_recipient_contribution_type.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Recipient Funding by Contribution Type — plot_recipient_contribution_type","text":"ggplot object showing funding contribution type.","code":""},{"path":"/reference/plot_recipient_contribution_type.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Recipient Funding by Contribution Type — plot_recipient_contribution_type","text":"","code":"p <- plot_recipient_contribution_type(flows,                  recipient_name = \"United Nations High Commissioner for Refugees\")   # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/reference/plot_recipient_funding_composition.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Recipient Funding Composition by Donor — plot_recipient_funding_composition","title":"Plot Recipient Funding Composition by Donor — plot_recipient_funding_composition","text":"Shows specific recipient organization’s funding distributed across donors. Useful assessing donor diversification reliance.","code":""},{"path":"/reference/plot_recipient_funding_composition.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Recipient Funding Composition by Donor — plot_recipient_funding_composition","text":"","code":"plot_recipient_funding_composition(flows, recipient_name)"},{"path":"/reference/plot_recipient_funding_composition.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Recipient Funding Composition by Donor — plot_recipient_funding_composition","text":"flows dataframe humanitarian funding flows (FTS format). recipient_name name recipient organization filter.","code":""},{"path":"/reference/plot_recipient_funding_composition.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Recipient Funding Composition by Donor — plot_recipient_funding_composition","text":"ggplot object showing donor shares recipient funding.","code":""},{"path":"/reference/plot_recipient_funding_composition.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Recipient Funding Composition by Donor — plot_recipient_funding_composition","text":"","code":"p <- plot_recipient_funding_composition(flows,                recipient_name = \"United Nations High Commissioner for Refugees\")  # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/reference/plot_recipient_grandbargain.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Grand Bargain Earmarking by Recipient — plot_recipient_grandbargain","title":"Plot Grand Bargain Earmarking by Recipient — plot_recipient_grandbargain","text":"Visualizes proportion funding earmarked Grand Bargain commitments recipient. Helps assess much funding aligns international humanitarian reform commitments.","code":""},{"path":"/reference/plot_recipient_grandbargain.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Grand Bargain Earmarking by Recipient — plot_recipient_grandbargain","text":"","code":"plot_recipient_grandbargain(flows, recipient_name)"},{"path":"/reference/plot_recipient_grandbargain.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Grand Bargain Earmarking by Recipient — plot_recipient_grandbargain","text":"flows FTS flows dataframe. recipient_name Recipient organization name.","code":""},{"path":"/reference/plot_recipient_grandbargain.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot Grand Bargain Earmarking by Recipient — plot_recipient_grandbargain","text":"ggplot object showing split earmarked vs non-earmarked funding.","code":""},{"path":"/reference/plot_recipient_grandbargain.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Grand Bargain Earmarking by Recipient — plot_recipient_grandbargain","text":"","code":"p <- plot_recipient_grandbargain(flows,           recipient_name = \"United Nations High Commissioner for Refugees\") #> Scale for y is already present. #> Adding another scale for y, which will replace the existing scale.  # getting LLm story story <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\", max_tokens = 300) # cat(story) # and plot with more powerful subtitle dubbed <- generate_plot_story(p, provider = \"azure\", model = \"gpt-4.1-mini\") p + ggplot2::labs(subtitle = dubbed)"},{"path":"/reference/slugify.html","id":null,"dir":"Reference","previous_headings":"","what":"slugify — slugify","title":"slugify — slugify","text":"Convert string slug","code":""},{"path":"/reference/slugify.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"slugify — slugify","text":"","code":"slugify(x)"},{"path":"/reference/slugify.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"slugify — slugify","text":"x string","code":""},{"path":"/reference/slugify.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"slugify — slugify","text":"slugified string","code":""},{"path":"/reference/slugify.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"slugify — slugify","text":"","code":"strings <- c(\"Café au Lait\", \"Niño Español\", \"Data_Science_Project\", \"--test--string--\") slugify(strings) #> [1] \"cafe-au-lait\"         \"nino-espanol\"         \"data-science-project\" #> [4] \"test-string\""},{"path":"/news/index.html","id":"ftsanalysis-development-version","dir":"Changelog","previous_headings":"","what":"ftsAnalysis (development version)","title":"ftsAnalysis (development version)","text":"Initial version.","code":""}]
