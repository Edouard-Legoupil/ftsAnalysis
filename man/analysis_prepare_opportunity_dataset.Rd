% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/analysis_prepare_opportunity_dataset.R
\name{analysis_prepare_opportunity_dataset}
\alias{analysis_prepare_opportunity_dataset}
\title{Prepare Funding Opportunity Dataset}
\usage{
analysis_prepare_opportunity_dataset(
  flows,
  lookback_years = 3,
  crisis_keywords = c("refugees", "refugee", "displacement", "displaced", "returnees",
    "idps", "protection", "conflict", "vulnerable")
)
}
\arguments{
\item{flows}{Dataframe \code{flows}.}

\item{lookback_years}{Integer number of past years to compute trends (default 3).}

\item{crisis_keywords}{Character vector of keywords to flag global events
(default common terms).}
}
\value{
A tibble of donor, recipient, year, and features.
}
\description{
Aggregates flows into donor-recipient-year observations and prepares features
for an opportunity prediction model. Features include:
\itemize{
\item donor funding cycle timing (mean decision month)
\item historical funding patterns (growth in recent years)
\item simple NLP signals from description/keywords (presence of crisis keywords)
\item sector funding trends (share to global clusters)
}
}
\details{
This function returns a tidy dataframe suitable for model training.
}
\examples{
crisis_keywords = c("refugees", "refugee","displacement", "displaced",
                         "returnees","idps",
                        "protection", "conflict", "vulnerable")

result <- analysis_prepare_opportunity_dataset( flows,
    lookback_years = 3,
    crisis_keywords = crisis_keywords)
print(result$plot)
  
}
